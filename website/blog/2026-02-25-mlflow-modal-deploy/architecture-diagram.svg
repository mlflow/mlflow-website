<svg xmlns="http://www.w3.org/2000/svg" width="848" height="800" viewBox="-20 -20 848 800">
<defs><marker id="arrow-868e96" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#868e96" /></marker><style>text { font-family: "Segoe UI", system-ui, -apple-system, sans-serif; }</style></defs>
<text x="280" y="24" font-size="24" fill="#228be6">mlflow-modal-deploy Architecture</text>
<rect x="240" y="56" width="320" height="56" rx="8" stroke="#f8f9fa" fill="#228be6" stroke-width="1" />
<text x="400" y="84" font-size="16" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">MLflow Model Registry</text>
<text x="280" y="131" font-size="11" fill="#868e96">runs:/{run_id}/model</text>
<path d="M 400 112 L 400 160" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="216" y="160" width="368" height="56" rx="8" stroke="#f8f9fa" fill="#3b5bdb" stroke-width="1" />
<text x="400" y="188" font-size="16" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">mlflow-modal-deploy plugin</text>
<text x="248" y="235" font-size="11" fill="#868e96">client.create_deployment()</text>
<path d="M 296 216 L 136 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 400 216 L 400 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 504 216 L 664 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="0" y="280" width="248" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="124" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Extract dependencies</text>
<text x="16" y="355" font-size="11" fill="#868e96">requirements.txt / conda.yaml</text>
<rect x="280" y="280" width="248" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="404" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Generate Modal app.py</text>
<text x="296" y="355" font-size="11" fill="#868e96">GPU, scaling, endpoints config</text>
<rect x="560" y="280" width="248" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="684" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Upload to Modal Volume</text>
<text x="576" y="355" font-size="11" fill="#868e96">model artifacts + wheel files</text>
<path d="M 128 336 L 400 392" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 400 336 L 400 392" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 680 336 L 400 392" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="280" y="392" width="248" height="56" rx="8" stroke="#f8f9fa" fill="#1864ab" stroke-width="1" />
<text x="404" y="420" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">modal deploy app.py</text>
<text x="296" y="467" font-size="11" fill="#868e96">CLI subprocess</text>
<path d="M 400 448 L 400 504" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="112" y="504" width="584" height="160" rx="8" stroke="#40c057" fill="#087f5b" stroke-width="1" />
<text x="128" y="523" font-size="11" fill="#40c057">Modal Cloud</text>
<rect x="136" y="544" width="168" height="48" rx="8" stroke="#f8f9fa" fill="#40c057" stroke-width="1" />
<text x="220" y="568" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Container + GPU</text>
<rect x="328" y="544" width="168" height="48" rx="8" stroke="#f8f9fa" fill="#40c057" stroke-width="1" />
<text x="412" y="568" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Model Volume</text>
<rect x="136" y="608" width="168" height="40" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="220" y="628" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">/predict</text>
<rect x="328" y="608" width="168" height="40" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="412" y="628" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">/predict_stream</text>
<rect x="520" y="544" width="160" height="104" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="600" y="596" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Auto-scaling
0 to N containers</text>
<path d="M 400 664 L 400 712" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="264" y="712" width="280" height="48" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="404" y="736" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">client.predict() / predict_stream()</text>
</svg>