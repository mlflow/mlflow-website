<svg xmlns="http://www.w3.org/2000/svg" width="864" height="808" viewBox="-20 -12 864 808">
<defs><marker id="arrow-868e96" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto"><polygon points="0 0, 10 3.5, 0 7" fill="#868e96" /></marker><style>text { font-family: "Segoe UI", system-ui, -apple-system, sans-serif; }</style></defs>
<text x="220" y="32" font-size="24" fill="#228be6">mlflow-modal-deploy Architecture</text>
<rect x="260" y="48" width="288" height="56" rx="8" stroke="#f8f9fa" fill="#228be6" stroke-width="1" />
<text x="404" y="76" font-size="16" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">MLflow Model Registry</text>
<text x="300" y="123" font-size="11" fill="#868e96">runs:/{run_id}/model</text>
<path d="M 404 104 L 404 152" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="240" y="160" width="328" height="56" rx="8" stroke="#f8f9fa" fill="#3b5bdb" stroke-width="1" />
<text x="404" y="188" font-size="16" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">mlflow-modal-deploy plugin</text>
<text x="260" y="235" font-size="11" fill="#868e96">client.create_deployment()</text>
<path d="M 312 216 L 128 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 404 216 L 404 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 496 216 L 680 280" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="0" y="280" width="256" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="128" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Extract dependencies</text>
<text x="16" y="355" font-size="11" fill="#868e96">requirements.txt / conda.yaml</text>
<rect x="280" y="280" width="256" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="408" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Generate Modal app.py</text>
<text x="296" y="355" font-size="11" fill="#868e96">GPU, scaling, endpoints config</text>
<rect x="560" y="280" width="264" height="56" rx="8" stroke="#f8f9fa" fill="#5c7cfa" stroke-width="1" />
<text x="692" y="308" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Upload to Modal Volume</text>
<text x="576" y="355" font-size="11" fill="#868e96">model artifacts + wheel files</text>
<path d="M 128 336 L 404 400" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 408 336 L 408 400" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<path d="M 692 336 L 408 400" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="284" y="400" width="240" height="56" rx="8" stroke="#f8f9fa" fill="#1864ab" stroke-width="1" />
<text x="404" y="428" font-size="14" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">modal deploy app.py</text>
<text x="300" y="475" font-size="11" fill="#868e96">CLI subprocess</text>
<path d="M 404 456 L 404 512" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="88" y="512" width="632" height="168" rx="8" stroke="#40c057" fill="#087f5b" stroke-width="1" />
<text x="104" y="531" font-size="11" fill="#40c057">Modal Cloud</text>
<rect x="112" y="548" width="184" height="48" rx="8" stroke="#f8f9fa" fill="#40c057" stroke-width="1" />
<text x="204" y="572" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Container + GPU</text>
<rect x="320" y="548" width="176" height="48" rx="8" stroke="#f8f9fa" fill="#40c057" stroke-width="1" />
<text x="408" y="572" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Model Volume</text>
<rect x="520" y="548" width="184" height="96" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="612" y="596" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">Auto-scaling
0 to N containers</text>
<rect x="112" y="612" width="184" height="44" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="204" y="634" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">/predict</text>
<rect x="320" y="612" width="176" height="44" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="408" y="634" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">/predict_stream</text>
<path d="M 404 680 L 404 728" stroke="#868e96" fill="none" stroke-width="2" marker-end="url(#arrow-868e96)" />
<rect x="232" y="728" width="344" height="48" rx="8" stroke="#f8f9fa" fill="#12b886" stroke-width="1" />
<text x="404" y="752" font-size="13" fill="#f8f9fa" text-anchor="middle" dominant-baseline="central">client.predict() / predict_stream()</text>
</svg>