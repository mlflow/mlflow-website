<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 350">
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#555"/>
    </marker>
  </defs>

  <!-- Title -->
  <text x="500" y="25" fill="white" font-family="Arial, sans-serif" font-size="18" font-weight="bold" text-anchor="middle">
    MLflow Prompt Optimization Workflow
  </text>

  <!-- Base Prompt Box -->
  <rect x="30" y="100" width="140" height="100" rx="5" fill="#4A90E2" stroke="#2E5C8A" stroke-width="2"/>
  <text x="100" y="130" fill="white" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Base Prompt</text>
  <text x="100" y="155" fill="white" font-family="Arial" font-size="12" text-anchor="middle">Initial instructions</text>
  <text x="100" y="175" fill="white" font-family="Arial" font-size="13" font-weight="bold" text-anchor="middle">Lower Accuracy</text>

  <!-- Arrow from Base Prompt to Registry -->
  <line x1="100" y1="200" x2="100" y2="260" stroke="#7B68EE" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)"/>

  <!-- Arrow 1 -->
  <line x1="170" y1="150" x2="230" y2="150" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Training Data Box (top) -->
  <rect x="230" y="50" width="140" height="60" rx="5" fill="#F5A623" stroke="#C77E1A" stroke-width="2"/>
  <text x="300" y="75" fill="white" font-family="Arial" font-size="13" font-weight="bold" text-anchor="middle">Training Data</text>
  <text x="300" y="95" fill="white" font-family="Arial" font-size="11" text-anchor="middle">100 HotpotQA examples</text>

  <!-- Arrow from training data to optimizer -->
  <line x1="300" y1="110" x2="300" y2="125" stroke="#555" stroke-width="2"/>
  <line x1="300" y1="125" x2="300" y2="125" stroke="#555" stroke-width="2"/>
  <line x1="300" y1="125" x2="300" y2="145" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- GEPA Optimizer Box -->
  <rect x="230" y="145" width="180" height="70" rx="5" fill="#E94B3C" stroke="#A83229" stroke-width="2"/>
  <text x="320" y="170" fill="white" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">GEPA Optimizer</text>
  <text x="320" y="190" fill="white" font-family="Arial" font-size="11" text-anchor="middle">Analyze → Generate → Evaluate</text>
  <text x="320" y="205" fill="white" font-family="Arial" font-size="11" text-anchor="middle">GPT-4o reflection</text>

  <!-- Arrow 2 -->
  <line x1="410" y1="180" x2="470" y2="180" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Optimized Prompt Box -->
  <rect x="470" y="130" width="140" height="100" rx="5" fill="#50C878" stroke="#2E7D4E" stroke-width="2"/>
  <text x="540" y="155" fill="white" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Optimized</text>
  <text x="540" y="172" fill="white" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Prompt</text>
  <text x="540" y="195" fill="white" font-family="Arial" font-size="11" text-anchor="middle">Enhanced instructions</text>

  <!-- Arrow from Optimized Prompt to Registry -->
  <line x1="540" y1="230" x2="540" y2="260" stroke="#7B68EE" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)"/>

  <!-- Arrow 3 -->
  <line x1="610" y1="180" x2="670" y2="180" stroke="#555" stroke-width="2" marker-end="url(#arrowhead)"/>

  <!-- Results Box -->
  <rect x="670" y="130" width="140" height="100" rx="5" fill="#50C878" stroke="#2E7D4E" stroke-width="2"/>
  <text x="740" y="160" fill="white" font-family="Arial" font-size="14" font-weight="bold" text-anchor="middle">Results</text>
  <text x="740" y="185" fill="white" font-family="Arial" font-size="13" font-weight="bold" text-anchor="middle">Higher Accuracy</text>

  <!-- Scorer annotation -->
  <rect x="430" y="50" width="130" height="50" rx="5" fill="#F5A623" stroke="#C77E1A" stroke-width="2" opacity="0.95"/>
  <text x="495" y="70" fill="white" font-family="Arial" font-size="12" font-weight="bold" text-anchor="middle">Scorer</text>
  <text x="495" y="87" fill="white" font-family="Arial" font-size="11" text-anchor="middle">Equivalence</text>

  <!-- Arrow from scorer to optimizer -->
  <line x1="475" y1="100" x2="385" y2="145" stroke="#555" stroke-width="2" stroke-dasharray="4,4" marker-end="url(#arrowhead)"/>

  <!-- Prompt Registry (at bottom) -->
  <rect x="50" y="260" width="760" height="50" rx="5" fill="#7B68EE" stroke="#5B48CE" stroke-width="2"/>
  <text x="430" y="285" fill="white" font-family="Arial" font-size="15" font-weight="bold" text-anchor="middle">MLflow Prompt Registry</text>
  <text x="430" y="300" fill="white" font-family="Arial" font-size="11" text-anchor="middle">Version control • Track iterations • Enable collaboration</text>

  <!-- Legend -->
  <g transform="translate(850, 100)">
    <text x="0" y="0" fill="white" font-family="Arial" font-size="11" font-weight="bold">Legend:</text>

    <rect x="0" y="10" width="30" height="15" rx="2" fill="#4A90E2"/>
    <text x="35" y="22" fill="white" font-family="Arial" font-size="9">Input</text>

    <rect x="0" y="30" width="30" height="15" rx="2" fill="#F5A623"/>
    <text x="35" y="42" fill="white" font-family="Arial" font-size="9">Data</text>

    <rect x="0" y="50" width="30" height="15" rx="2" fill="#E94B3C"/>
    <text x="35" y="62" fill="white" font-family="Arial" font-size="9">Process</text>

    <rect x="0" y="70" width="30" height="15" rx="2" fill="#50C878"/>
    <text x="35" y="82" fill="white" font-family="Arial" font-size="9">Output</text>

    <rect x="0" y="90" width="30" height="15" rx="2" fill="#7B68EE"/>
    <text x="35" y="102" fill="white" font-family="Arial" font-size="9">Registry</text>
  </g>
</svg>
