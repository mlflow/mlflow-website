
  

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>System Metrics &mdash; MLflow 2.9.3.dev0 documentation</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/system-metrics/index.html">
  
  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    

    

  
    

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="MLflow 2.9.3.dev0 documentation" href="../index.html"/>
        <link rel="next" title="MLflow Projects" href="/../projects.html"/>
        <link rel="prev" title="Remote Experiment Tracking with MLflow Tracking Server" href="/../tracking/tutorials/remote-server.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../_static/jquery.js"></script>
<script type="text/javascript" src="../_static/underscore.js"></script>
<script type="text/javascript" src="../_static/doctools.js"></script>
<script type="text/javascript" src="../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>

<body class="wy-body-for-nav" role="document">
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../index.html" class="wy-nav-top-logo"
      ><img src="../_static/MLflow-logo-final-black.png" alt="MLflow"
    /></a>
    <span class="version">2.9.3.dev0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../index.html" class="main-navigation-home"><img src="../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">What is MLflow?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting-started/index.html">Getting Started with MLflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../new-features/index.html">New Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../llms/index.html">LLMs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model-evaluation/index.html">Model Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deep-learning/index.html">Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../traditional-ml/index.html">Traditional ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deployment/index.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tracking.html">MLflow Tracking</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">System Metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#extra-dependencies">Extra Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#turn-on-off-system-metrics-logging">Turn on/off System Metrics Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#using-the-environment-variable-to-control-system-metrics-logging">Using the Environment Variable to Control System Metrics Logging</a></li>
<li class="toctree-l3"><a class="reference internal" href="#using-mlflow-enable-system-metrics-logging">Using <code class="docutils literal notranslate"><span class="pre">mlflow.enable_system_metrics_logging()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#enabling-system-metrics-logging-for-a-single-run">Enabling System Metrics Logging for a Single Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#types-of-system-metrics">Types of System Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#viewing-system-metrics-within-the-mlflow-ui">Viewing System Metrics within the MLflow UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="#customizing-system-metrics-logging">Customizing System Metrics Logging</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#customizing-logging-frequency">Customizing Logging Frequency</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../model-registry.html">MLflow Model Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recipes.html">MLflow Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../plugins.html">MLflow Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../auth/index.html">MLflow Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search-runs.html">Search Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../search-experiments.html">Search Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../rest-api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../docker.html">Official MLflow Docker Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../community-model-flavors.html">Community Model Flavors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials-and-examples/index.html">Tutorials and Examples</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>System Metrics</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/system-metrics/index.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="system-metrics">
<span id="id1"></span><h1>System Metrics<a class="headerlink" href="#system-metrics" title="Permalink to this headline"> </a></h1>
<p>MLflow allows users to log system metrics including CPU stats, GPU stats, memory usage, network traffic, and
disk usage during the execution of an MLflow run. In this guide, we will walk through how to manage system
metrics logging with MLflow.</p>
<div class="section" id="extra-dependencies">
<h2>Extra Dependencies<a class="headerlink" href="#extra-dependencies" title="Permalink to this headline"> </a></h2>
<p>To log system metrics in MLflow, please install <code class="docutils literal notranslate"><span class="pre">psutil</span></code>. We explicitly don’t include <code class="docutils literal notranslate"><span class="pre">psutil</span></code> in MLflow’s
dependencies because <code class="docutils literal notranslate"><span class="pre">psutil</span></code> wheel is not available for linux aarch64, and building from source fails intermittently.
To install <code class="docutils literal notranslate"><span class="pre">psutil</span></code>, run the following command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>psutil
</pre></div>
</div>
<p>If you want to catch GPU metrics, you also need to install <code class="docutils literal notranslate"><span class="pre">pynvml</span></code>:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>pynvml
</pre></div>
</div>
</div>
<div class="section" id="turn-on-off-system-metrics-logging">
<h2>Turn on/off System Metrics Logging<a class="headerlink" href="#turn-on-off-system-metrics-logging" title="Permalink to this headline"> </a></h2>
<p>There are three ways to enable or disable system metrics logging:</p>
<ul class="simple">
<li><p>Set the environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_LOG_SYSTEM_METRICS</span></code> to <cite>false</cite> to turn off system metrics logging,
or <cite>true</cite> to enable it for all MLflow runs.</p></li>
<li><p>Use <a class="reference internal" href="../python_api/mlflow.html#mlflow.enable_system_metrics_logging" title="mlflow.enable_system_metrics_logging"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.enable_system_metrics_logging()</span></code></a> to enable and
<a class="reference internal" href="../python_api/mlflow.html#mlflow.disable_system_metrics_logging" title="mlflow.disable_system_metrics_logging"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.disable_system_metrics_logging()</span></code></a> to disable system metrics logging for all MLflow runs.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">log_system_metrics</span></code> parameter in <a class="reference internal" href="../python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.start_run()</span></code></a> to control system metrics logging for
the current MLflow run, i.e., <code class="docutils literal notranslate"><span class="pre">mlflow.start_run(log_system_metrics=True)</span></code> will enable system metrics logging.</p></li>
</ul>
<div class="section" id="using-the-environment-variable-to-control-system-metrics-logging">
<h3>Using the Environment Variable to Control System Metrics Logging<a class="headerlink" href="#using-the-environment-variable-to-control-system-metrics-logging" title="Permalink to this headline"> </a></h3>
<p>You can set the environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_LOG_SYSTEM_METRICS</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> to turn on system metrics
logging globally, as shown below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING</span><span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>However, if you are executing the command above from within Ipython notebook (Jupyter, Databricks notebook,
Google Colab), the <code class="docutils literal notranslate"><span class="pre">export</span></code> command will not work due to the segregated state of the ephemeral shell.
Instead you can use the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;true&quot;</span>
</pre></div>
</div>
<p>After setting the environment variable, you will see that starting an MLflow run will automatically collect
and log the default system metrics. Try running the following code in your favorite environment and you
should see system metrics existing in the logged run data. Please note that you don’t necessarilty need to
start an MLflow server, as the metrics are logged locally.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mlflow</span><span class="o">.</span><span class="n">MlflowClient</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Your output should look like this:</p>
<div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;RunData: metrics={&#39;system/cpu_utilization_percentage&#39;: 12.4,</span>
<span class="go">&#39;system/disk_available_megabytes&#39;: 213744.0,</span>
<span class="go">&#39;system/disk_usage_megabytes&#39;: 28725.3,</span>
<span class="go">&#39;system/disk_usage_percentage&#39;: 11.8,</span>
<span class="go">&#39;system/network_receive_megabytes&#39;: 0.0,</span>
<span class="go">&#39;system/network_transmit_megabytes&#39;: 0.0,</span>
<span class="go">&#39;system/system_memory_usage_megabytes&#39;: 771.1,</span>
<span class="go">&#39;system/system_memory_usage_percentage&#39;: 5.7}, params={}, tags={&#39;mlflow.runName&#39;: &#39;nimble-auk-61&#39;,</span>
<span class="go">&#39;mlflow.source.name&#39;: &#39;/usr/local/lib/python3.10/dist-packages/colab_kernel_launcher.py&#39;,</span>
<span class="go">&#39;mlflow.source.type&#39;: &#39;LOCAL&#39;,</span>
<span class="go">&#39;mlflow.user&#39;: &#39;root&#39;}&gt;</span>
</pre></div>
</div>
<p>To disable system metrics logging, you can use either of the following commands:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span><span class="w"> </span><span class="nv">MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING</span><span class="o">=</span><span class="s2">&quot;false&quot;</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">del</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s2">&quot;MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>Rerunning the MLflow code above will not log system metrics.</p>
</div>
<div class="section" id="using-mlflow-enable-system-metrics-logging">
<h3>Using <code class="docutils literal notranslate"><span class="pre">mlflow.enable_system_metrics_logging()</span></code><a class="headerlink" href="#using-mlflow-enable-system-metrics-logging" title="Permalink to this headline"> </a></h3>
<p>We also provide a pair of APIs <code class="docutils literal notranslate"><span class="pre">mlflow.enable_system_metrics_logging()</span></code> and
<code class="docutils literal notranslate"><span class="pre">mlflow.disable_system_metrics_logging()</span></code> to turn on/off system metrics logging globally for
environments in which you do not have the appropriate access to set an environment variable.
Running the following code will have the same effect as setting
<code class="docutils literal notranslate"><span class="pre">MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING</span></code> environment variable to <code class="docutils literal notranslate"><span class="pre">true</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>

<span class="n">mlflow</span><span class="o">.</span><span class="n">enable_system_metrics_logging</span><span class="p">()</span>

<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mlflow</span><span class="o">.</span><span class="n">MlflowClient</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="enabling-system-metrics-logging-for-a-single-run">
<h3>Enabling System Metrics Logging for a Single Run<a class="headerlink" href="#enabling-system-metrics-logging-for-a-single-run" title="Permalink to this headline"> </a></h3>
<p>In addition to controlling system metrics logging globally, you can also control it for a
single run. To do so, set <code class="docutils literal notranslate"><span class="pre">log_system_metrics</span></code> as <code class="docutils literal notranslate"><span class="pre">True</span></code> or <code class="docutils literal notranslate"><span class="pre">False</span></code> accordingly in <a class="reference internal" href="../python_api/mlflow.html#mlflow.start_run" title="mlflow.start_run"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.start_run()</span></code></a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">(</span><span class="n">log_system_metrics</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">mlflow</span><span class="o">.</span><span class="n">MlflowClient</span><span class="p">()</span><span class="o">.</span><span class="n">get_run</span><span class="p">(</span><span class="n">run</span><span class="o">.</span><span class="n">info</span><span class="o">.</span><span class="n">run_id</span><span class="p">)</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>Please also note that using <code class="docutils literal notranslate"><span class="pre">log_system_metrics</span></code> will ignore the global status of system metrics logging.
In other words, the above code will log system metrics for the specific run even if you have disabled
system metrics logging by setting <code class="docutils literal notranslate"><span class="pre">MLFLOW_ENABLE_SYSTEM_METRICS_LOGGING</span></code> to <code class="docutils literal notranslate"><span class="pre">false</span></code> or calling
<code class="docutils literal notranslate"><span class="pre">mlflow.disable_system_metrics_logging()</span></code>.</p>
</div>
</div>
<div class="section" id="types-of-system-metrics">
<h2>Types of System Metrics<a class="headerlink" href="#types-of-system-metrics" title="Permalink to this headline"> </a></h2>
<p>By default, MLflow logs the following system metrics:</p>
<ul class="simple">
<li><p>cpu_utilization_percentage</p></li>
<li><p>system_memory_usage_megabytes</p></li>
<li><p>system_memory_usage_percentage</p></li>
<li><p>gpu_utilization_percentage</p></li>
<li><p>gpu_memory_usage_megabytes</p></li>
<li><p>gpu_memory_usage_percentage</p></li>
<li><p>network_receive_megabytes</p></li>
<li><p>network_transmit_megabytes</p></li>
<li><p>disk_usage_megabytes</p></li>
<li><p>disk_available_megabytes</p></li>
</ul>
<p>GPU metrics are only logged when a GPU is available and <code class="docutils literal notranslate"><span class="pre">pynvml</span></code> is installed.</p>
<p>Every system metric has a prefix <code class="docutils literal notranslate"><span class="pre">system/</span></code> when logged for grouping purpose. So the actual metric name
that is logged will have <code class="docutils literal notranslate"><span class="pre">system/</span></code> prepended, e.g, <code class="docutils literal notranslate"><span class="pre">system/cpu_utilization_percentage</span></code>,
<code class="docutils literal notranslate"><span class="pre">system/system_memory_usage_megabytes</span></code>, etc.</p>
</div>
<div class="section" id="viewing-system-metrics-within-the-mlflow-ui">
<h2>Viewing System Metrics within the MLflow UI<a class="headerlink" href="#viewing-system-metrics-within-the-mlflow-ui" title="Permalink to this headline"> </a></h2>
<p>System metrics are available within the MLflow UI under the metrics section. In order to view
them, let’s start our MLflow UI server, and log some system metrics to it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mlflow<span class="w"> </span>ui
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlflow</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">mlflow</span><span class="o">.</span><span class="n">set_tracking_uri</span><span class="p">(</span><span class="s2">&quot;http://127.0.0.1:5000&quot;</span><span class="p">)</span>
<span class="k">with</span> <span class="n">mlflow</span><span class="o">.</span><span class="n">start_run</span><span class="p">()</span> <span class="k">as</span> <span class="n">run</span><span class="p">:</span>
    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span>
</pre></div>
</div>
<p>Navigate to <code class="docutils literal notranslate"><span class="pre">http://127.0.0.1:5000</span></code> in your browser and open your run. You should see system metrics
under the metrics section, similar as shown by the screenshot below:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/system-metrics-view.png"><img alt="system metrics on MLflow UI" src="../_images/system-metrics-view.png" style="width: 800px;" /></a>
</div>
</div>
<div class="section" id="customizing-system-metrics-logging">
<h2>Customizing System Metrics Logging<a class="headerlink" href="#customizing-system-metrics-logging" title="Permalink to this headline"> </a></h2>
<div class="section" id="customizing-logging-frequency">
<h3>Customizing Logging Frequency<a class="headerlink" href="#customizing-logging-frequency" title="Permalink to this headline"> </a></h3>
<p>By default, system metrics are sampled every 10 seconds and are directly logged after sampling. You can customize
the sampling frequency by setting environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_SYSTEM_METRICS_SAMPLING_INTERVAL</span></code> to an integer
representing the logging frequency in seconds or by using <a class="reference internal" href="../python_api/mlflow.html#mlflow.set_system_metrics_sampling_interval" title="mlflow.set_system_metrics_sampling_interval"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_system_metrics_sampling_interval()</span></code></a>
to set the interval, as shown below. In addition to setting the frequency of system metrics logging, you can
also customize the number of samples to aggregate. You can also customize the number of samples to aggregate
before logging by setting environment variable <code class="docutils literal notranslate"><span class="pre">MLFLOW_SYSTEM_METRICS_SAMPLES_BEFORE_LOGGING</span></code> or using
<a class="reference internal" href="../python_api/mlflow.html#mlflow.set_system_metrics_samples_before_logging" title="mlflow.set_system_metrics_samples_before_logging"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.set_system_metrics_samples_before_logging()</span></code></a>. The actual logging time window is the product of
<code class="docutils literal notranslate"><span class="pre">MLFLOW_SYSTEM_METRICS_SAMPLING_INTERVAL</span></code> and <code class="docutils literal notranslate"><span class="pre">MLFLOW_SYSTEM_METRICS_SAMPLES_BEFORE_LOGGING</span></code>. For example, if
you set sample interval to 2 seconds and samples before logging to 3, then system metrics will be collected
every 2 seconds, then after 3 samples are collected (2 * 3 = 6s), we aggregate the metrics and log to MLflow server.
The aggregation logic depends on different system metrics. For example, for <code class="docutils literal notranslate"><span class="pre">cpu_utilization_percentage</span></code> it’s
the average of the samples.</p>
<p>You will see <code class="docutils literal notranslate"><span class="pre">system/cpu_utilization_percentage</span></code> logged a few times.</p>
</div>
</div>
</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../tracking/tutorials/remote-server.html" class="btn btn-neutral" title="Remote Experiment Tracking with MLflow Tracking Server" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="../projects.html" class="btn btn-neutral" title="MLflow Projects" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../',
      VERSION:'2.9.3.dev0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../_static/clippy.svg";</script>
  <script type="text/javascript" src="../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>