# Deploy MLflow Model as a Local Inference Server

MLflow allows you to deploy your model locally using just a single command. This approach is ideal for lightweight applications or for testing your model locally before moving it to a staging or production environment.

If you are new to MLflow model deployment, please read the guide on [MLflow Deployment](/mlflow-website/docs/latest/ml/deployment.md) first to understand the basic concepts of MLflow models and deployments.

## Deploying Inference Server[​](#deploying-inference-server "Direct link to Deploying Inference Server")

Before deploying, you must have an MLflow Model. If you don't have one, you can create a sample scikit-learn model by following the [MLflow Tracking Quickstart](/mlflow-website/docs/latest/ml/getting-started.md). Remember to note down the model URI, such as `models:/<model_id>` (or `models:/<model_name>/<model_version>` if you registered the model in the [MLflow Model Registry](/mlflow-website/docs/latest/ml/model-registry.md)).

Once you have the model ready, deploying to a local server is straightforward. Use the [mlflow models serve](/mlflow-website/docs/latest/api_reference/cli.html#mlflow-models-serve) command for a one-step deployment. This command starts a local server that listens on the specified port and serves your model. Refer to the [CLI reference](/mlflow-website/docs/latest/api_reference/cli.html#mlflow-models-serve) for available options.

bash

```
mlflow models serve -m runs:/<run_id>/model -p 5000
```

You can then send a test request to the server as follows:

bash

```
curl http://127.0.0.1:5000/invocations -H "Content-Type:application/json"  --data '{"inputs": [[1, 2], [3, 4], [5, 6]]}'
```

Several command line options are available to customize the server's behavior. For instance, the `--env-manager` option allows you to choose a specific environment manager, like Anaconda, to create the virtual environment. The `mlflow models` module also provides additional useful commands, such as building a Docker image or generating a Dockerfile. For comprehensive details, please refer to the [MLflow CLI Reference](/mlflow-website/docs/latest/api_reference/cli.html#mlflow-models).

## Inference Server Specification[​](#local-inference-server-spec "Direct link to Inference Server Specification")

### Endpoints[​](#endpoints "Direct link to Endpoints")

The inference server provides 4 endpoints:

* `/invocations`: An inference endpoint that accepts POST requests with input data and returns predictions.

* `/ping`: Used for health checks.

* `/health`: Same as /ping

* `/version`: Returns the MLflow version.

### Accepted Input Formats[​](#accepted-input-formats "Direct link to Accepted Input Formats")

The `/invocations` endpoint accepts CSV or JSON inputs. The input format must be specified in the `Content-Type` header as either `application/json` or `application/csv`.

#### CSV Input[​](#csv-input "Direct link to CSV Input")

CSV input must be a valid pandas.DataFrame CSV representation. For example:

`curl http://127.0.0.1:5000/invocations -H 'Content-Type: application/csv' --data '1,2,3,4'`

#### JSON Input[​](#json-input "Direct link to JSON Input")

You can either pass a flat dictionary corresponding to the desired model payload or wrap the payload in a dict with a dict key that specifies your payload format.

##### Wrapped Payload Dict[​](#wrapped-payload-dict "Direct link to Wrapped Payload Dict")

If your model format is not supported above or you want to avoid transforming your input data to the required payload format, you can leverage the dict payload structures below.

| Field               | Description                                                                                                                                                                              | Example                                                              |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------- |
| `dataframe_split`   | Pandas DataFrames in the `split` orientation.                                                                                                                                            | text```
{"dataframe_split": pandas_df.to_dict(orient="split")}
```     |
| `dataframe_records` | Pandas DataFrame in the records orientation. **We do not recommend using this format because it is not guaranteed to preserve column ordering.**                                         | text```
{"dataframe_records": pandas_df.to_dict(orient="records")}
``` |
| `instances`         | Tensor input formatted as described in [TF Serving's API docs](https://www.tensorflow.org/tfx/serving/api_rest#request_format_2) where the provided inputs will be cast to Numpy arrays. | text```
{"instances": [1.0, 2.0, 5.0]}
```                             |
| `inputs`            | Same as `instances` but with a different key.                                                                                                                                            | text```
{"inputs": [["Cheese"], ["and", "Crackers"]]}
```              |

Example

python

```
# Prerequisite: serve a custom pyfunc OpenAI model (not mlflow.openai) on localhost:5678
#   that defines inputs in the below format and params of `temperature` and `max_tokens`

import json
import requests

payload = json.dumps(
    {
        "inputs": {"messages": [{"role": "user", "content": "Tell a joke!"}]},
        "params": {
            "temperature": 0.5,
            "max_tokens": 20,
        },
    }
)
response = requests.post(
    url=f"http://localhost:5678/invocations",
    data=payload,
    headers={"Content-Type": "application/json"},
)
print(response.json())
```

The JSON input can also include an optional `params` field for passing additional parameters. Valid parameter types are `Union[DataType, List[DataType], None]`, where DataType is [`MLflow data types`](/mlflow-website/docs/latest/api_reference/python_api/mlflow.types.html#mlflow.types.DataType). To pass parameters, a valid [Model Signature](/mlflow-website/docs/latest/ml/model/signatures.md) with `params` must be defined.

bash

```
curl http://127.0.0.1:5000/invocations -H 'Content-Type: application/json' -d '{
    "inputs": {"question": ["What color is it?"],
                "context": ["Some people said it was green but I know that it is pink."]},
    "params": {"max_answer_len": 10}
}'
```

note

Since JSON discards type information, MLflow will cast the JSON input to the input type specified in the model's schema if available. If your model is sensitive to input types, it is recommended that a schema is provided for the model to ensure that type mismatch errors do not occur at inference time. In particular, Deep Learning models are typically strict about input types and will need a model schema in order for the model to score correctly. For complex data types, see [Encoding complex data](#encoding-complex-data) below.

##### Raw Payload Dict[​](#raw-payload-dict "Direct link to Raw Payload Dict")

If your payload is in a format that your mlflow served model will accept and it's in the supported models below, you can pass a raw payload dict.

| Supported Request Format | Description                                                                                | Example                                                                                                   |
| ------------------------ | ------------------------------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------- |
| OpenAI Chat              | [OpenAI chat request payload](https://platform.openai.com/docs/api-reference/chat/create)† | text```
{
    "messages": [{"role": "user", "content": "Tell a joke!"}],  # noqa
    "temperature": 0.0,
}
``` |

† Note that the `model` argument **should not** be included when using the OpenAI APIs, due to its configuration being set by the MLflow model instance. All other parameters can be freely used, provided that they are defined within the `params` argument within the logged model signature.

Example

python

```
# Prerequisite: serve a Pyfunc model accepts OpenAI-compatible chat requests on localhost:5678 that defines
#   `temperature` and `max_tokens` as parameters within the logged model signature

import json
import requests

payload = json.dumps(
    {
        "messages": [{"role": "user", "content": "Tell a joke!"}],
        "temperature": 0.5,
        "max_tokens": 20,
    }
)
requests.post(
    url=f"http://localhost:5678/invocations",
    data=payload,
    headers={"Content-Type": "application/json"},
)
print(requests.json())
```

#### Encoding complex data[​](#encoding-complex-data "Direct link to Encoding complex data")

Complex data types, such as dates or binary, do not have a native JSON representation. If you include a model signature, MLflow can automatically decode supported data types from JSON. The following data type conversions are supported:

* binary: data is expected to be base64 encoded, MLflow will automatically base64 decode.

* datetime: data is expected to be encoded as a string according to [ISO 8601 specification](https://www.iso.org/iso-8601-date-and-time-format.html). MLflow will parse this into the appropriate datetime representation on the given platform.

Example requests:

bash

```
# record-oriented DataFrame input with binary column "b"
curl http://127.0.0.1:5000/invocations -H 'Content-Type: application/json' -d '[
    {"a": 0, "b": "dGVzdCBiaW5hcnkgZGF0YSAw"},
    {"a": 1, "b": "dGVzdCBiaW5hcnkgZGF0YSAx"},
    {"a": 2, "b": "dGVzdCBiaW5hcnkgZGF0YSAy"}
]'

# record-oriented DataFrame input with datetime column "b"
curl http://127.0.0.1:5000/invocations -H 'Content-Type: application/json' -d '[
    {"a": 0, "b": "2020-01-01T00:00:00Z"},
    {"a": 1, "b": "2020-02-01T12:34:56Z"},
    {"a": 2, "b": "2021-03-01T00:00:00Z"}
]'
```

## Serving Frameworks[​](#serving-frameworks "Direct link to Serving Frameworks")

By default, MLflow uses [FastAPI](https://fastapi.tiangolo.com/), a modern ASGI web application framework for Python, to serve the inference endpoint. FastAPI handles requests asynchronously and is recognized as one of the fastest Python frameworks. This production-ready framework works well for most use cases. Additionally, MLflow also integrates with [MLServer](https://mlserver.readthedocs.io/en/latest) as an alternative serving engine. MLServer achieves higher performance and scalability by leveraging asynchronous request/response paradigm and workload offloading. Also MLServer is used as the core Python inference server in Kubernetes-native frameworks like [Seldon Core](https://docs.seldon.io/projects/seldon-core/en/latest) and [KServe (formerly known as KFServing)](https://kserve.github.io/website), hence which provides advanced features such as canary deployment and auto scaling out of the box.

|                 | ![](data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ1MS41MjMxNm1tIgogICBoZWlnaHQ9IjE2Mi44MjE5OW1tIgogICB2aWV3Qm94PSIwIDAgNDUxLjUyMzE2IDE2Mi44MjE5OCIKICAgdmVyc2lvbj0iMS4xIgogICBpZD0ic3ZnOCIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiCiAgIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiCiAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczIiIC8+CiAgPG1ldGFkYXRhCiAgICAgaWQ9Im1ldGFkYXRhNSI+CiAgICA8cmRmOlJERj4KICAgICAgPGNjOldvcmsKICAgICAgICAgcmRmOmFib3V0PSIiPgogICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2Uvc3ZnK3htbDwvZGM6Zm9ybWF0PgogICAgICAgIDxkYzp0eXBlCiAgICAgICAgICAgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIgLz4KICAgICAgPC9jYzpXb3JrPgogICAgPC9yZGY6UkRGPgogIDwvbWV0YWRhdGE+CiAgPGcKICAgICBpZD0iZzIxMDYiCiAgICAgdHJhbnNmb3JtPSJtYXRyaXgoMC45NjU2NDI2NCwwLDAsMC45NjI1MTk4NywtODQ2LjgyOTksMjQ0LjI5MTE2KSI+CiAgICA8Y2lyY2xlCiAgICAgICBzdHlsZT0iZmlsbDojMDA5Njg4O2ZpbGwtb3BhY2l0eTowLjk4MDM5MjtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC4xNDE0MDQ7c3RvcC1jb2xvcjojMDAwMDAwIgogICAgICAgaWQ9InBhdGg4NzUtNS05LTctMy0yLTMtOS05LTgtMC0wLTUtODctNyIKICAgICAgIGN4PSI5NjQuNTYxNjUiCiAgICAgICBjeT0iLTE2OS4yMjI2NiIKICAgICAgIHI9IjMzLjIzNDE5MiIgLz4KICAgIDxwYXRoCiAgICAgICBpZD0icmVjdDEyNDktNi0zLTQtNC0zLTYtNi0xLTIiCiAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eTowLjk4MDM5MjtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6MC4xNDY4OTU7c3RvcC1jb2xvcjojMDAwMDAwIgogICAgICAgZD0ibSA5NjIuMjY4NSwtMTg3LjQwODM3IC02LjY0NDAzLDE0LjgwMzc1IC0zLjAzNTk5LDYuNzYzOTMgLTYuNjQ0NTYsMTQuODAzNzUgMzAuNTkxNDIsLTIxLjU2NzY4IGggLTE0LjM1MzEyIGwgMjAuOTk3MTUsLTE0LjgwMzc1IHoiIC8+CiAgPC9nPgogIDxwYXRoCiAgICAgc3R5bGU9ImZvbnQtc2l6ZTo3OS43MTUxcHg7bGluZS1oZWlnaHQ6MS4yNTtmb250LWZhbWlseTpVYnVudHU7LWlua3NjYXBlLWZvbnQtc3BlY2lmaWNhdGlvbjpVYnVudHU7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7ZmlsbDojMDA5Njg4O3N0cm9rZS13aWR0aDoxLjk5Mjg4IgogICAgIGQ9Ik0gMTQyLjAyMjYxLDEwOC44MzMwMyBWIDUzLjU5MDQ2NSBoIDMzLjMyMDkyIHYgNi42MTYzNTMgaCAtMjUuNTg4NTUgdiAxNi42NjA0NTcgaCAyMi43MTg4MSB2IDYuNTM2NjM4IGggLTIyLjcxODgxIHYgMjUuNDI5MTE3IHogbSA1Mi4yOTI5NywtNS4zNDA5MSBxIDIuNjMwNiwwIDQuNjIzNDgsLTAuMDc5NyAyLjA3MjU5LC0wLjE1OTQzIDMuNDI3NzQsLTAuNDc4MjkgViA5MC41NzgyNzMgcSAtMC43OTcxNSwtMC4zOTg1NzYgLTIuNjMwNTksLTAuNjM3NzIxIC0xLjc1Mzc0LC0wLjMxODg2IC00LjMwNDYyLC0wLjMxODg2IC0xLjY3NDAyLDAgLTMuNTg3MTgsMC4yMzkxNDUgLTEuODMzNDUsMC4yMzkxNDUgLTMuNDI3NzUsMS4wMzYyOTYgLTEuNTE0NTksMC43MTc0MzYgLTIuNTUwODgsMi4wNzI1OTMgLTEuMDM2MywxLjI3NTQ0MiAtMS4wMzYzLDMuNDI3NzQ5IDAsMy45ODU3NTUgMi41NTA4OSw1LjU4MDA1NSAyLjU1MDg4LDEuNTE0NTkgNi45MzUyMSwxLjUxNDU5IHogbSAtMC42Mzc3MiwtMzcuMTQ3MjM5IHEgNC40NjQwNCwwIDcuNDkzMjIsMS4xOTU3MjcgMy4xMDg4OSwxLjExNjAxMSA0Ljk0MjMzLDMuMjY4MzE5IDEuOTEzMTcsMi4wNzI1OTMgMi43MTAzMiw1LjAyMjA1MiAwLjc5NzE1LDIuODY5NzQzIDAuNzk3MTUsNi4zNzcyMDggViAxMDguMTE1NiBxIC0wLjk1NjU4LDAuMTU5NDMgLTIuNzEwMzEsMC40NzgyOSAtMS42NzQwMiwwLjIzOTE0IC0zLjgyNjMzLDAuNDc4MjkgLTIuMTUyMzEsMC4yMzkxNCAtNC43MDMxOSwwLjM5ODU3IC0yLjQ3MTE3LDAuMjM5MTUgLTQuOTQyMzQsMC4yMzkxNSAtMy41MDc0NiwwIC02LjQ1NjkyLC0wLjcxNzQ0IC0yLjk0OTQ2LC0wLjcxNzQzIC01LjEwMTc3LC0yLjIzMjAyIC0yLjE1MjMsLTEuNTk0MyAtMy4zNDgwMywtNC4xNDUxOSAtMS4xOTU3MywtMi41NTA4OCAtMS4xOTU3MywtNi4xMzgwNiAwLC0zLjQyNzc0OSAxLjM1NTE2LC01Ljg5ODkxNyAxLjQzNDg3LC0yLjQ3MTE2OCAzLjgyNjMyLC0zLjk4NTc1NSAyLjM5MTQ2LC0xLjUxNDU4NyA1LjU4MDA2LC0yLjIzMjAyMyAzLjE4ODYxLC0wLjcxNzQzNiA2LjY5NjA3LC0wLjcxNzQzNiAxLjExNjAxLDAgMi4zMTE3NCwwLjE1OTQzIDEuMTk1NzIsMC4wNzk3MiAyLjIzMjAyLDAuMzE4ODYgMS4xMTYwMSwwLjE1OTQzMSAxLjkxMzE2LDAuMzE4ODYxIDAuNzk3MTUsMC4xNTk0MyAxLjExNjAxLDAuMjM5MTQ1IHYgLTIuMDcyNTkzIHEgMCwtMS44MzM0NDcgLTAuMzk4NTcsLTMuNTg3MTc5IC0wLjM5ODU4LC0xLjgzMzQ0OCAtMS40MzQ4NywtMy4xODg2MDQgLTEuMDM2MywtMS40MzQ4NzIgLTIuODY5NzUsLTIuMjMyMDIzIC0xLjc1MzczLC0wLjg3Njg2NiAtNC42MjM0NywtMC44NzY4NjYgLTMuNjY2OSwwIC02LjQ1NjkzLDAuNTU4MDA1IC0yLjcxMDMxLDAuNDc4MjkxIC00LjA2NTQ3LDEuMDM2Mjk3IGwgLTAuODc2ODYsLTYuMTM4MDYzIHEgMS40MzQ4NywtMC42Mzc3MjEgNC43ODI5LC0xLjE5NTcyNyAzLjM0ODA0LC0wLjYzNzcyMSA3LjI1NDA4LC0wLjYzNzcyMSB6IG0gMzcuODY0NjIsMzcuMTQ3MjM5IHEgNC41NDM3NywwIDYuNjk2MDcsLTEuMTk1NzMgMi4yMzIwMywtMS4xOTU3MiAyLjIzMjAzLC0zLjgyNjMyMiAwLC0yLjcxMDMxNCAtMi4xNTIzMSwtNC4zMDQ2MTYgLTIuMTUyMzEsLTEuNTk0MzAyIC03LjA5NDY1LC0zLjU4NzE3OSAtMi4zOTE0NSwtMC45NTY1ODEgLTQuNjIzNDcsLTEuOTEzMTYzIC0yLjE1MjMxLC0xLjAzNjI5NiAtMy43NDY2MSwtMi4zOTE0NTMgLTEuNTk0MywtMS4zNTUxNTcgLTIuNTUwODgsLTMuMjY4MzE5IC0wLjk1NjU5LC0xLjkxMzE2MyAtMC45NTY1OSwtNC43MDMxOTEgMCwtNS41MDAzNDIgNC4wNjU0NywtOC42ODg5NDYgNC4wNjU0NywtMy4yNjgzMiAxMS4wODA0LC0zLjI2ODMyIDEuNzUzNzQsMCAzLjUwNzQ3LDAuMjM5MTQ2IDEuNzUzNzMsMC4xNTk0MyAzLjI2ODMyLDAuNDc4MjkgMS41MTQ1OCwwLjIzOTE0NiAyLjYzMDYsMC41NTgwMDYgMS4xOTU3MiwwLjMxODg2IDEuODMzNDQsMC41NTgwMDYgbCAtMS4zNTUxNSw2LjM3NzIwOCBxIC0xLjE5NTczLC0wLjYzNzcyMSAtMy43NDY2MSwtMS4yNzU0NDIgLTIuNTUwODksLTAuNzE3NDM2IC02LjEzODA3LC0wLjcxNzQzNiAtMy4xMDg4OSwwIC01LjQyMDYyLDEuMjc1NDQyIC0yLjMxMTc0LDEuMTk1NzI3IC0yLjMxMTc0LDMuODI2MzI1IDAsMS4zNTUxNTcgMC40NzgyOSwyLjM5MTQ1MyAwLjU1ODAxLDEuMDM2Mjk2IDEuNTk0MywxLjkxMzE2MyAxLjExNjAxLDAuNzk3MTUxIDIuNzEwMzEsMS41MTQ1ODcgMS41OTQzMSwwLjcxNzQzNiAzLjgyNjMzLDEuNTE0NTg3IDIuOTQ5NDYsMS4xMTYwMTEgNS4yNjEyLDIuMjMyMDIyIDIuMzExNzMsMS4wMzYyOTcgMy45MDYwNCwyLjQ3MTE2OSAxLjY3NDAxLDEuNDM0ODcxIDIuNTUwODgsMy41MDc0NjQgMC44NzY4NywxLjk5Mjg3OCAwLjg3Njg3LDQuOTQyMzM3IDAsNS43Mzk0ODIgLTQuMzA0NjIsOC42ODg5NDIgLTQuMjI0OSwyLjk0OTQ2IC0xMi4xMTY3LDIuOTQ5NDYgLTUuNTAwMzQsMCAtOC42MDkyMywtMC45NTY1OCAtMy4xMDg4OSwtMC44NzY4NiAtNC4yMjQ5LC0xLjM1NTE1IGwgMS4zNTUxNiwtNi4zNzcyMSBxIDEuMjc1NDQsMC40NzgyOSA0LjA2NTQ3LDEuNDM0ODcgMi43OTAwMywwLjk1NjU4IDcuNDEzNSwwLjk1NjU4IHogbSAzMi44NDI1NiwtMzYuMTEwOTQyIGggMTUuNzAzODcgdiA2LjIxNzc3OCBoIC0xNS43MDM4NyB2IDE5LjEzMTYyNSBxIDAsMy4xMDg4ODkgMC40NzgyOSw1LjE4MTQ4MSAwLjQ3ODI5LDEuOTkyODc4IDEuNDM0ODcsMy4xODg2MDggMC45NTY1OCwxLjExNjAxIDIuMzkxNDUsMS41OTQzIDEuNDM0ODcsMC40NzgyOSAzLjM0ODA0LDAuNDc4MjkgMy4zNDgwMywwIDUuMzQwOTEsLTAuNzE3NDQgMi4wNzI1OSwtMC43OTcxNSAyLjg2OTc0LC0xLjExNjAxIGwgMS40MzQ4Nyw2LjEzODA2IHEgLTEuMTE2MDEsMC41NTgwMSAtMy45MDYwNCwxLjM1NTE2IC0yLjc5MDAzLDAuODc2ODcgLTYuMzc3MjEsMC44NzY4NyAtNC4yMjQ5LDAgLTcuMDE0OTIsLTEuMDM2MyAtMi43MTAzMiwtMS4xMTYwMSAtNC4zODQzNCwtMy4yNjgzMiAtMS42NzQwMSwtMi4xNTIzMSAtMi4zOTE0NSwtNS4yNjEyIC0wLjYzNzcyLC0zLjE4ODU5OSAtMC42Mzc3MiwtNy4zMzM3ODQgViA1NS44MjI0ODggbCA3LjQxMzUxLC0xLjI3NTQ0MiB6IG0gNjIuNDk2NTIsNDEuNDUxODUyIHEgLTEuMzU1MTYsLTMuNTg3MTggLTIuNTUwODgsLTcuMDE0OTMgLTEuMTk1NzMsLTMuNTA3NDYyIC0yLjQ3MTE3LC03LjA5NDY0MiBoIC0yNS4wMzA1NCBsIC01LjAyMjA1LDE0LjEwOTU3MiBoIC04LjA1MTIzIHEgMy4xODg2MSwtOC43Njg2NiA1Ljk3ODYzLC0xNi4xODIxNjUgMi43OTAwMywtNy40OTMyMTkgNS40MjA2MywtMTQuMTg5Mjg4IDIuNzEwMzEsLTYuNjk2MDY5IDUuMzQwOTEsLTEyLjc1NDQxNiAyLjYzMDYsLTYuMTM4MDYzIDUuNTAwMzQsLTEyLjExNjY5NiBoIDcuMDk0NjUgcSAyLjg2OTc0LDUuOTc4NjMzIDUuNTAwMzQsMTIuMTE2Njk2IDIuNjMwNiw2LjA1ODM0NyA1LjI2MTIsMTIuNzU0NDE2IDIuNzEwMzEsNi42OTYwNjkgNS41MDAzNCwxNC4xODkyODggMi43OTAwMyw3LjQxMzUwNSA1Ljk3ODYzLDE2LjE4MjE2NSB6IG0gLTcuMjU0MDcsLTIwLjQ4Njc4IHEgLTIuNTUwODksLTYuOTM1MjE0IC01LjEwMTc3LC0xMy4zOTIxMzcgLTIuNDcxMTcsLTYuNTM2NjM5IC01LjE4MTQ4LC0xMi41MTUyNzIgLTIuNzkwMDMsNS45Nzg2MzMgLTUuMzQwOTEsMTIuNTE1MjcyIC0yLjQ3MTE3LDYuNDU2OTIzIC00Ljk0MjM0LDEzLjM5MjEzNyB6IG0gMzcuODY0NTMsLTM1LjMxMzc5MSBxIDExLjYzODQsMCAxNy44NTYxOCw0LjQ2NDA0NiA2LjI5NzQ5LDQuMzg0MzMxIDYuMjk3NDksMTMuMTUyOTkyIDAsNC43ODI5MDYgLTEuNzUzNzMsOC4yMTA2NTYgLTEuNjc0MDIsMy4zNDgwMzQgLTQuOTQyMzQsNS41MDAzNDIgLTMuMTg4NiwyLjA3MjU5MiAtNy44MTIwOCwzLjAyOTE3NCAtNC42MjM0NywwLjk1NjU4MSAtMTAuNDQyNjgsMC45NTY1ODEgaCAtNi4xMzgwNiB2IDIwLjQ4Njc4IGggLTcuNzMyMzYgViA1NC4zODc2MTYgcSAzLjI2ODMyLC0wLjc5NzE1MSA3LjI1NDA3LC0xLjAzNjI5NiA0LjA2NTQ3LC0wLjMxODg2MSA3LjQxMzUxLC0wLjMxODg2MSB6IG0gMC42Mzc3Miw2Ljc3NTc4NCBxIC00Ljk0MjM0LDAgLTcuNTcyOTQsMC4yMzkxNDUgdiAyMS42ODI1MDggaCA1LjgxOTIgcSAzLjk4NTc2LDAgNy4xNzQzNiwtMC40NzgyOSAzLjE4ODYxLC0wLjU1ODAwNiA1LjM0MDkyLC0xLjc1MzczMyAyLjIzMjAyLC0xLjI3NTQ0MSAzLjQyNzc0LC0zLjQyNzc0OSAxLjE5NTczLC0yLjE1MjMwOCAxLjE5NTczLC01LjUwMDM0MiAwLC0zLjE4ODYwNCAtMS4yNzU0NCwtNS4yNjExOTcgLTEuMTk1NzMsLTIuMDcyNTkzIC0zLjM0ODAzLC0zLjI2ODMxOSAtMi4wNzI2LC0xLjI3NTQ0MiAtNC44NjI2MywtMS43NTM3MzIgLTIuNzkwMDIsLTAuNDc4MjkxIC01Ljg5ODkxLC0wLjQ3ODI5MSB6IG0gMzMuMTYxNDYsLTYuMjE3Nzc4IGggNy43MzIzNyB2IDU1LjI0MjU2NSBoIC03LjczMjM3IHoiCiAgICAgaWQ9InRleHQ5NzktMSIKICAgICBhcmlhLWxhYmVsPSJGYXN0QVBJIiAvPgogIDxyZWN0CiAgICAgeT0iNy4xMDU0Mjc0ZS0xNSIKICAgICB4PSIwIgogICAgIGhlaWdodD0iMTYyLjgyMTk5IgogICAgIHdpZHRoPSI0NTEuNTIzMTYiCiAgICAgaWQ9InJlY3Q4MjQiCiAgICAgc3R5bGU9Im9wYWNpdHk6MC45ODAwMDAwNDtmaWxsOm5vbmU7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMzExMDM2NTYiIC8+CiAgPGcKICAgICBpZD0ibGF5ZXIxIgogICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDgzLjEzMTExNCwtNi4wNzkxMTQ4KSIgLz4KPC9zdmc+Cg==) | ![](/mlflow-website/docs/latest/assets/images/seldon-mlserver-logo-1c6ba2f4aecdd4434e37221e5f4ceba4.png)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **Use Case**    | Standard usecases including local testing.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | High-scale production environment.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| **Set Up**      | FastAPI is installed by default with MLflow.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | Needs to be installed separately.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| **Performance** | FastAPI natively supports asynchronous request handling, making it well-suited for I/O-bound tasks including ML workloads. Refer to [FastAPI Benchmark](https://fastapi.tiangolo.com/benchmarks/) for the benchmarks and comparisons with other Python frameworks.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | Designed for high-performance ML workloads, often delivering better throughput and efficiency. MLServer support asynchronous request/response paradigm, by offloading ML inference workload to a separate worker pool (processes), so that the server can continue to accept new requests while the inference is being processed. Please refer to the [MLServer Parallel Inference](https://mlserver.readthedocs.io/en/latest/user-guide/parallel-inference.html) for more details on how they achieve this. Additionally, MLServer supports [Adaptive Bacthing](https://mlserver.readthedocs.io/en/latest/user-guide/adaptive-batching.html) that transparently batch requests together to improve throughput and efficiency. |
| **Scalability** | While FastAPI works well in a distributed environment in general, MLflow simply runs it with `uvicorn` and does not support horizontal scaling out of the box.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | Additionally to the support for parallel inference as mentioned above, MLServer is used as the core inference server in Kubernetes-native frameworks such as [Seldon Core](https://docs.seldon.io/projects/seldon-core/en/latest/) and [KServe](https://kserve.github.io/website/) (formerly known as KFServing). By deploying [MLflow models to Kubernetes with MLServer](/mlflow-website/docs/latest/ml/deployment/deploy-model-to-kubernetes.md), you can leverage the advanced features of these frameworks such as autoscaling to achieve high scalability.                                                                                                                                                               |

MLServer exposes the same scoring API through the `/invocations` endpoint. To deploy with MLServer, first install additional dependencies with `pip install mlflow[extras]`, then execute the deployment command with the `--enable-mlserver` option. For example,

bash

```
mlflow models serve -m runs:/<run_id>/model -p 5000 --enable-mlserver
```

To read more about the integration between MLflow and MLServer, please check the [end-to-end example](https://mlserver.readthedocs.io/en/latest/examples/mlflow/README.html) in the MLServer documentation. You can also find guides to deploy MLflow models to a Kubernetes cluster using MLServer in [Deploying a model to Kubernetes](/mlflow-website/docs/latest/ml/deployment/deploy-model-to-kubernetes.md).

## Running Batch Inference[​](#running-batch-inference "Direct link to Running Batch Inference")

Instead of running an online inference endpoint, you can execute a single batch inference job on local files using the [mlflow models predict](/mlflow-website/docs/latest/api_reference/cli.html#mlflow-models-predict) command. The following command runs the model prediction on `input.csv` and outputs the results to `output.csv`.

* Bash
* Python

bash

```
mlflow models predict -m models:/<model_id> -i input.csv -o output.csv
```

python

```
import mlflow

model = mlflow.pyfunc.load_model("models:/<model_id>")
predictions = model.predict(pd.read_csv("input.csv"))
predictions.to_csv("output.csv")
```

## Troubleshooting[​](#troubleshooting "Direct link to Troubleshooting")
