<!doctype html><html lang=en dir=ltr class="docs-wrapper plugin-docs plugin-id-classic-ml docs-version-current docs-doc-page docs-doc-id-deep-learning/transformers/tutorials/translation/component-translation-ipynb" data-has-hydrated=false><head><meta charset=UTF-8><meta name=generator content="Docusaurus v3.9.2"><title data-rh=true>Introduction to Translation with Transformers and MLflow | MLflow</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"/><meta data-rh=true name=twitter:card content=summary_large_image /><meta data-rh=true property=og:url content=https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation/ /><meta data-rh=true property=og:locale content=en /><meta data-rh=true name=docusaurus_locale content=en /><meta data-rh=true name=docsearch:language content=en /><meta data-rh=true name=docusaurus_version content=current /><meta data-rh=true name=docusaurus_tag content=docs-classic-ml-current /><meta data-rh=true name=docsearch:version content=current /><meta data-rh=true name=docsearch:docusaurus_tag content=docs-classic-ml-current /><meta data-rh=true property=og:title content="Introduction to Translation with Transformers and MLflow | MLflow"/><meta data-rh=true name=description content="Download this notebook"/><meta data-rh=true property=og:description content="Download this notebook"/><link data-rh=true rel=icon href=/mlflow-website/docs/latest/images/favicon.ico /><link data-rh=true rel=canonical href=https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation/ /><link data-rh=true rel=alternate href=https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation/ hreflang=en /><link data-rh=true rel=alternate href=https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation/ hreflang=x-default /><link data-rh=true rel=preconnect href=https://XKVLO8P882-dsn.algolia.net crossorigin=anonymous /><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/","name":"Deep Learning","position":1},{"@type":"ListItem","item":"https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/","name":"Transformers","position":2},{"@type":"ListItem","item":"https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/","name":"Tutorials","position":3},{"@type":"ListItem","item":"https://mlflow.org/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation","name":"Translation Models","position":4}]}</script><link rel=preconnect href=https://www.google-analytics.com><link rel=preconnect href=https://www.googletagmanager.com><script async src="https://www.googletagmanager.com/gtag/js?id=GTM-N6WMTTJ"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","GTM-N6WMTTJ",{anonymize_ip:!0}),gtag("config","AW-16857946923",{anonymize_ip:!0})</script><link rel=preconnect href=https://www.googletagmanager.com><script>window.dataLayer=window.dataLayer||[],function(e,t,a,n,r){e[n]=e[n]||[],e[n].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var d=t.getElementsByTagName(a)[0],g=t.createElement(a);g.async=!0,g.src="https://www.googletagmanager.com/gtm.js?id="+r+("dataLayer"!=n?"&l="+n:""),d.parentNode.insertBefore(g,d)}(window,document,"script","dataLayer","GTM-N6WMTTJ")</script><link rel=search type=application/opensearchdescription+xml title=MLflow href=/mlflow-website/docs/latest/opensearch.xml><script src=/mlflow-website/docs/latest/js/runllm.js defer></script><link rel=stylesheet href=/mlflow-website/docs/latest/assets/css/styles.65681509.css /><script src=/mlflow-website/docs/latest/assets/js/runtime~main.a0db6d66.js defer></script><script src=/mlflow-website/docs/latest/assets/js/main.fe92a7ea.js defer></script></head><body class=navigation-with-keyboard><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6WMTTJ" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript>


<svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/mlflow-website/docs/latest/><div class=navbar__logo><img src=/mlflow-website/docs/latest/images/logo-light.svg alt="MLflow Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"/><img src=/mlflow-website/docs/latest/images/logo-dark.svg alt="MLflow Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"/></div></a><div class="navbar__item dropdown dropdown--hoverable"><a href=# aria-haspopup=true aria-expanded=false role=button class="navbar__link docsDropdown_VGp6" data-active=ml><div style=display:flex;gap:8px;align-items:center><div class=dropdownCircle_n91F style=width:10px;height:10px;background-color:var(--ml-color-primary);border-radius:4px></div>ML Docs</div></a><ul class=dropdown__menu><li><a aria-current=page class="dropdown__link ml-docs-link dropdown__link--active" href=/mlflow-website/docs/latest/ml/><div style=display:flex;gap:8px;align-items:center><div style=width:10px;height:10px;background-color:var(--ml-color-primary);border-radius:4px></div>ML Docs</div></a><li><a class="dropdown__link genai-docs-link" href=/mlflow-website/docs/latest/genai/><div style=display:flex;gap:8px;align-items:center><div style=width:10px;height:10px;background-color:var(--genai-color-primary);border-radius:4px></div>GenAI Docs</div></a></ul></div><a href=https://mlflow.org/docs/latest/api_reference/index.html target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">API Reference</a><a class="navbar__item navbar__link" href=/mlflow-website/docs/latest/self-hosting/>Self-Hosting</a><a class="navbar__item navbar__link" href=/mlflow-website/docs/latest/community/>Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href=https://github.com/mlflow/mlflow target=_blank rel="noopener noreferrer" class="navbar__item navbar__link github-link">GitHub<svg width=13.5 height=13.5 aria-label="(opens in new tab)" class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Meta+k)" aria-keyshortcuts=Meta+k><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 24 24" aria-hidden=true><circle cx=11 cy=11 r=8 stroke=currentColor fill=none stroke-width=1.4 /><path d="m21 21-4.3-4.3" stroke=currentColor fill=none stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-top-level-category"><a class=menu__link href=/mlflow-website/docs/latest/ml/><span title=MLflow class=linkLabel_WmDU>MLflow</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed sidebar-top-level-category"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" href=/mlflow-website/docs/latest/ml/getting-started/><span title="Getting Started" class=categoryLinkLabel_W154>Getting Started</span></a><button aria-label="Expand sidebar category 'Getting Started'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item sidebar-top-level-category"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/mlflow-website/docs/latest/ml/traditional-ml/><span title="Machine Learning" class=categoryLinkLabel_W154>Machine Learning</span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/mlflow-website/docs/latest/ml/traditional-ml/><span title="Traditional ML" class=categoryLinkLabel_W154>Traditional ML</span></a><button aria-label="Expand sidebar category 'Traditional ML'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/><span title="Deep Learning" class=categoryLinkLabel_W154>Deep Learning</span></a><button aria-label="Collapse sidebar category 'Deep Learning'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/pytorch/><span title=Pytorch class=linkLabel_WmDU>Pytorch</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/tensorflow/><span title=TensorFlow class=linkLabel_WmDU>TensorFlow</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/keras/><span title=Keras class=linkLabel_WmDU>Keras</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/><span title=Transformers class=categoryLinkLabel_W154>Transformers</span></a><button aria-label="Collapse sidebar category 'Transformers'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/guide/><span title="ðŸ¤— Transformers within MLflow" class=linkLabel_WmDU>ðŸ¤— Transformers within MLflow</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/large-models/><span title="Working with Large Transformers Models" class=linkLabel_WmDU>Working with Large Transformers Models</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/task/><span title="Transformers Task Types" class=linkLabel_WmDU>Transformers Task Types</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-4 menu__list-item"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/><span title=Tutorials class=categoryLinkLabel_W154>Tutorials</span></a><button aria-label="Collapse sidebar category 'Tutorials'" aria-expanded=true type=button class="clean-btn menu__caret"></button></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/conversational/conversational-model/><span title="Introduction to Conversational Models" class=linkLabel_WmDU>Introduction to Conversational Models</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/conversational/pyfunc-chat-model/><span title="Custom Conversational Models" class=linkLabel_WmDU>Custom Conversational Models</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/fine-tuning/transformers-fine-tuning/><span title="Introduction to Fine Tuning" class=linkLabel_WmDU>Introduction to Fine Tuning</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/fine-tuning/transformers-peft/><span title="Leveraging PEFT for Fine Tuning" class=linkLabel_WmDU>Leveraging PEFT for Fine Tuning</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/audio-transcription/whisper/><span title="Introduction to Audio Transcription" class=linkLabel_WmDU>Introduction to Audio Transcription</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/prompt-templating/prompt-templating/><span title="Introduction to Prompt Templating" class=linkLabel_WmDU>Introduction to Prompt Templating</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/text-generation/text-generation/><span title="Text Generation Models" class=linkLabel_WmDU>Text Generation Models</span></a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-5 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/translation/component-translation/><span title="Translation Models" class=linkLabel_WmDU>Translation Models</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/sentence-transformers/><span title="Sentence Transformers" class=categoryLinkLabel_W154>Sentence Transformers</span></a><button aria-label="Expand sidebar category 'Sentence Transformers'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/deep-learning/spacy/><span title=spaCy class=linkLabel_WmDU>spaCy</span></a></ul></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item sidebar-top-level-category"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=true href=/mlflow-website/docs/latest/ml/tracking/><span title="Build " class=categoryLinkLabel_W154>Build </span></a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist" tabindex=0 href=/mlflow-website/docs/latest/ml/tracking/><span title="MLflow Tracking" class=categoryLinkLabel_W154>MLflow Tracking</span></a><button aria-label="Expand sidebar category 'MLflow Tracking'" aria-expanded=false type=button class="clean-btn menu__caret"></button></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/mlflow-website/docs/latest/ml/model/><span title="MLflow Model" class=categoryLinkLabel_W154>MLflow Model</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class=menu__link tabindex=0 href=/mlflow-website/docs/latest/ml/dataset/><span title="MLflow Datasets" class=linkLabel_WmDU>MLflow Datasets</span></a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-top-level-category"><a class=menu__link href=/mlflow-website/docs/latest/ml/evaluation/><span title=Evaluate class=linkLabel_WmDU>Evaluate</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed sidebar-top-level-category"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/mlflow-website/docs/latest/ml/model-registry/><span title=Deploy class=categoryLinkLabel_W154>Deploy</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/mlflow-website/docs/latest/ml/webhooks/><span title=Webhooks class=linkLabel_WmDU>Webhooks</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed sidebar-top-level-category"><div class=menu__list-item-collapsible><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/mlflow-website/docs/latest/self-hosting/><span title="Team Collaboration" class=categoryLinkLabel_W154>Team Collaboration</span></a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed sidebar-top-level-category"><div class=menu__list-item-collapsible><a href=https://mlflow.org/docs/latest/api_reference/python_api/index.html target=_blank rel="noopener noreferrer" class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false><span title="API References" class=categoryLinkLabel_W154>API References</span></a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item sidebar-top-level-category"><a class=menu__link href=/mlflow-website/docs/latest/ml/mlflow-3/><span title="MLflow 3 Migration Guide" class=linkLabel_WmDU>MLflow 3 Migration Guide</span></a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed sidebar-top-level-category"><div class=menu__list-item-collapsible><a href=https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md target=_blank rel="noopener noreferrer" class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false><span title=More class=categoryLinkLabel_W154>More</span></a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><div class=breadcrumbsWrapper_xlkt><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label=Breadcrumbs><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="Home page" class=breadcrumbs__link href=/mlflow-website/docs/latest/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Machine Learning</span><li class=breadcrumbs__item><a class=breadcrumbs__link href=/mlflow-website/docs/latest/ml/deep-learning/><span>Deep Learning</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/mlflow-website/docs/latest/ml/deep-learning/transformers/><span>Transformers</span></a><li class=breadcrumbs__item><a class=breadcrumbs__link href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/><span>Tutorials</span></a><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Translation Models</span></ul></nav></div><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Introduction to Translation with Transformers and MLflow</h1></header>
<a class="button button--primary" style=margin-bottom:1rem;display:block;width:min-content href=https://raw.githubusercontent.com/mlflow/mlflow/master/docs/docs/classic-ml/deep-learning/transformers/tutorials/translation/component-translation.ipynb download="">Download this notebook</a>
<p>In this tutorial, we delve into the world of language translation by leveraging the power of <a href=https://huggingface.co/docs/transformers target=_blank rel="noopener noreferrer" class="">Transformers</a> and MLflow. This guide is crafted for practitioners with a grasp of machine learning concepts who seek to streamline their translation model workflows. We will showcase the use of MLflow to log, manage, and serve a cutting-edge translation model - the <code>google/flan-t5-base</code> from the <a href=https://huggingface.co/ target=_blank rel="noopener noreferrer" class="">ðŸ¤— Hugging Face</a> library.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=learning-objectives>Learning Objectives<a href=#learning-objectives class=hash-link aria-label="Direct link to Learning Objectives" title="Direct link to Learning Objectives" translate=no>â€‹</a></h3>
<p>Throughout this tutorial, you will:</p>
<ul>
<li class="">Construct a translation <strong>pipeline</strong> using <code>flan-t5-base</code> from the Transformers library.</li>
<li class=""><strong>Log</strong> the translation model and its configurations using MLflow.</li>
<li class="">Determine the input and output <strong>signature</strong> of the translation model automatically.</li>
<li class=""><strong>Retrieve</strong> a logged translation model from MLflow for direct interaction.</li>
<li class="">Emulate the deployment of the translation model using MLflow's <strong>pyfunc</strong> model flavor for language translation tasks.</li>
</ul>
<p>By the conclusion of this tutorial, you'll gain a thorough insight into managing and deploying translation models with MLflow, thereby enhancing your machine learning operations for language processing.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=why-was-this-model-chosen>Why was this model chosen?<a href=#why-was-this-model-chosen class=hash-link aria-label="Direct link to Why was this model chosen?" title="Direct link to Why was this model chosen?" translate=no>â€‹</a></h3>
<p>The <a href=https://huggingface.co/google/flan-t5-base target=_blank rel="noopener noreferrer" class="">flan-t5-base</a> offers a few benefits:</p>
<ul>
<li class=""><strong>Size</strong>: it's a relatively small model for the comparatively powerful performance.</li>
<li class=""><strong>Enhanced Language Coverage</strong>: Expanding on the original <a href=https://huggingface.co/t5-base target=_blank rel="noopener noreferrer" class="">T5 model</a>, the flan-t5 has a much larger breadth of languages that it supports.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=setting-up-the-translation-environment>Setting Up the Translation Environment<a href=#setting-up-the-translation-environment class=hash-link aria-label="Direct link to Setting Up the Translation Environment" title="Direct link to Setting Up the Translation Environment" translate=no>â€‹</a></h3>
<p>Begin by setting up the essential components for translation tasks using the google/flan-t5-base model.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=importing-libraries>Importing Libraries<a href=#importing-libraries class=hash-link aria-label="Direct link to Importing Libraries" title="Direct link to Importing Libraries" translate=no>â€‹</a></h4>
<p>We import the <code>transformers</code> library for access to the translation model and tokenizer. Additionally, <code>mlflow</code> is included for model tracking and management, creating a comprehensive environment for our translation tasks.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=initializing-the-model>Initializing the Model<a href=#initializing-the-model class=hash-link aria-label="Direct link to Initializing the Model" title="Direct link to Initializing the Model" translate=no>â€‹</a></h4>
<p>The <code>google/flan-t5-base</code> model, known for its translation effectiveness, is loaded from the Hugging Face repository. This pre-trained model is a key component of our setup.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=setting-up-the-tokenizer>Setting Up the Tokenizer<a href=#setting-up-the-tokenizer class=hash-link aria-label="Direct link to Setting Up the Tokenizer" title="Direct link to Setting Up the Tokenizer" translate=no>â€‹</a></h4>
<p>We initialize the tokenizer corresponding to our model. The tokenizer plays a critical role in processing text input, making it understandable for the model.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=creating-the-pipeline>Creating the Pipeline<a href=#creating-the-pipeline class=hash-link aria-label="Direct link to Creating the Pipeline" title="Direct link to Creating the Pipeline" translate=no>â€‹</a></h4>
<p>A translation pipeline for English to French is created. This pipeline streamlines the process, allowing us to focus on inputting text and receiving translations without managing model and tokenizer interactions directly.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Disable tokenizers warnings when constructing pipelines</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token operator">%</span><span class="token plain">env TOKENIZERS_PARALLELISM</span><span class="token operator">=</span><span class="token plain">false</span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> warnings</span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Disable a few less-than-useful UserWarnings from setuptools and pydantic</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">warnings</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">filterwarnings</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"ignore"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> category</span><span class="token operator">=</span><span class="token plain">UserWarning</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>env: TOKENIZERS_PARALLELISM=false</pre>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> transformers</span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">import</span><span class="token plain"> mlflow</span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">model_architecture </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"google/flan-t5-base"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">translation_pipeline </span><span class="token operator">=</span><span class="token plain"> transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  task</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"translation_en_to_fr"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  model</span><span class="token operator">=</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">T5ForConditionalGeneration</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">from_pretrained</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">      model_architecture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> max_length</span><span class="token operator">=</span><span class="token number">1000</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  tokenizer</span><span class="token operator">=</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">T5TokenizerFast</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">from_pretrained</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">model_architecture</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> return_tensors</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"pt"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=testing-the-translation-pipeline>Testing the Translation Pipeline<a href=#testing-the-translation-pipeline class=hash-link aria-label="Direct link to Testing the Translation Pipeline" title="Direct link to Testing the Translation Pipeline" translate=no>â€‹</a></h3>
<p>We perform a preliminary check on our translation pipeline to ensure its proper functioning before logging it with MLflow.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=model-verification>Model Verification<a href=#model-verification class=hash-link aria-label="Direct link to Model Verification" title="Direct link to Model Verification" translate=no>â€‹</a></h4>
<p>A test translation allows us to verify that the model accurately translates text, in this case from English to French, ensuring the model's basic functionality.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=error-prevention>Error Prevention<a href=#error-prevention class=hash-link aria-label="Direct link to Error Prevention" title="Direct link to Error Prevention" translate=no>â€‹</a></h4>
<p>Identifying potential issues before model logging helps prevent future errors during deployment or inference, saving time and resources.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=resource-management>Resource Management<a href=#resource-management class=hash-link aria-label="Direct link to Resource Management" title="Direct link to Resource Management" translate=no>â€‹</a></h4>
<p>Testing minimizes wasteful use of resources, particularly important given the large size of these models and the resources needed to save and load them.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=pipeline-validation>Pipeline Validation<a href=#pipeline-validation class=hash-link aria-label="Direct link to Pipeline Validation" title="Direct link to Pipeline Validation" translate=no>â€‹</a></h4>
<p>This step confirms that both the model and tokenizer in the pipeline are correctly configured and capable of processing the input as expected.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Evaluate the pipeline on a sample sentence prior to logging</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">translation_pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">"translate English to French: I enjoyed my slow saunter along the Champs-Ã‰lysÃ©es."</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>[{'translation_text': "J'ai apprÃ©ciÃ© mon sajour lente sur les Champs-Ã‰lysÃ©es."}]</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=evaluating-the-translation-results>Evaluating the Translation Results<a href=#evaluating-the-translation-results class=hash-link aria-label="Direct link to Evaluating the Translation Results" title="Direct link to Evaluating the Translation Results" translate=no>â€‹</a></h3>
<p>Upon running our initial translation through the pipeline, we observed that the output, while generally accurate, exhibited areas for improvement.</p>
<p>The initial translation output was:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for text code with copy and toggle buttons"><span class=languageLabel_zr_I>text</span></div><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">    `[{'translation_text': "J'ai apprÃ©ciÃ© mon sajour lente sur les Champs-Ã‰lysÃ©es."}]`</span><br/></span></code></pre></div></div>
<p>This translation captures the essence of the original English sentence but shows minor grammatical errors and word choice issues. For instance, a more refined translation might be:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for text code with copy and toggle buttons"><span class=languageLabel_zr_I>text</span></div><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token plain">    `"J'ai apprÃ©ciÃ© ma lente promenade le long des Champs-Ã‰lysÃ©es."`</span><br/></span></code></pre></div></div>
<p>This version corrects grammatical gender and adds necessary articles, accentuation, and hyphenation. These subtle nuances enhance the translation quality significantly.
The base model's performance is encouraging, indicating the potential for more precise translations with further fine-tuning and context. MLflow's tracking and management capabilities will be instrumental in monitoring the iterative improvements of such models.</p>
<p>In summary, while the pursuit of perfection in machine translation is ongoing, the initial results are a promising step towards achieving natural and accurate translations.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=setting-model-parameters-and-inferring-signature>Setting Model Parameters and Inferring Signature<a href=#setting-model-parameters-and-inferring-signature class=hash-link aria-label="Direct link to Setting Model Parameters and Inferring Signature" title="Direct link to Setting Model Parameters and Inferring Signature" translate=no>â€‹</a></h3>
<p>We establish crucial model parameters and infer the signature to ensure consistency and reliability in our model's deployment.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=defining-model-parameters>Defining Model Parameters<a href=#defining-model-parameters class=hash-link aria-label="Direct link to Defining Model Parameters" title="Direct link to Defining Model Parameters" translate=no>â€‹</a></h4>
<p>Setting key parameters like <code>max_length</code> is vital for controlling model behavior during inference. For example, a <code>max_length</code> of 1000 ensures the model handles longer sentences effectively, crucial for maintaining context in translations.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=importance-of-inferring-signature>Importance of Inferring Signature<a href=#importance-of-inferring-signature class=hash-link aria-label="Direct link to Importance of Inferring Signature" title="Direct link to Importance of Inferring Signature" translate=no>â€‹</a></h4>
<p>The signature, defining the model's input and output schema, is critical for MLflow's understanding of the expected data structures. By inferring this signature, we document the types and structures of data that the model works with, enhancing its reliability and portability.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=benefits-of-this-process>Benefits of This Process<a href=#benefits-of-this-process class=hash-link aria-label="Direct link to Benefits of This Process" title="Direct link to Benefits of This Process" translate=no>â€‹</a></h4>
<ul>
<li class=""><strong>Enhanced Portability</strong>: Properly defined parameters and signatures make the model more adaptable to different environments.</li>
<li class=""><strong>Error Reduction</strong>: This step minimizes the risk of encountering schema-related errors during deployment.</li>
<li class=""><strong>Clear Documentation</strong>: It serves as a clear guide for developers and users, simplifying the model's integration into applications.</li>
</ul>
<p>By establishing these parameters and signature, we lay a robust foundation for our model's subsequent tracking, management, and serving via MLflow.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Define the parameters that we are permitting to be used at inference time, along with their default values if not overridden</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">model_params </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string" style="color:rgb(255, 121, 198)">"max_length"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Generate the model signature by providing an input, the expected output, and (optionally), parameters available for overriding at inference time</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">signature </span><span class="token operator">=</span><span class="token plain"> mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">infer_signature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">"This is a sample input sentence."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">generate_signature_output</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">translation_pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"This is another sample."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  params</span><span class="token operator">=</span><span class="token plain">model_params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=reviewing-the-model-signature>Reviewing the Model Signature<a href=#reviewing-the-model-signature class=hash-link aria-label="Direct link to Reviewing the Model Signature" title="Direct link to Reviewing the Model Signature" translate=no>â€‹</a></h3>
<p>After configuring the translation model and inferring its signature, it's crucial to review the signature to confirm it matches our model's input and output structures.</p>
<p>The model signature serves as a blueprint for MLflow to interact with the model, encompassing:</p>
<ul>
<li class=""><strong>Inputs:</strong> The expected input types, such as a string for the text to be translated.</li>
<li class=""><strong>Outputs:</strong> The output data types, which in our case is a string representing the translated text.</li>
<li class=""><strong>Parameters:</strong> Additional configurable settings like <code>max_length</code>, determining the maximum length of the translation output.</li>
</ul>
<p>Reviewing the signature through the <code>signature</code> command allows us to validate the data formats and ensure that our model will function as expected when deployed. This step is vital for consistent model performance and avoiding errors in a production environment.
Furthermore, the inclusion of parameters in the signature with default values ensures that any modifications during inference are deliberate and well-documented, contributing to the model's predictability and transparency.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Visualize the model signature</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">signature</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>
inputs: 
[string]
outputs: 
[string]
params: 
['max_length': long (default: 1000)]</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=creating-an-experiment>Creating an experiment<a href=#creating-an-experiment class=hash-link aria-label="Direct link to Creating an experiment" title="Direct link to Creating an experiment" translate=no>â€‹</a></h3>
<p>We create a new MLflow Experiment so that the run we're going to log our model to does not log to the default experiment and instead has its own contextually relevant entry.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># If you are running this tutorial in local mode, leave the next line commented out.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Otherwise, uncomment the following line and set your tracking uri to your local or remote tracking server.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># mlflow.set_tracking_uri("http://127.0.0.1:8080")</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">set_experiment</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"Translation"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>&lt;Experiment: artifact_location='file:///Users/benjamin.wilson/repos/mlflow-fork/mlflow/docs/source/llms/transformers/tutorials/translation/mlruns/996217394074032926', creation_time=1701286351921, experiment_id='996217394074032926', last_update_time=1701286351921, lifecycle_stage='active', name='Translation', tags={}></pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=logging-the-model-with-mlflow>Logging the Model with MLflow<a href=#logging-the-model-with-mlflow class=hash-link aria-label="Direct link to Logging the Model with MLflow" title="Direct link to Logging the Model with MLflow" translate=no>â€‹</a></h3>
<p>We are now set to log our translation model with MLflow, ensuring its trackability and version control.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=starting-an-mlflow-run>Starting an MLflow Run<a href=#starting-an-mlflow-run class=hash-link aria-label="Direct link to Starting an MLflow Run" title="Direct link to Starting an MLflow Run" translate=no>â€‹</a></h4>
<p>We initiate the logging process by starting an MLflow run. This encapsulates all the model information, including artifacts and parameters, within a unique run ID.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=using-mlflowtransformerslog_model>Using <code>mlflow.transformers.log_model</code><a href=#using-mlflowtransformerslog_model class=hash-link aria-label="Direct link to using-mlflowtransformerslog_model" title="Direct link to using-mlflowtransformerslog_model" translate=no>â€‹</a></h4>
<p>This function is integral to logging our model in MLflow. It records various aspects of the model:</p>
<ul>
<li class=""><strong>Model Pipeline</strong>: The complete translation model pipeline, encompassing the model and tokenizer.</li>
<li class=""><strong>Artifact Path</strong>: The directory path in the MLflow run where the model artifacts are stored.</li>
<li class=""><strong>Model Signature</strong>: The pre-defined signature indicating the model's expected input-output formats.</li>
<li class=""><strong>Model Parameters</strong>: Key parameters of the model, like <code>max_length</code>, providing insights into model behavior.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=outcome-of-model-logging>Outcome of Model Logging<a href=#outcome-of-model-logging class=hash-link aria-label="Direct link to Outcome of Model Logging" title="Direct link to Outcome of Model Logging" translate=no>â€‹</a></h4>
<p>Post logging, we obtain the <code>model_info</code> object, which encompasses all the essential metadata about the logged model, such as its storage location. This metadata is vital for future deployment and performance analysis.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">with</span><span class="token plain"> mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">start_run</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  model_info </span><span class="token operator">=</span><span class="token plain"> mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">log_model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">      transformers_model</span><span class="token operator">=</span><span class="token plain">translation_pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">      name</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"french_translator"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">      signature</span><span class="token operator">=</span><span class="token plain">signature</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">      model_params</span><span class="token operator">=</span><span class="token plain">model_params</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=inspecting-the-loaded-model-components>Inspecting the Loaded Model Components<a href=#inspecting-the-loaded-model-components class=hash-link aria-label="Direct link to Inspecting the Loaded Model Components" title="Direct link to Inspecting the Loaded Model Components" translate=no>â€‹</a></h3>
<p>After loading the model from MLflow, we delve into its individual components to verify their setup and functionality.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=component-breakdown>Component Breakdown<a href=#component-breakdown class=hash-link aria-label="Direct link to Component Breakdown" title="Direct link to Component Breakdown" translate=no>â€‹</a></h4>
<p>The loaded model comprises several key components, each playing a crucial role in its operation:</p>
<ul>
<li class=""><strong>Task</strong>: Defines the model's specific use-case, confirming its suitability for the intended task.</li>
<li class=""><strong>Device Map</strong>: Details the hardware configuration, important for performance optimization.</li>
<li class=""><strong>Model Instance</strong>: The core <code>T5ForConditionalGeneration</code> model, central to the translation process.</li>
<li class=""><strong>Tokenizer</strong>: The <code>T5TokenizerFast</code>, responsible for processing text inputs into a format understandable by the model.</li>
<li class=""><strong>Framework</strong>: Indicates the underlying deep learning framework, essential for compatibility considerations.</li>
</ul>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=ensuring-component-integrity-and-functionality>Ensuring Component Integrity and Functionality<a href=#ensuring-component-integrity-and-functionality class=hash-link aria-label="Direct link to Ensuring Component Integrity and Functionality" title="Direct link to Ensuring Component Integrity and Functionality" translate=no>â€‹</a></h4>
<p>Inspecting these components ensures that:</p>
<ul>
<li class="">The model aligns with our task requirements.</li>
<li class="">Hardware resources are optimally utilized.</li>
<li class="">Text inputs are correctly preprocessed for model consumption.</li>
<li class="">The model's compatibility with the selected deep learning framework is confirmed.</li>
</ul>
<p>This verification step is vital for the successful application of the model in practical scenarios, reinforcing the robustness and flexibility of MLflow.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Load our saved model as a dictionary of components, comprising the model itself, the tokenizer, and any other components that were saved</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">translation_components </span><span class="token operator">=</span><span class="token plain"> mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load_model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  model_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">model_uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> return_type</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"components"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Show the components that made up our pipeline that we saved and what type each are</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">for</span><span class="token plain"> key</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> value </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">in</span><span class="token plain"> translation_components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">items</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">:</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">f"</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation">key</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)"> -> </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token string-interpolation interpolation builtin" style="color:rgb(189, 147, 249)">type</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string-interpolation interpolation">value</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token string-interpolation interpolation">__name__</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(248, 248, 242)">}</span><span class="token string-interpolation string" style="color:rgb(255, 121, 198)">"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>2023/11/30 12:00:44 INFO mlflow.transformers: 'runs:/2357c12ca17a4f328b2f72cbb7d70343/french_translator' resolved as 'file:///Users/benjamin.wilson/repos/mlflow-fork/mlflow/docs/source/llms/transformers/tutorials/translation/mlruns/996217394074032926/2357c12ca17a4f328b2f72cbb7d70343/artifacts/french_translator'</pre>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>Loading checkpoint shards:   0%|          | 0/2 [00:00&lt;?, ?it/s]</pre>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>
task -> str
device_map -> str
model -> T5ForConditionalGeneration
tokenizer -> T5TokenizerFast
framework -> str</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=understanding-model-flavors-in-mlflow>Understanding Model Flavors in MLflow<a href=#understanding-model-flavors-in-mlflow class=hash-link aria-label="Direct link to Understanding Model Flavors in MLflow" title="Direct link to Understanding Model Flavors in MLflow" translate=no>â€‹</a></h3>
<p>The <code>model_info.flavors</code> attribute in MLflow provides insights into the model's capabilities and deployment requirements across various platforms.</p>
<p>Flavors in MLflow represent different ways the model can be utilized and deployed. Key aspects include:</p>
<ul>
<li class=""><strong>Python Function Flavor:</strong> Indicates the model's compatibility as a generic Python function, including model binary, loader module, Python version, and environment specifications.</li>
<li class=""><strong>Transformers Flavor:</strong> Tailored for models from the Hugging Face Transformers library, covering transformers version, code dependencies, task, instance type, source model name, pipeline model type, framework, tokenizer type, components, and model binary.</li>
</ul>
<p>This information guides how to interact with the model within MLflow, ensuring proper deployment with the right environment and dependencies, whether for inference or further model refinement.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Show the model parameters that were saved with our model to gain an understanding of what is recorded when saving a transformers pipeline</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">model_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">flavors</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>
{'python_function': {'model_binary': 'model',
'loader_module': 'mlflow.transformers',
'python_version': '3.8.13',
'env': {'conda': 'conda.yaml', 'virtualenv': 'python_env.yaml'}},
'transformers': {'transformers_version': '4.34.1',
'code': None,
'task': 'translation_en_to_fr',
'instance_type': 'TranslationPipeline',
'source_model_name': 'google/flan-t5-base',
'pipeline_model_type': 'T5ForConditionalGeneration',
'framework': 'pt',
'tokenizer_type': 'T5TokenizerFast',
'components': ['tokenizer'],
'model_binary': 'model'}}</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=evaluating-the-translation-output>Evaluating the Translation Output<a href=#evaluating-the-translation-output class=hash-link aria-label="Direct link to Evaluating the Translation Output" title="Direct link to Evaluating the Translation Output" translate=no>â€‹</a></h3>
<p>After testing our pipeline with a challenging sentence, we assess the translation's accuracy.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=assessing-translation-nuances>Assessing Translation Nuances<a href=#assessing-translation-nuances class=hash-link aria-label="Direct link to Assessing Translation Nuances" title="Direct link to Assessing Translation Nuances" translate=no>â€‹</a></h4>
<p>The model impressively interprets "Nice" correctly as a city name, rather than an adjective. This shows its ability to discern context and proper nouns. Furthermore, it cleverly substitutes the English play on words with the French adjective "bien," maintaining the sentence's intended sentiment.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=contextual-understanding>Contextual Understanding<a href=#contextual-understanding class=hash-link aria-label="Direct link to Contextual Understanding" title="Direct link to Contextual Understanding" translate=no>â€‹</a></h4>
<p>This translation exemplifies the model's strength in understanding context and language subtleties, which is essential for practical applications where precision and contextual accuracy are key.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=the-importance-of-rigorous-testing>The Importance of Rigorous Testing<a href=#the-importance-of-rigorous-testing class=hash-link aria-label="Direct link to The Importance of Rigorous Testing" title="Direct link to The Importance of Rigorous Testing" translate=no>â€‹</a></h4>
<p>Testing with linguistically complex sentences is vital. It ensures the model can handle various linguistic challenges, an important aspect of deploying models in real-world scenarios.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Load our saved model as a transformers pipeline and validate the performance for a simple translation task</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">translation_pipeline </span><span class="token operator">=</span><span class="token plain"> mlflow</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">load_model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">model_info</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">model_uri</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">response </span><span class="token operator">=</span><span class="token plain"> translation_pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"I have heard that Nice is nice this time of year."</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>2023/11/30 12:00:45 INFO mlflow.transformers: 'runs:/2357c12ca17a4f328b2f72cbb7d70343/french_translator' resolved as 'file:///Users/benjamin.wilson/repos/mlflow-fork/mlflow/docs/source/llms/transformers/tutorials/translation/mlruns/996217394074032926/2357c12ca17a4f328b2f72cbb7d70343/artifacts/french_translator'</pre>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>Loading checkpoint shards:   0%|          | 0/2 [00:00&lt;?, ?it/s]</pre>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>[{'translation_text': "J'ai entendu que Nice est bien cette pÃ©riode de l'annÃ©e."}]</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=assessing-the-reconstructed-pipelines-translation>Assessing the Reconstructed Pipeline's Translation<a href=#assessing-the-reconstructed-pipelines-translation class=hash-link aria-label="Direct link to Assessing the Reconstructed Pipeline's Translation" title="Direct link to Assessing the Reconstructed Pipeline's Translation" translate=no>â€‹</a></h3>
<p>We now evaluate the performance of a pipeline reconstructed from loaded components.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=reconstruction-and-testing>Reconstruction and Testing<a href=#reconstruction-and-testing class=hash-link aria-label="Direct link to Reconstruction and Testing" title="Direct link to Reconstruction and Testing" translate=no>â€‹</a></h4>
<p>Using the dictionary of loaded components, we successfully reconstruct a new translation pipeline. This step is essential to confirm that our logged and retrieved components function cohesively when reassembled.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=translation-quality>Translation Quality<a href=#translation-quality class=hash-link aria-label="Direct link to Translation Quality" title="Direct link to Translation Quality" translate=no>â€‹</a></h4>
<p>The reconstructed pipeline adeptly translates English into French, maintaining both the syntactic accuracy and semantic coherence of the original sentence. This reflects the Transformers library's ability to simplify the utilization of complex deep learning models.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=verifying-model-integrity>Verifying Model Integrity<a href=#verifying-model-integrity class=hash-link aria-label="Direct link to Verifying Model Integrity" title="Direct link to Verifying Model Integrity" translate=no>â€‹</a></h4>
<p>This test is key in verifying that the saved model and its components are not only retrievable but also function effectively post-deployment. It ensures the continued integrity and performance of the model in practical applications.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Verify that the components that we loaded can be constructed into a pipeline manually</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">reconstructed_pipeline </span><span class="token operator">=</span><span class="token plain"> transformers</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token operator">**</span><span class="token plain">translation_components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">reconstructed_response </span><span class="token operator">=</span><span class="token plain"> reconstructed_pipeline</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">  </span><span class="token string" style="color:rgb(255, 121, 198)">"transformers makes using Deep Learning models easy and fun!"</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">reconstructed_response</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>[{'translation_text': "transformers simplifie l'utilisation des modÃ¨les de l'apprentissage profonde!"}]</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=direct-utilization-of-model-components>Direct Utilization of Model Components<a href=#direct-utilization-of-model-components class=hash-link aria-label="Direct link to Direct Utilization of Model Components" title="Direct link to Direct Utilization of Model Components" translate=no>â€‹</a></h3>
<p>Explore the granular control over individual model components for custom translation processes.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=component-interaction>Component Interaction<a href=#component-interaction class=hash-link aria-label="Direct link to Component Interaction" title="Direct link to Component Interaction" translate=no>â€‹</a></h4>
<p>Interacting with the model's individual components offers a deeper level of customization. This approach is particularly beneficial when integrating the model into larger systems or when specific manipulations of inputs and outputs are required.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=insight-into-model-structure>Insight into Model Structure<a href=#insight-into-model-structure class=hash-link aria-label="Direct link to Insight into Model Structure" title="Direct link to Insight into Model Structure" translate=no>â€‹</a></h4>
<p>Examining the keys of the <code>translation_components</code> dictionary reveals the structure and components of our model. This includes the task, device mapping, core model, tokenizer, and framework information, each crucial for the translation process.</p>
<h4 class="anchor anchorTargetStickyNavbar_Vzrq" id=benefits-of-component-level-control>Benefits of Component-Level Control<a href=#benefits-of-component-level-control class=hash-link aria-label="Direct link to Benefits of Component-Level Control" title="Direct link to Benefits of Component-Level Control" translate=no>â€‹</a></h4>
<p>Utilizing components individually allows for precise adjustments and custom integrations. It's an effective way to tailor the translation process to specific needs, ensuring more control over the model's behavior and output.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># View the components that were saved with our model</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">translation_components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">keys</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>dict_keys(['task', 'device_map', 'model', 'tokenizer', 'framework'])</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=advanced-usage-direct-interaction-with-model-components>Advanced Usage: Direct Interaction with Model Components<a href=#advanced-usage-direct-interaction-with-model-components class=hash-link aria-label="Direct link to Advanced Usage: Direct Interaction with Model Components" title="Direct link to Advanced Usage: Direct Interaction with Model Components" translate=no>â€‹</a></h3>
<p>Direct interaction with a model's components offers flexibility and control for advanced use cases in translation.</p>
<p>Using the model and tokenizer components directly, as opposed to the higher-level pipeline, allows for:</p>
<ul>
<li class="">Customization of the tokenization process.</li>
<li class="">Specific tensor handling, including device specification (CPU, GPU, MPS, etc.).</li>
<li class="">Generation and adjustment of predictions on-the-fly.</li>
<li class="">Decoding outputs with options for post-processing.</li>
</ul>
<p>This approach provides granular control, enabling interventions in the model's operations, such as dynamic input adjustments or output post-processing. However, it also increases complexity, requiring a deeper understanding of the model and tokenizer and the management of more code.
Opting for direct interaction over the pipeline means balancing ease of use against the level of control required for your application. It's a critical decision, especially for advanced scenarios demanding precise manipulation of the translation process.</p>
<div style=flex-grow:1;min-width:0;margin-top:var(--padding-md);width:100%><div class="codeBlock_oJcR language-python codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#F8F8F2;--prism-background-color:#282A36><div class=codeBlockContent_bxn0><div class=codeBlockHeader_C_1e aria-label="Code block header for python code with copy and toggle buttons"><span class=languageLabel_zr_I>python</span></div><pre tabindex=0 class="prism-code language-python codeBlock_bY9V thin-scrollbar" style=color:#F8F8F2;background-color:#282A36><code class=codeBlockLines_e6Vv><span class=token-line style=color:#F8F8F2><span class="token comment" style="color:rgb(98, 114, 164)"># Access the individual components from the components dictionary</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">tokenizer </span><span class="token operator">=</span><span class="token plain"> translation_components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"tokenizer"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">model </span><span class="token operator">=</span><span class="token plain"> translation_components</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token string" style="color:rgb(255, 121, 198)">"model"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">query </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">"Translate to French: Liberty, equality, fraternity, or death."</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># This notebook was run on a Mac laptop, so we'll send the output tensor to the "mps" device.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># If you're running this on a different system, ensure that you're sending the tensor output to the appropriate device to ensure that</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># the model is able to read it from memory.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">inputs </span><span class="token operator">=</span><span class="token plain"> tokenizer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">encode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">query</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> return_tensors</span><span class="token operator">=</span><span class="token string" style="color:rgb(255, 121, 198)">"pt"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"mps"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">outputs </span><span class="token operator">=</span><span class="token plain"> model</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">generate</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">inputs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">to</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"mps"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain">result </span><span class="token operator">=</span><span class="token plain"> tokenizer</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">decode</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">outputs</span><span class="token punctuation" style="color:rgb(248, 248, 242)">[</span><span class="token number">0</span><span class="token punctuation" style="color:rgb(248, 248, 242)">]</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain" style=display:inline-block></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token comment" style="color:rgb(98, 114, 164)"># Since we're not using a pipeline here, we need to modify the output slightly to get only the translated text.</span><span class="token plain"></span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token keyword" style="color:rgb(189, 147, 249);font-style:italic">print</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token plain">result</span><span class="token punctuation" style="color:rgb(248, 248, 242)">.</span><span class="token plain">replace</span><span class="token punctuation" style="color:rgb(248, 248, 242)">(</span><span class="token string" style="color:rgb(255, 121, 198)">"&lt;pad> "</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"> "</span><br/></span><span class=token-line style=color:#F8F8F2><span class="token plain"></span><span class="token string" style="color:rgb(255, 121, 198)">").replace("</span><span class="token operator">&lt;</span><span class="token operator">/</span><span class="token plain">s</span><span class="token operator">></span><span class="token string" style="color:rgb(255, 121, 198)">", "</span><span class="token plain">"</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><span class="token punctuation" style="color:rgb(248, 248, 242)">)</span><br/></span></code></pre></div></div></div>
<pre style=margin:0;border-radius:0;background:none;font-size:0.85rem;flex-grow:1;padding:var(--padding-sm)>

La libertÃ©, l'Ã©galitÃ©, la fraternitÃ© ou la mort.</pre>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=tutorial-recap>Tutorial Recap<a href=#tutorial-recap class=hash-link aria-label="Direct link to Tutorial Recap" title="Direct link to Tutorial Recap" translate=no>â€‹</a></h3>
<p>This tutorial provided insights into combining MLflow with advanced language translation models, emphasizing streamlined model management and deployment.</p>
<p>We explored several key aspects:</p>
<ul>
<li class="">Setting up and testing a translation pipeline using Transformers.</li>
<li class="">Logging the model and its configurations to MLflow for effective versioning and tracking.</li>
<li class="">Inferring and examining the model's signature for ensuring input and output consistency.</li>
<li class="">Interacting with logged model components for enhanced flexibility in deployment.</li>
<li class="">Discussing the nuances of language translation and the role of context in achieving accurate results.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=the-power-of-mlflow-and-model-metadata>The Power of MLflow and Model Metadata<a href=#the-power-of-mlflow-and-model-metadata class=hash-link aria-label="Direct link to The Power of MLflow and Model Metadata" title="Direct link to The Power of MLflow and Model Metadata" translate=no>â€‹</a></h3>
<p>MLflow's integration proved instrumental in managing and deploying the translation model. The tutorial highlighted how MLflow's metadata, including the model's signature and flavors, aids in consistent and reliable deployment, catering to production needs.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=reflection-on-the-translation-output>Reflection on the Translation Output<a href=#reflection-on-the-translation-output class=hash-link aria-label="Direct link to Reflection on the Translation Output" title="Direct link to Reflection on the Translation Output" translate=no>â€‹</a></h3>
<p>The final translation output, while not exact, captured the essence of the iconic French motto, highlighting the model's effectiveness and the importance of contextual understanding in translations. Further exploration on the cultural significance of the phrase can be found on its <a href=https://en.wikipedia.org/wiki/Libert%C3%A9,_%C3%A9galit%C3%A9,_fraternit%C3%A9 target=_blank rel="noopener noreferrer" class="">Wikipedia Page</a>.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id=conclusion>Conclusion<a href=#conclusion class=hash-link aria-label="Direct link to Conclusion" title="Direct link to Conclusion" translate=no>â€‹</a></h3>
<p>The combination of MLflow and advanced language models like Transformers offers a powerful approach to deploying sophisticated AI solutions. This tutorial aimed to empower your journey in machine learning, whether in translation tasks or other ML applications.</div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col noPrint_WFHX"><a href=https://github.com/mlflow/mlflow/edit/master/docs/docs/classic-ml/deep-learning/transformers/tutorials/translation/component-translation.ipynb target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href=/mlflow-website/docs/latest/ml/deep-learning/transformers/tutorials/text-generation/text-generation/><div class=pagination-nav__sublabel>Previous</div><div class=pagination-nav__label>Text Generation Models</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/mlflow-website/docs/latest/ml/deep-learning/sentence-transformers/><div class=pagination-nav__sublabel>Next</div><div class=pagination-nav__label>Sentence Transformers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#learning-objectives class="table-of-contents__link toc-highlight">Learning Objectives</a><li><a href=#why-was-this-model-chosen class="table-of-contents__link toc-highlight">Why was this model chosen?</a><li><a href=#setting-up-the-translation-environment class="table-of-contents__link toc-highlight">Setting Up the Translation Environment</a><li><a href=#testing-the-translation-pipeline class="table-of-contents__link toc-highlight">Testing the Translation Pipeline</a><li><a href=#evaluating-the-translation-results class="table-of-contents__link toc-highlight">Evaluating the Translation Results</a><li><a href=#setting-model-parameters-and-inferring-signature class="table-of-contents__link toc-highlight">Setting Model Parameters and Inferring Signature</a><li><a href=#reviewing-the-model-signature class="table-of-contents__link toc-highlight">Reviewing the Model Signature</a><li><a href=#creating-an-experiment class="table-of-contents__link toc-highlight">Creating an experiment</a><li><a href=#logging-the-model-with-mlflow class="table-of-contents__link toc-highlight">Logging the Model with MLflow</a><li><a href=#inspecting-the-loaded-model-components class="table-of-contents__link toc-highlight">Inspecting the Loaded Model Components</a><li><a href=#understanding-model-flavors-in-mlflow class="table-of-contents__link toc-highlight">Understanding Model Flavors in MLflow</a><li><a href=#evaluating-the-translation-output class="table-of-contents__link toc-highlight">Evaluating the Translation Output</a><li><a href=#assessing-the-reconstructed-pipelines-translation class="table-of-contents__link toc-highlight">Assessing the Reconstructed Pipeline's Translation</a><li><a href=#direct-utilization-of-model-components class="table-of-contents__link toc-highlight">Direct Utilization of Model Components</a><li><a href=#advanced-usage-direct-interaction-with-model-components class="table-of-contents__link toc-highlight">Advanced Usage: Direct Interaction with Model Components</a><li><a href=#tutorial-recap class="table-of-contents__link toc-highlight">Tutorial Recap</a><li><a href=#the-power-of-mlflow-and-model-metadata class="table-of-contents__link toc-highlight">The Power of MLflow and Model Metadata</a><li><a href=#reflection-on-the-translation-output class="table-of-contents__link toc-highlight">Reflection on the Translation Output</a><li><a href=#conclusion class="table-of-contents__link toc-highlight">Conclusion</a></ul></div></div></div></div></main></div></div></div><footer class="relative pb-30 flex flex-col pt-30 bg-bottom bg-no-repeat bg-cover bg-size-[auto_360px] 2xl:bg-size-[100%_360px] bg-brand-black"><div style="position:absolute;width:100%;bottom:0;pointer-events:none;mask-composite:intersect;height:360px;background-image:repeating-linear-gradient(
        to right,
        rgba(0, 0, 0, 0.05),
        rgba(0, 0, 0, 0.25) 18px,
        transparent 2px,
        transparent 10px
      ),
      radial-gradient(
        circle at bottom center,
        oklch(0.7533 0.11 216.4) 0%,
        transparent 60%
      ),
      linear-gradient(to right, color-mix(in srgb, oklch(0.7533 0.11 216.4), navy 40%), color-mix(in srgb, oklch(0.7533 0.11 216.4), teal 40%));mask-image:radial-gradient(ellipse at center bottom, black 60%, transparent 80%),
      linear-gradient(to top, black 10%, transparent 40%)"></div><div class=z-1><div class="flex flex-row justify-between items-start md:items-center px-6 lg:px-20 gap-10 xs:gap-0 max-w-container"><div class="flex flex-col gap-8"><svg xmlns=http://www.w3.org/2000/svg width=109 height=40 fill=none viewBox="0 0 109 40" class="h-[36px] shrink-0"><path fill=#fff d="M0 31.032v-15.53h3.543v1.968c.893-1.594 2.84-2.425 4.593-2.425 2.042 0 3.828.926 4.658 2.745 1.216-2.043 3.034-2.745 5.043-2.745 2.81 0 5.49 1.787 5.49 5.904v10.083h-3.574v-9.478c0-1.818-.926-3.19-3-3.19-1.947 0-3.224 1.53-3.224 3.445v9.22H9.893v-9.475c0-1.786-.898-3.18-3.003-3.18-1.977 0-3.223 1.467-3.223 3.444v9.221ZM27.855 31.032V7.929h3.703v23.103ZM30.07 39.487c.833.232 1.582.383 3.17.383 2.953 0 6.436-1.665 7.353-6.339l3.786-18.739h5.629l.687-3.117h-5.686l.765-3.725c.586-2.892 2.186-4.358 4.754-4.358.668 0 .48.058 1.076.17L52.427.57c-.793-.237-1.503-.379-3.049-.379a7.32 7.32 0 0 0-4.528 1.484c-1.441 1.114-2.393 2.75-2.827 4.863l-1.066 5.137h-5.034l-.411 3.12h4.823L36.859 32.12c-.383 1.965-1.5 4.315-4.708 4.315-.727 0-.463-.055-1.121-.162ZM53.342 30.905H49.64l5.074-23.309h3.701ZM71.807 16.477A7.962 7.962 0 0 0 60.97 27.904l2.425-1.78a5.005 5.005 0 0 1 3.845-8.145v1.895ZM62.618 29.472a7.962 7.962 0 0 0 10.836-11.428l-2.425 1.78a5.005 5.005 0 0 1-3.845 8.145v-1.894ZM78.092 15.493h4.044l.823 10.612 5.759-10.612 3.839.055 1.508 10.557 5.074-10.612 3.701.055-7.678 15.493H91.46l-1.783-11.106-5.895 11.106h-3.84ZM105.072 15.768h-.766v-.266h1.845v.272h-.765v2.243h-.314ZM106.614 15.502h.383l.482 1.34q.091.259.178.524h.018c.059-.176.113-.352.172-.524l.478-1.34h.383v2.515h-.298V16.63c0-.22.024-.523.04-.747h-.016l-.191.574-.475 1.304h-.208l-.481-1.302-.191-.574h-.015c.017.224.042.527.042.747v1.387h-.291Z"/></svg><div class="text-xs text-left md:text-nowrap md:w-0">Â© 2025 MLflow Project, a Series of LF Projects, LLC.</div></div><div class="flex flex-col flex-wrap justify-end md:text-right md:flex-row gap-x-10 lg:gap-x-20 gap-y-5 w-2/5 md:w-auto md:pt-2 max-w-fit"><div><a href=https://mlflow.org target=_blank rel="noopener noreferrer" class="text-[15px] font-medium no-underline hover:no-underline transition-opacity hover:opacity-80 text-white visited:text-white">Components</a></div><div><a href=https://mlflow.org/releases target=_blank rel="noopener noreferrer" class="text-[15px] font-medium no-underline hover:no-underline transition-opacity hover:opacity-80 text-white visited:text-white">Releases</a></div><div><a href=https://mlflow.org/blog target=_blank rel="noopener noreferrer" class="text-[15px] font-medium no-underline hover:no-underline transition-opacity hover:opacity-80 text-white visited:text-white">Blog</a></div><div><a class="text-[15px] font-medium no-underline hover:no-underline transition-opacity hover:opacity-80 text-white visited:text-white" href=/mlflow-website/docs/latest/>Docs</a></div><div><a href=https://mlflow.org/ambassadors target=_blank rel="noopener noreferrer" class="text-[15px] font-medium no-underline hover:no-underline transition-opacity hover:opacity-80 text-white visited:text-white">Ambassador Program</a></div></div></div></div></footer></div></body>