
  

<!DOCTYPE html>
<!-- source: docs/source/llms/tracing/tracing-schema.rst -->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>MLflow Tracing Schema &mdash; MLflow 2.14.4.dev0 documentation</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/llms/tracing/tracing-schema.html">
  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    

    

  
    
        <!-- Google Tag Manager -->
        <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
        'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer',"GTM-N6WMTTJ");</script>
        <!-- End Google Tag Manager -->
    

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="MLflow 2.14.4.dev0 documentation" href="../../index.html"/>
        <link rel="up" title="LLMs" href="../index.html"/>
        <link rel="next" title="MLflow Deployments Server (Experimental)" href="/../deployments/index.html"/>
        <link rel="prev" title="Tracing Concepts" href="/overview.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../../_static/jquery.js"></script>
<script type="text/javascript" src="../../_static/underscore.js"></script>
<script type="text/javascript" src="../../_static/doctools.js"></script>
<script type="text/javascript" src="../../_static/tabs.js"></script>
<script type="text/javascript" src="../../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>

<body class="wy-body-for-nav" role="document">
  
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-N6WMTTJ"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../../index.html" class="wy-nav-top-logo"
      ><img src="../../_static/MLflow-logo-final-black.png" alt="MLflow"
    /></a>
    <span class="version">2.14.4.dev0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home"><img src="../../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">What is MLflow?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting-started/index.html">Getting Started with MLflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../new-features/index.html">New Features</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">LLMs</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#id1">MLflow Tracing</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="index.html">Tracing in MLflow</a></li>
<li class="toctree-l3"><a class="reference internal" href="overview.html">Tracing Concepts</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">MLflow Tracing Schema</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#structure-of-traces">Structure of Traces</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-schema">Trace Schema</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-info">Trace Info</a></li>
<li class="toctree-l4"><a class="reference internal" href="#trace-data">Trace Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#span-schema">Span Schema</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id2">MLflow Deployments Server for LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id3">LLM Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id4">Prompt Engineering UI</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#native-mlflow-flavors-for-llms">Native MLflow Flavors for LLMs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#id5">LLM Tracking in MLflow</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#tutorials-and-use-case-guides-for-llms-in-mlflow">Tutorials and Use Case Guides for LLMs in MLflow</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../model-evaluation/index.html">Model Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deep-learning/index.html">Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../traditional-ml/index.html">Traditional ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/index.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tracking.html">MLflow Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system-metrics/index.html">System Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model-registry.html">MLflow Model Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recipes.html">MLflow Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">MLflow Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auth/index.html">MLflow Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../search-runs.html">Search Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../search-experiments.html">Search Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rest-api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker.html">Official MLflow Docker Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community-model-flavors.html">Community Model Flavors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples/index.html">Tutorials and Examples</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="../index.html">LLMs</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>MLflow Tracing Schema</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/llms/tracing/tracing-schema.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="mlflow-tracing-schema">
<h1>MLflow Tracing Schema<a class="headerlink" href="#mlflow-tracing-schema" title="Permalink to this headline"> </a></h1>
<div class="section" id="structure-of-traces">
<h2>Structure of Traces<a class="headerlink" href="#structure-of-traces" title="Permalink to this headline"> </a></h2>
<div class="tracing-responsive-tabs docutils container">
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" role="tablist"><button aria-controls="panel-0-0-0" aria-selected="true" class="sphinx-tabs-tab" id="tab-0-0-0" name="0-0" role="tab" tabindex="0">Trace Architecture</button><button aria-controls="panel-0-0-1" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-1" name="0-1" role="tab" tabindex="-1">Trace Info</button><button aria-controls="panel-0-0-2" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-2" name="0-2" role="tab" tabindex="-1">Trace Data</button><button aria-controls="panel-0-0-3" aria-selected="false" class="sphinx-tabs-tab" id="tab-0-0-3" name="0-3" role="tab" tabindex="-1">Span Architecture</button></div><div aria-labelledby="tab-0-0-0" class="sphinx-tabs-panel" id="panel-0-0-0" name="0-0" role="tabpanel" tabindex="0"><p><div class=""main-container"">
    <div>
        <h4>Trace Architecture</h4>
        <p>A <a href="../../python_api/mlflow.entities.html#mlflow.entities.Trace">Trace</a> in MLflow consists of two components:
           <a href="../../python_api/mlflow.entities.html#mlflow.entities.TraceInfo">Trace Info</a> and
           <a href="../../python_api/mlflow.entities.html#mlflow.entities.TraceData">Trace Data</a>.
        </p>
        <p>The metadata that aids in explaining the origination
           of the trace, the status of the trace, and the information about the total execution time is stored within the Trace Info. The Trace
           Data is comprised entirely of the instrumented <a href="../../python_api/mlflow.entities.html#mlflow.entities.Span">Span</a>
           objects that make up the core of the trace.
        </p>
    </div>
    <div class="image-box">
        <img src="../../_static/images/llms/tracing/schema/trace_architecture.png"/>
    </div>
</div></p>
</div><div aria-labelledby="tab-0-0-1" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-1" name="0-1" role="tabpanel" tabindex="0"><p><div class=""main-container"">
    <div>
      <h4>Trace Info Structure</h4>
      <p> The Trace Info within MLflow's tracing feature aims to provide a lightweight snapshot of critical data about the overall trace.
        This includes the logistical information about the trace, such as the experiment_id, providing the storage location for the trace,
        as well as trace-level data such as start time and total execution time. The Trace Info also includes tags and status information for
        the trace as a whole.
      </p>
    </div>
    <div class="image-box">
        <img src="../../_static/images/llms/tracing/schema/trace_info_architecture.png"/>
    </div>
</div></p>
</div><div aria-labelledby="tab-0-0-2" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-2" name="0-2" role="tabpanel" tabindex="0"><p><div class=""main-container"">
    <div>
      <h4>Trace Data Structure</h4>
      <p> The Trace Data within MLflow's tracing feature provides the core of the trace information. Within this object is a list of
        <a href="../../python_api/mlflow.entities.html#mlflow.entities.Span">Span</a> objects that represent the individual steps of the trace.
        These spans are associated with one another in a hierarchical relationship, providing a clear order-of-operations linkage of what
        happened within your application during the trace.
      </p>
    </div>
    <div class="image-box">
        <img src="../../_static/images/llms/tracing/schema/trace_data_architecture.png"/>
    </div>
</div></p>
</div><div aria-labelledby="tab-0-0-3" class="sphinx-tabs-panel" hidden="true" id="panel-0-0-3" name="0-3" role="tabpanel" tabindex="0"><p><div class=""main-container"">
    <div>
      <h4>Span Structure</h4>
      <p> The Span object within MLflow's tracing feature provides detailed information about the individual steps of the trace.
        Each Span object contains information about the step being instrumented, including the span_id, name, start_time, parent_id, status,
        inputs, outputs, attributes, and events.
      </p>
    </div>
    <div class="image-box">
        <img src="../../_static/images/llms/tracing/schema/span_architecture.png"/>
    </div>
</div></p>
</div></div>
</div>
</div>
<div class="section" id="trace-schema">
<h2>Trace Schema<a class="headerlink" href="#trace-schema" title="Permalink to this headline"> </a></h2>
<p>A trace is composed of two components:</p>
<ul class="simple">
<li><p><a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.TraceInfo" title="mlflow.entities.TraceInfo"><code class="xref py py-func docutils literal notranslate"><span class="pre">TraceInfo</span></code></a></p></li>
<li><p><a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.TraceData" title="mlflow.entities.TraceData"><code class="xref py py-func docutils literal notranslate"><span class="pre">TraceData</span></code></a></p></li>
</ul>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Check the API documentation for helper methods on these dataclass objects for more information on how to convert or extract data from them.</p>
</div>
</div>
<div class="section" id="trace-info">
<h2>Trace Info<a class="headerlink" href="#trace-info" title="Permalink to this headline"> </a></h2>
<p>Trace Info is a dataclass object that contains metadata about the trace. This metadata includes information about the trace’s origin, status, and
various other data that aids in retrieving and filtering traces when used with <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient.search_traces" title="mlflow.client.MlflowClient.search_traces"><code class="xref py py-meth docutils literal notranslate"><span class="pre">mlflow.client.MlflowClient.search_traces()</span></code></a> and for
navigation of traces within the MLflow UI.</p>
<p>To learn more about how <code class="docutils literal notranslate"><span class="pre">TraceInfo</span></code> metadata is used for searching, you can see examples <a class="reference internal" href="index.html#search-traces"><span class="std std-ref">here</span></a>.</p>
<p>The data that is contained in the <code class="docutils literal notranslate"><span class="pre">TraceInfo</span></code> object is used to populate the trace view page within the MLflow tracking UI, as shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/trace_info_in_ui.png"><img alt="TraceInfo as it is used in the MLflow UI" src="../../_images/trace_info_in_ui.png" style="width: 100%;" /></a>
</div>
<p>The primary components of MLflow <a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.TraceInfo" title="mlflow.entities.TraceInfo"><code class="xref py py-class docutils literal notranslate"><span class="pre">TraceInfo</span></code></a> objects are listed below.</p>
<table class="colwidths-given wrap-table docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Property</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request_id</strong></p></td>
<td><p>A unique identifier for the trace. The identifier is used within MLflow and integrated system to resolve the event being captured and to provide associations for external systems to map the logged trace to the originating caller.</p></td>
<td><p>This value is generated by the tracing backend and is immutable. Within the tracing client APIs, you will need to deliberately pass this value to the <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient.start_span" title="mlflow.client.MlflowClient.start_span"><code class="xref py py-meth docutils literal notranslate"><span class="pre">span</span> <span class="pre">creation</span> <span class="pre">API</span></code></a> to ensure that a given span is associated with a trace.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>experiment_id</strong></p></td>
<td><p>The ID of the experiment in which the trace was logged. All logged traces are associated with the current active experiment when the trace is generated (during invocation of an instrumented object).</p></td>
<td><p>This value is immutable and is set by the tracing backend. It is a system-controlled value that is very useful when using the <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient.search_traces" title="mlflow.client.MlflowClient.search_traces"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Search</span> <span class="pre">Traces</span></code></a> API.</p></td>
</tr>
<tr class="row-even"><td><p><strong>timestamp_ms</strong></p></td>
<td><p>The time that marks the moment when the root span of the trace was created. This is a Unix timestamp in milliseconds.</p></td>
<td><p>The time reflected in this property is the time at with the trace was created, not the time at which a request to your application was made. As such, it does not factor into account the time it took to process the request to the environment in which your application is being served, which may introduce additional latency to the total round trip time, depending on network configurations.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>execution_time_ms</strong></p></td>
<td><p>The time that marks the moment when the call to end the trace is made. This is a Unix timestamp in milliseconds.</p></td>
<td><p>This time does not include the networking time associated with sending the response from the environment that generates the trace to the environment that is consuming the application’s invocation result.</p></td>
</tr>
<tr class="row-even"><td><p><strong>status</strong></p></td>
<td><p>An enumerated value that denotes the status of the trace.</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">TraceStatus</span></code> values are one of:</p>
<ul class="simple">
<li><p><strong>OK</strong> - The trace and the instrumented call were successful.</p></li>
<li><p><strong>ERROR</strong> - An error occurred while an application was being instrumented. The error can be seen within the span data for the trace.</p></li>
<li><p><strong>IN_PROGRESS</strong> - The trace has started and is currently running. Temporary state that will update while spans are being logged to a trace.</p></li>
<li><p><strong>TRACE_STATUS_UNSPECIFIED</strong> - internal default state that should not be seen in logged traces.</p></li>
</ul>
</td>
</tr>
<tr class="row-odd"><td><p><strong>request_metadata</strong></p></td>
<td><p>The request metadata are additional key-value pairs of information that are associated with the Trace, set and modified by the tracing backend.</p></td>
<td><p>These are not open for addition or modification by the user, but can provide additional context about the trace, such as an MLflow <code class="docutils literal notranslate"><span class="pre">run_id</span></code> that is associated with the trace.</p></td>
</tr>
<tr class="row-even"><td><p><strong>tags</strong></p></td>
<td><p>User-defined key-value pairs that can be applied to a trace for applying additional context, aid in <a class="reference internal" href="index.html#search-traces"><span class="std std-ref">search functionality</span></a>, or to provide additional information during the creation or after the successful logging of a trace.</p></td>
<td><p>These tags are fully mutable and can be changed at any time, even long after a trace has been logged to an experiment.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="trace-data">
<h2>Trace Data<a class="headerlink" href="#trace-data" title="Permalink to this headline"> </a></h2>
<p>The MLflow <a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.TraceData" title="mlflow.entities.TraceData"><code class="xref py py-class docutils literal notranslate"><span class="pre">TraceData</span></code></a> object is a dataclass object that holds the core of the trace data. This object contains
the following elements:</p>
<table class="colwidths-given wrap-table docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Property</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>request</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">request</span></code> property is the input data for the entire trace. The input <code class="docutils literal notranslate"><span class="pre">str</span></code> is a JSON-serialized string that contains the input data for the trace, typically the end-user request that was submitted as a call to the application.</p></td>
<td><p>Due to the varied structures of inputs that could go to a given application that is being instrumented by MLflow Tracing, all inputs are JSON serialized for compatibility’s sake. This allows for the input data to be stored in a consistent format, regardless of the input data’s structure.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>spans</strong></p></td>
<td><p>This property is a list of <a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.Span" title="mlflow.entities.Span"><code class="xref py py-class docutils literal notranslate"><span class="pre">Span</span></code></a> objects that represent the individual steps of the trace.</p></td>
<td><p>For further information on the structure of Span objects, see the section below.</p></td>
</tr>
<tr class="row-even"><td><p><strong>response</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">response</span></code> property is the final output data that will be returned to the caller of the invocation of the application.</p></td>
<td><p>Similar to the request property, this value is a JSON-serialized string to maximize compatibility of disparate formats.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="span-schema">
<h2>Span Schema<a class="headerlink" href="#span-schema" title="Permalink to this headline"> </a></h2>
<p>Spans are the core of the trace data. They record key, critical data about each of the steps within your genai application.</p>
<p>When you view your traces within the MLflow UI, you’re looking at a collection of spans, as shown below.</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/spans_in_mlflow_ui.png"><img alt="Spans within the MLflow UI" src="../../_images/spans_in_mlflow_ui.png" style="width: 100%;" /></a>
</div>
<p>The sections below provide a detailed view of the structure of a span.</p>
<table class="colwidths-given wrap-table docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 40%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p><strong>Property</strong></p></th>
<th class="head"><p><strong>Description</strong></p></th>
<th class="head"><p><strong>Note</strong></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>inputs</strong></p></td>
<td><p>The inputs are stored as JSON-serialized strings, representing the input data that is passed into the particular stage (step) of your application. Due to the wide variety of input data that can be passed between specific stages of a GenAI application, this data may be extremely large (such as when using the output of a vector store retrieval step).</p></td>
<td><p>Reviewing the Inputs, along with the Outputs, of individual stages can dramatically increase the ability to diagnose and debug issues that exist with responses coming from your application.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>outputs</strong></p></td>
<td><p>The outputs are stored as JSON-serialized strings, representing the output data that is passed out of the particular stage (step) of your application.</p></td>
<td><p>Just as with the Inputs, the Outputs can be quite large, depending on the complexity of the data that is being passed between stages.</p></td>
</tr>
<tr class="row-even"><td><p><strong>attributes</strong></p></td>
<td><p>Attributes are metadata that are associated with a given step within your application. These attributes are key-value pairs that can be used to provide insight into behavioral modifications for function and method calls, giving insight into how modification of them can affect the performance of your application.</p></td>
<td><p>Common examples of attributes that could be associated with a given span include:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>model</strong></p></li>
<li><p><strong>temperature</strong></p></li>
<li><p><strong>document_count</strong></p></li>
</ul>
</div></blockquote>
<p>These attributes provide additional context and insight into the results that are present in the <code class="docutils literal notranslate"><span class="pre">outputs</span></code> property for the span.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>events</strong></p></td>
<td><p>Events are a system-level property that is optionally applied to a span only if there was an issue during the execution of the span. These events contain information about exceptions that were thrown in the instrumented call, as well as the stack trace.</p></td>
<td><p>This data is structured within a <a class="reference internal" href="../../python_api/mlflow.entities.html#mlflow.entities.SpanEvent" title="mlflow.entities.SpanEvent"><code class="xref py py-class docutils literal notranslate"><span class="pre">SpanEvent</span></code></a> object, containing the properties:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>name</strong></p></li>
<li><p><strong>timestamp</strong></p></li>
<li><p><strong>attributes</strong></p></li>
</ul>
</div></blockquote>
<p>The <strong>attributes</strong> property contains the stack trace of the exception that was thrown during the execution of the span if such an error occurred during execution.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>parent_id</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">parent_id</span></code> property is an identifier that establishes the hierarchical association of a given span with its parent span. This is used to establish an event chain for the spans, helping to determine which step followed another step in the execution of the application.</p></td>
<td><p>A span <strong>must</strong> have a <code class="docutils literal notranslate"><span class="pre">parent_id</span></code> set.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>span_id</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">span_id</span></code> is a unique identifier that is generated for each span within a trace. This identifier is used to disambiguate spans from one another and allow for proper association of the span within the sequential execution of other spans within a trace.</p></td>
<td><p>A <code class="docutils literal notranslate"><span class="pre">span_id</span></code> is set when a span is created and is immutable.</p></td>
</tr>
<tr class="row-even"><td><p><strong>request_id</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">request_id</span></code> property is a unique identifier that is generated for each <strong>trace</strong> and is propogated to each span that is a member of that trace.</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">request_id</span></code> is a system-generated propoerty and is immutable.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>name</strong></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> of the trace is either user-defined (optionally when using the fluent and client APIs) or is automatically generated through CallBack integrations or when omitting the <code class="docutils literal notranslate"><span class="pre">name</span></code> argument when calling the fluent or client APIs. If the name is not overridden, the name will be generated based on the name of the function or method that is being instrumented.</p></td>
<td><p>It is recommended to provide a name for your span that is unique and relevant to the functionality that is being executed when using manual instumentation via the client or fluent APIs. Generic names for spans or confusing names can make it difficult to diagnose issues when reviewing traces.</p></td>
</tr>
<tr class="row-even"><td><p><strong>status</strong></p></td>
<td><p>The status of a span is reflected in a value from the enumeration object <code class="docutils literal notranslate"><span class="pre">SpanStatusCode</span></code>. The span status object contains an optional description if the <code class="docutils literal notranslate"><span class="pre">status_code</span></code> is reflecting an error that occured. The values that the status may have are:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>OK</strong> - The span and the underlying instrumented call were successful.</p></li>
<li><p><strong>UNSET</strong> - The status of the span hasn’t been set yet (this is the default value and should not be seen in logged trace events).</p></li>
<li><p><strong>ERROR</strong> - An issue happened within the call being instrumented. The <code class="docutils literal notranslate"><span class="pre">description</span></code> property will contain additional information about the error that occurred.</p></li>
</ul>
</div></blockquote>
</td>
<td><p>Evaluating the status of spans can greatly reduce the amount of time and effort required to diagnose issues with your applications.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>start_time_ns</strong></p></td>
<td><p>The unix timestamp (in nanoseconds) when the span was started.</p></td>
<td><p>The precision of this property is higher than that of the trace start time, allowing for more granular analysis of the execution time of very short-lived spans.</p></td>
</tr>
<tr class="row-even"><td><p><strong>end_time_ns</strong></p></td>
<td><p>The unix timestamp (in nanoseconds) when the span was ended.</p></td>
<td><p>This precision is higher than the trace timestamps, similar to the <code class="docutils literal notranslate"><span class="pre">start_time_ns</span></code> timestamp above.</p></td>
</tr>
</tbody>
</table>
</div>
</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="overview.html" class="btn btn-neutral" title="Tracing Concepts" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="../deployments/index.html" class="btn btn-neutral" title="MLflow Deployments Server (Experimental)" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../../',
      VERSION:'2.14.4.dev0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../../_static/clippy.svg";</script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>