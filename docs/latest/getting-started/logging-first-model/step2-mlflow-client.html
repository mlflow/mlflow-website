
  

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using the MLflow Client API &mdash; MLflow 2.9.3.dev0 documentation</title>
  
   
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
  <link rel="canonical" href="https://mlflow.org/docs/latest/getting-started/logging-first-model/step2-mlflow-client.html">
  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
    

    

  
    

  

  
  
    

  

  
  
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600" rel="stylesheet">
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/custom.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/cards.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/grids.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/mobile.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/simple-cards.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/css/tabs.css" type="text/css" />
    
  
        <link rel="index" title="Index"
              href="../../genindex.html"/>
        <link rel="search" title="Search" href="../../search.html"/>
    <link rel="top" title="MLflow 2.9.3.dev0 documentation" href="../../index.html"/>
        <link rel="up" title="Tutorial Overview" href="index.html"/>
        <link rel="next" title="Creating Experiments" href="/step3-create-experiment.html"/>
        <link rel="prev" title="Starting the MLflow Tracking Server" href="/step1-tracking-server.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>
<script type="text/javascript" src="../../_static/jquery.js"></script>
<script type="text/javascript" src="../../_static/underscore.js"></script>
<script type="text/javascript" src="../../_static/doctools.js"></script>
<script type="text/javascript" src="../../_static/languagesections.js"></script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@jupyter-widgets/html-manager@^1.0.1/dist/embed-amd.js"></script>

<body class="wy-body-for-nav" role="document">
  

  
  <nav class="wy-nav-top header" role="navigation" aria-label="top navigation">
    <ul>
  <li class="menu-toggle">
    <i data-toggle="wy-nav-top" class="wy-nav-top-menu-button db-icon db-icon-menu pull-left"></i>
    <a href="../../index.html" class="wy-nav-top-logo"
      ><img src="../../_static/MLflow-logo-final-black.png" alt="MLflow"
    /></a>
    <span class="version">2.9.3.dev0</span>
  </li>
</ul>
  </nav>
  <page>
    

    <nav data-toggle="wy-nav-shift" class="wy-nav-side relative">
      <div class="wy-side-scroll">
  <div class="wy-side-nav-search">
    

    

    
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
  <input type="text" name="q" placeholder="Search" />
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
  </form>
</div>


    
  </div>

  <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
    
      <a href="../../index.html" class="main-navigation-home"><img src="../../_static/icons/nav-home.svg"> MLflow</a>
    

    
      

      
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">What is MLflow?</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Getting Started with MLflow</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../index.html#guidance-on-running-tutorials">Guidance on Running Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#getting-started-guides">Getting Started Guides</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html#further-learning-what-s-next">Further Learning - What’s Next?</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Tutorial Overview</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="step1-tracking-server.html">Starting the MLflow Tracking Server</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">Using the MLflow Client API</a></li>
<li class="toctree-l4"><a class="reference internal" href="step3-create-experiment.html">Creating Experiments</a></li>
<li class="toctree-l4"><a class="reference internal" href="step4-experiment-search.html">Searching Experiments</a></li>
<li class="toctree-l4"><a class="reference internal" href="step5-synthetic-data.html">Create a dataset about apples</a></li>
<li class="toctree-l4"><a class="reference internal" href="step6-logging-a-run.html">Logging our first runs with MLflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="notebooks/index.html">Logging Your First MLflow Model Notebook</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../new-features/index.html">New Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../llms/index.html">LLMs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model-evaluation/index.html">Model Evaluation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deep-learning/index.html">Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../traditional-ml/index.html">Traditional ML</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/index.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tracking.html">MLflow Tracking</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../system-metrics/index.html">System Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../projects.html">MLflow Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">MLflow Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../model-registry.html">MLflow Model Registry</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../recipes.html">MLflow Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../plugins.html">MLflow Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../auth/index.html">MLflow Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../cli.html">Command-Line Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../search-runs.html">Search Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../search-experiments.html">Search Experiments</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_api/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../R-api.html">R API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../java_api/index.html">Java API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rest-api.html">REST API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../docker.html">Official MLflow Docker Image</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../community-model-flavors.html">Community Model Flavors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorials-and-examples/index.html">Tutorials and Examples</a></li>
</ul>

      
    
  </div>

  <div role="contentinfo">
    

    <p>
      <a id='feedbacklink' href="https://github.com/mlflow/mlflow/blob/master/CONTRIBUTING.md" target="_blank">Contribute</a>
    </p>
  </div>
</div>
    </nav>

    <main class="wy-grid-for-nav">
      <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
        <div class="wy-nav-content">
          <div class="rst-content">
            










<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Documentation</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="../index.html">Getting Started with MLflow</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
        <li><a href="index.html">Tutorial Overview</a> <span class="db-icon db-icon-chevron-right"></span></li>
    
    
      <li>Using the MLflow Client API</li>
    
    
    <!-- <li class="wy-breadcrumbs-aside">
      <a href="https://github.com/mlflow/mlflow/blob/master/docs/source/getting-started/logging-first-model/step2-mlflow-client.rst" class="fa fa-github"> Edit on GitHub</a>
    </li> -->
    
  </ul>
</div>
            <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
              <div itemprop="articleBody">
                
  <div class="section" id="using-the-mlflow-client-api">
<h1>Using the MLflow Client API<a class="headerlink" href="#using-the-mlflow-client-api" title="Permalink to this headline"> </a></h1>
<p>In the previous section, we started an instance of the MLflow Tracking Server and the MLflow UI.
For this stage, we’re going to be interfacing with the Tracking Server through one of the primary mechanisms
that you will use when training ML models, the <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient" title="mlflow.client.MlflowClient"><code class="xref py py-class docutils literal notranslate"><span class="pre">MlflowClient</span></code></a>.
For the duration of this tutorial, this client API will be your primary interface for MLflow’s tracking
capabilities, enabling you to:</p>
<ul class="simple">
<li><p>Initiate a new Experiment.</p></li>
<li><p>Start Runs within an Experiment.</p></li>
<li><p>Document parameters, metrics, and tags for your Runs.</p></li>
<li><p>Log artifacts linked to runs, such as models, tables, plots, and more.</p></li>
</ul>
<div class="section" id="importing-dependencies">
<h2>Importing Dependencies<a class="headerlink" href="#importing-dependencies" title="Permalink to this headline"> </a></h2>
<p>In order to use the MLflowClient API, the initial step involves importing the necessary modules.</p>
<div class="code-section docutils container">
<div class="highlight-python notranslate" id="imports"><div class="highlight"><pre><span></span><span class="hll"><span class="kn">from</span> <span class="nn">mlflow</span> <span class="kn">import</span> <span class="n">MlflowClient</span>
</span><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="n">pprint</span>
<span class="kn">from</span> <span class="nn">sklearn.ensemble</span> <span class="kn">import</span> <span class="n">RandomForestRegressor</span>
</pre></div>
</div>
</div>
<p>With these modules imported, you’re now prepared to configure the client and relay specifics about the location of your tracking server.</p>
</div>
<div class="section" id="configuring-the-mlflow-tracking-client">
<h2>Configuring the MLflow Tracking Client<a class="headerlink" href="#configuring-the-mlflow-tracking-client" title="Permalink to this headline"> </a></h2>
<p>By default, barring any modifications to the <code class="docutils literal notranslate"><span class="pre">MLFLOW_TRACKING_URI</span></code> environment variable, initializing
the MlflowClient will designate your local storage as the tracking server.
This means your experiments, data, models, and related attributes will be stored within the active execution directory.</p>
<p>For the context of this guide, we’ll utilize the tracking server initialized earlier in the documentation, instead of using the
client to log to the local file system directory.</p>
<p>In order to connect to the tracking server that we created in the previous section of this tutorial, we’ll need to use the uri that we
assigned the server when we started it. The two components that we submitted as arguments to the <code class="docutils literal notranslate"><span class="pre">mlflow</span> <span class="pre">server</span></code> command were the
<code class="docutils literal notranslate"><span class="pre">host</span></code> and the <code class="docutils literal notranslate"><span class="pre">port</span></code>. Combined, these form the <code class="docutils literal notranslate"><span class="pre">tracking_uri</span></code> argument that we will specify to start an instance of the client.</p>
<div class="code-section docutils container">
<div class="highlight-python notranslate" id="client"><div class="highlight"><pre><span></span><span class="n">client</span> <span class="o">=</span> <span class="n">MlflowClient</span><span class="p">(</span><span class="n">tracking_uri</span><span class="o">=</span><span class="s2">&quot;http://127.0.0.1:8080&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We now have a client interface to the tracking server that can both send data to and retrieve data from the tracking server.</p>
</div>
<div class="section" id="the-default-experiment">
<h2>The Default Experiment<a class="headerlink" href="#the-default-experiment" title="Permalink to this headline"> </a></h2>
<p>Before we get to logging anything to the Tracking Server, let’s take a look at a key feature that exists at the outset of starting any MLflow
Tracking Server: the Default Experiment.</p>
<p>The Default Experiment is a placeholder that is used to encapsulate all run information if an explicit Experiment is not declared.
While using MLflow, you’ll be creating new experiments in order to organize projects, project iterations, or logically group large modeling activities
together in a grouped hierarchical collection. However, if you manage to forget to create a new Experiment before using the MLflow tracking
capabilities, the Default Experiment is a fallback for you to ensure that your valuable tracking data is not lost when executing a run.</p>
<p>Let’s see what this Default Experiment looks like by using the <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient.search_experiments" title="mlflow.client.MlflowClient.search_experiments"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.client.MlflowClient.search_experiments()</span></code></a> API.</p>
</div>
<div class="section" id="searching-experiments">
<h2>Searching Experiments<a class="headerlink" href="#searching-experiments" title="Permalink to this headline"> </a></h2>
<p>The first thing that we’re going to do is to view the metadata associated with the Experiments that are on the server. We can accomplish this through the
use of the <a class="reference internal" href="../../python_api/mlflow.client.html#mlflow.client.MlflowClient.search_experiments" title="mlflow.client.MlflowClient.search_experiments"><code class="xref py py-func docutils literal notranslate"><span class="pre">mlflow.client.MlflowClient.search_experiments()</span></code></a> API. Let’s issue a search query to see what the results are.</p>
<div class="code-section docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">all_experiments</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">search_experiments</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">all_experiments</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text">Output result</span><a class="headerlink" href="#id1" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>&lt;Experiment:<span class="w"> </span><span class="nv">artifact_location</span><span class="o">=</span><span class="s1">&#39;./mlruns/0&#39;</span>,<span class="w"> </span><span class="nv">creation_time</span><span class="o">=</span>None,<span class="w"> </span><span class="nv">experiment_id</span><span class="o">=</span><span class="s1">&#39;0&#39;</span>,<span class="w"> </span><span class="nv">last_update_time</span><span class="o">=</span>None,<span class="w"> </span><span class="nv">lifecycle_stage</span><span class="o">=</span><span class="s1">&#39;active&#39;</span>,<span class="w"> </span><span class="nv">name</span><span class="o">=</span><span class="s1">&#39;Default&#39;</span>,<span class="w"> </span><span class="nv">tags</span><span class="o">={}</span>&gt;<span class="o">]</span>
</pre></div>
</div>
</div>
<p>It is worth noting that the return type of the <code class="docutils literal notranslate"><span class="pre">search_experiments()</span></code> API is not a basic collection structure. Rather, it is a list of
<code class="docutils literal notranslate"><span class="pre">Experiment</span></code> objects. Many of the return values of MLflow’s client APIs return objects that contain metadata attributes associated with the task being performed. This
is an important aspect to remember, as it makes more complex sequences of actions easier to perform, which will be covered in later tutorials.</p>
<p>With the returned collection, we can iterate over these objects with a comprehension to access the specific metadata attributes of the <cite>Default</cite> experiment.</p>
<p>To get familiar with accessing elements from returned collections from MLflow APIs, let’s extract the <code class="docutils literal notranslate"><span class="pre">name</span></code> and the <code class="docutils literal notranslate"><span class="pre">lifecycle_stage</span></code> from the <code class="docutils literal notranslate"><span class="pre">search_experiments()</span></code>
query and extract these attributes into a dict.</p>
<div class="code-section docutils container">
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">default_experiment</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">experiment</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;lifecycle_stage&quot;</span><span class="p">:</span> <span class="n">experiment</span><span class="o">.</span><span class="n">lifecycle_stage</span><span class="p">}</span>
    <span class="k">for</span> <span class="n">experiment</span> <span class="ow">in</span> <span class="n">all_experiments</span>
    <span class="k">if</span> <span class="n">experiment</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;Default&quot;</span>
<span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="n">pprint</span><span class="p">(</span><span class="n">default_experiment</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="id2">
<div class="code-block-caption"><span class="caption-text">Default Experiment name and stage as a dict</span><a class="headerlink" href="#id2" title="Permalink to this code"> </a></div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">{</span><span class="s1">&#39;name&#39;</span>:<span class="w"> </span><span class="s1">&#39;Default&#39;</span>,<span class="w"> </span><span class="s1">&#39;lifecycle_stage&#39;</span>:<span class="w"> </span><span class="s1">&#39;active&#39;</span><span class="o">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="running-it">
<h2>Running it<a class="headerlink" href="#running-it" title="Permalink to this headline"> </a></h2>
<div class="figure align-center" id="id3">
<a class="reference internal image-reference" href="../../_images/default-experiment.gif"><img alt="Exploring the Default Experiment" src="../../_images/default-experiment.gif" style="width: 1024px;" /></a>
<p class="caption"><span class="caption-text">Using the MLflow Client’s search_experiments() API to view the Default Experiment</span><a class="headerlink" href="#id3" title="Permalink to this image"> </a></p>
</div>
<p>In the next step, we’ll create our first experiment and dive into the options that are available for
providing metadata information that helps to keep track of related experiments and organize our
runs within experiments so that we can effectively compare the results of different parameters
for training runs.</p>
</div>
</div>


              </div>
            </div>
            <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="step1-tracking-server.html" class="btn btn-neutral" title="Starting the MLflow Tracking Server" accesskey="p"><span class="db-icon db-icon-chevron-left"></span> Previous</a>
      
      
        <a href="step3-create-experiment.html" class="btn btn-neutral" title="Creating Experiments" accesskey="n">Next <span class="db-icon db-icon-chevron-right"></span></a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
      <p class="copyright">
          &copy; MLflow Project, a Series of LF Projects, LLC. All rights reserved.
      </p>

  </div> 

</footer>
          </div>
        </div>
      </section>
    </main>
  </page>

  


  
  <script type="text/javascript">
    var DOCUMENTATION_OPTIONS = {
      URL_ROOT:'../../',
      VERSION:'2.9.3.dev0',
      COLLAPSE_INDEX:false,
      FILE_SUFFIX:'.html',
      LINK_SUFFIX: '.html',
      HAS_SOURCE:  true
    };
  </script>

  

  <script type="text/javascript" src="../../_static/js/clipboard.min.js"></script>
  <script type="text/javascript" src="../../_static/js/jquery.waypoints.min.js"></script>

  
  
  
  <script type="text/javascript">var CLIPPY_SVG_PATH = "../../_static/clippy.svg";</script>
  <script type="text/javascript" src="../../_static/js/custom.js"></script>
  

  
  
  <script type="text/javascript">
    jQuery(function () {
      SphinxRtdTheme.StickyNav.enable();
    });

  </script>
  

  
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        function copyToClipboard(text) {
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
        }
        // Get the code block designator class entries
        const allHighlights = document.querySelectorAll('.highlight');
        // Disable copyable links for notebook cell numbering and for cell outputs
        const highlights = Array.from(allHighlights).filter(highlight => !highlight.closest('.highlight-none') && 
            !highlight.closest('.nboutput'));
    
        highlights.forEach(function(highlight) {
            const copyIcon = document.createElement('span');
            copyIcon.classList.add('copy-icon');
            copyIcon.innerHTML = '&#xf0ea;';

            copyIcon.addEventListener('click', function() {
                const code = highlight.querySelector('pre').textContent;
                copyToClipboard(code);

                // Flash effect on click
                this.style.color = '#0194E2';
                setTimeout(() => {
                    this.style.color = ''; 
                }, 100);

                // Display "Code copied to clipboard" near the clicked icon
                const message = document.createElement('span');
                message.textContent = "Copied!";
                message.classList.add('copy-message'); 

                // Append the message to the icon
                this.appendChild(message);

                setTimeout(() => {
                    this.removeChild(message);
                }, 500);
            });

            highlight.appendChild(copyIcon);
        });
    });
  </script>


<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
        // Force download for notebook-download-btn
        const downloadButtons = document.querySelectorAll('.notebook-download-btn');
        downloadButtons.forEach(function(button) {
            button.addEventListener('click', function(event) {
                event.preventDefault(); // Prevent default behavior

                // Fetch the raw content of the notebook from GitHub
                fetch(button.href)
                    .then(response => response.blob())
                    .then(blob => {
                        const url = window.URL.createObjectURL(blob);
                        const link = document.createElement('a');
                        link.style.display = 'none';
                        link.href = url;
                        const filename = button.href.split('/').pop();
                        link.download = filename; 

                        document.body.appendChild(link);
                        link.click();

                        window.URL.revokeObjectURL(url);
                        document.body.removeChild(link);
                    })
                    .catch(err => console.error('Error fetching the notebook:', err));
            });
        });
    });
</script> 
</body>
</html>