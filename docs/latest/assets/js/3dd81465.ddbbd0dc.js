"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[194],{11470:(e,t,l)=>{l.d(t,{A:()=>j});var n=l(96540),a=l(34164),r=l(17559),i=l(23104),o=l(56347),s=l(205),c=l(57485),p=l(31682),m=l(70679);function f(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:t,children:l}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return f(e).map(({props:{value:e,label:t,attributes:l,default:n}})=>({value:e,label:t,attributes:l,default:n}))}(l);return function(e){const t=(0,p.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,l])}function u({value:e,tabValues:t}){return t.some(t=>t.value===e)}function d({queryString:e=!1,groupId:t}){const l=(0,o.W6)(),a=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(a),(0,n.useCallback)(e=>{if(!a)return;const t=new URLSearchParams(l.location.search);t.set(a,e),l.replace({...l.location,search:t.toString()})},[a,l])]}function w(e){const{defaultValue:t,queryString:l=!1,groupId:a}=e,r=h(e),[i,o]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!u({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const l=t.find(e=>e.default)??t[0];if(!l)throw new Error("Unexpected error: 0 tabValues");return l.value}({defaultValue:t,tabValues:r})),[c,p]=d({queryString:l,groupId:a}),[f,w]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[l,a]=(0,m.Dv)(t);return[l,(0,n.useCallback)(e=>{t&&a.set(e)},[t,a])]}({groupId:a}),g=(()=>{const e=c??f;return u({value:e,tabValues:r})?e:null})();(0,s.A)(()=>{g&&o(g)},[g]);return{selectedValue:i,selectValue:(0,n.useCallback)(e=>{if(!u({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);o(e),p(e),w(e)},[p,w,r]),tabValues:r}}var g=l(92303);const _={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=l(74848);function b({className:e,block:t,selectedValue:l,selectValue:n,tabValues:r}){const o=[],{blockElementScrollPositionUntilNextRender:s}=(0,i.a_)(),c=e=>{const t=e.currentTarget,a=o.indexOf(t),i=r[a].value;i!==l&&(s(t),n(i))},p=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const l=o.indexOf(e.currentTarget)+1;t=o[l]??o[0];break}case"ArrowLeft":{const l=o.indexOf(e.currentTarget)-1;t=o[l]??o[o.length-1];break}}t?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:r.map(({value:e,label:t,attributes:n})=>(0,y.jsx)("li",{role:"tab",tabIndex:l===e?0:-1,"aria-selected":l===e,ref:e=>{o.push(e)},onKeyDown:p,onClick:c,...n,className:(0,a.A)("tabs__item",_.tabItem,n?.className,{"tabs__item--active":l===e}),children:t??e},e))})}function v({lazy:e,children:t,selectedValue:l}){const r=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===l);return e?(0,n.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:r.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==l}))})}function x(e){const t=w(e);return(0,y.jsxs)("div",{className:(0,a.A)(r.G.tabs.container,"tabs-container",_.tabList),children:[(0,y.jsx)(b,{...t,...e}),(0,y.jsx)(v,{...t,...e})]})}function j(e){const t=(0,g.A)();return(0,y.jsx)(x,{...e,children:f(e.children)},String(t))}},19365:(e,t,l)=>{l.d(t,{A:()=>i});l(96540);var n=l(34164);const a={tabItem:"tabItem_Ymn6"};var r=l(74848);function i({children:e,hidden:t,className:l}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,n.A)(a.tabItem,l),hidden:t,children:e})}},28453:(e,t,l)=>{l.d(t,{R:()=>i,x:()=>o});var n=l(96540);const a={},r=n.createContext(a);function i(e){const t=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),n.createElement(r.Provider,{value:t},e.children)}},49374:(e,t,l)=>{l.d(t,{B:()=>o});l(96540);const n=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.promptflow":"api_reference/python_api/mlflow.promptflow.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}');var a=l(86025),r=l(74848);const i=e=>{const t=e.split(".");for(let l=t.length;l>0;l--){const e=t.slice(0,l).join(".");if(n[e])return e}return null};function o({fn:e,children:t,hash:l}){const o=i(e);if(!o)return(0,r.jsx)(r.Fragment,{children:t});const s=(0,a.default)(`/${n[o]}#${l??e}`);return(0,r.jsx)("a",{href:s,target:"_blank",children:t??(0,r.jsxs)("code",{children:[e,"()"]})})}},51012:(e,t,l)=>{l.r(t),l.d(t,{assets:()=>c,contentTitle:()=>s,default:()=>f,frontMatter:()=>o,metadata:()=>n,toc:()=>p});const n=JSON.parse('{"id":"tracing/integrations/listing/vercelai","title":"Tracing Vercel AI SDK","description":"MLflow Tracing provides automatic tracing for applications built with the Vercel AI SDK (the ai package), unlocking powerful observability capabilities for TypeScript and Javascript application developers.","source":"@site/docs/genai/tracing/integrations/listing/vercelai.mdx","sourceDirName":"tracing/integrations/listing","slug":"/tracing/integrations/listing/vercelai","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/vercelai","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3,"sidebar_label":"Vercel AI SDK"},"sidebar":"genAISidebar","previous":{"title":"Txtai","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/txtai"},"next":{"title":"Anthropic","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/anthropic"}}');var a=l(74848),r=l(28453),i=(l(49374),l(66927));l(11470),l(19365);const o={sidebar_position:3,sidebar_label:"Vercel AI SDK"},s="Tracing Vercel AI SDK",c={},p=[{value:"Quickstart (JS / TS)",id:"quickstart-js--ts",level:2},{value:"Streaming",id:"streaming",level:2},{value:"Token usage",id:"token-usage",level:2},{value:"Disable auto-tracing",id:"disable-auto-tracing",level:2}];function m(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"tracing-vercel-ai-sdk",children:"Tracing Vercel AI SDK"})}),"\n",(0,a.jsx)(i.A,{src:"/images/llms/tracing/vercel-ai-tracing.gif",alt:"Vercel AI SDK tracing via MLflow"}),"\n",(0,a.jsxs)(t.p,{children:[(0,a.jsx)(t.a,{href:"/genai/tracing",children:"MLflow Tracing"})," provides automatic tracing for applications built with the ",(0,a.jsx)(t.a,{href:"https://ai-sdk.dev/",children:"Vercel AI SDK"})," (the ",(0,a.jsx)(t.code,{children:"ai"})," package), unlocking powerful observability capabilities for TypeScript and Javascript application developers."]}),"\n",(0,a.jsx)(t.p,{children:"When the integration is enabled, MLflow traces automatically records the following information for Vercel AI SDK calls:"}),"\n",(0,a.jsxs)(t.ul,{children:["\n",(0,a.jsx)(t.li,{children:"Prompts or messages and generated responses"}),"\n",(0,a.jsx)(t.li,{children:"Latencies"}),"\n",(0,a.jsx)(t.li,{children:"Call hierarchy"}),"\n",(0,a.jsx)(t.li,{children:"Token usage when the provider returns it"}),"\n",(0,a.jsx)(t.li,{children:"Any exception if raised"}),"\n"]}),"\n",(0,a.jsx)(t.h2,{id:"quickstart-js--ts",children:"Quickstart (JS / TS)"}),"\n",(0,a.jsx)(t.p,{children:"Install the Vercel AI SDK and MLflow integration packages."}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash",children:"npm install ai @ai-sdk/openai mlflow-tracing mlflow-vercel\n"})}),"\n",(0,a.jsxs)(t.p,{children:["Initialize MLflow in your app and call the AI SDK as usual. Set ",(0,a.jsx)(t.code,{children:"experimental_telemetry.isEnabled"})," to ",(0,a.jsx)(t.code,{children:"true"})," to allow the integration to capture inputs/outputs and usage."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import * as mlflow from 'mlflow-tracing';\nimport { generateText } from 'ai';\nimport { openai } from '@ai-sdk/openai';\n\n// Connect to your MLflow Tracking Server\nmlflow.init({\n  trackingUri: 'http://localhost:5000',\n  experimentId: '<your-experiment-id>'\n});\n\n// Make an AI SDK call with telemetry enabled\nconst result = await generateText({\n  model: openai('gpt-4o-mini'),\n  prompt: 'What is MLflow?',\n  // IMPORTANT: enable telemetry is required for tracing\n  experimental_telemetry: { isEnabled: true }\n});\n\nconsole.log(result.text);\n"})}),"\n",(0,a.jsx)(t.h2,{id:"streaming",children:"Streaming"}),"\n",(0,a.jsxs)(t.p,{children:["Streaming is supported as well. Similarly to the ",(0,a.jsx)(t.code,{children:"generateText"})," function, specify the ",(0,a.jsx)(t.code,{children:"experimental_telemetry.isEnabled"})," option to ",(0,a.jsx)(t.code,{children:"true"})," to enable tracing."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"import { streamText } from 'ai';\nimport { openai } from '@ai-sdk/openai';\n\nconst stream = await streamText({\n  model: openai('gpt-4o-mini'),\n  prompt: 'Explain vector databases in one paragraph.',\n  experimental_telemetry: { isEnabled: true }\n});\n\nfor await (const part of stream.textStream) {\n  process.stdout.write(part);\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"token-usage",children:"Token usage"}),"\n",(0,a.jsx)(t.p,{children:"When the underlying provider supplies token usage (e.g., input and output tokens), MLflow aggregates it on the trace.\nYou can retrieve it from the trace info using the TypeScript SDK:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-typescript",children:"// Flush any pending spans then fetch the most recent trace\nawait mlflow.flushTraces();\nconst lastTraceId = mlflow.getLastActiveTraceId();\n\nif (lastTraceId) {\n  const client = new mlflow.MlflowClient({ trackingUri: 'http://localhost:5000' });\n  const trace = await client.getTrace(lastTraceId);\n  console.log('Token usage:', trace.info.tokenUsage);  // { input_tokens, output_tokens, total_tokens }\n}\n"})}),"\n",(0,a.jsx)(t.h2,{id:"disable-auto-tracing",children:"Disable auto-tracing"}),"\n",(0,a.jsxs)(t.p,{children:["Disable tracing for Vercel AI SDK, set ",(0,a.jsx)(t.code,{children:"experimental_telemetry: { isEnabled: false }"})," on the AI SDK call"]})]})}function f(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}},66927:(e,t,l)=>{l.d(t,{A:()=>i});l(96540);const n={container:"container_JwLF",imageWrapper:"imageWrapper_RfGN",image:"image_bwOA",caption:"caption_jo2G"};var a=l(86025),r=l(74848);function i({src:e,alt:t,width:l,caption:i,className:o}){return(0,r.jsxs)("div",{className:`${n.container} ${o||""}`,children:[(0,r.jsx)("div",{className:n.imageWrapper,style:l?{width:l}:{},children:(0,r.jsx)("img",{src:(0,a.default)(e),alt:t,className:n.image})}),i&&(0,r.jsx)("p",{className:n.caption,children:i})]})}}}]);