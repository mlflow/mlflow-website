"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["6113"],{21783(e,r,n){n.r(r),n.d(r,{metadata:()=>t,default:()=>m,frontMatter:()=>c,contentTitle:()=>h,toc:()=>f,assets:()=>d});var t=JSON.parse('{"id":"architecture/tracking-server","title":"MLflow Tracking Server","description":"MLflow tracking server is a stand-alone HTTP server that serves multiple REST API endpoints for tracking runs/experiments.","source":"@site/docs/self-hosting/architecture/tracking-server.mdx","sourceDirName":"architecture","slug":"/architecture/tracking-server","permalink":"/mlflow-website/docs/latest/self-hosting/architecture/tracking-server","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"sidebar_label":"Tracking Server"},"sidebar":"selfHostingSidebar","previous":{"title":"Overview","permalink":"/mlflow-website/docs/latest/self-hosting/architecture/overview"},"next":{"title":"Backend Store","permalink":"/mlflow-website/docs/latest/self-hosting/architecture/backend-store"}}'),i=n(74848),s=n(28453),o=n(78010),l=n(57250),a=n(54725);let c={sidebar_label:"Tracking Server"},h="MLflow Tracking Server",d={},f=[{value:"Start the Tracking Server",id:"start-the-tracking-server",level:2},{value:"Logging to a Tracking Server",id:"logging_to_a_tracking_server",level:2},{value:"Configure Server",id:"configure-server",level:2},{value:"Backend Store",id:"backend-store",level:3},{value:"Remote artifacts store",id:"tracking-server-artifact-store",level:3},{value:"Using the Tracking Server for proxied artifact access (default)",id:"using-the-tracking-server-for-proxied-artifact-access-default",level:4},{value:"Use tracking server w/o proxying artifacts access",id:"tracking-server-no-proxy",level:4},{value:"Optionally using a Tracking Server instance exclusively for artifact handling",id:"tracking-server-artifacts-only",level:4},{value:"Secure Tracking Server",id:"tracking-auth",level:2},{value:"Built-in Security Middleware",id:"built-in-security-middleware",level:3},{value:"Authentication and Encryption",id:"authentication-and-encryption",level:3},{value:"Tracking Server versioning",id:"tracking-server-versioning",level:2},{value:"Model Version Source Validation",id:"model-version-source-validation",level:2},{value:"Configuration",id:"configuration",level:3},{value:"Example: Restricting to MLflow Artifacts",id:"example-restricting-to-mlflow-artifacts",level:3},{value:"Example: Restricting to Specific S3 Buckets",id:"example-restricting-to-specific-s3-buckets",level:3},{value:"Fetching Server Version",id:"fetching-server-version",level:2},{value:"Handling timeout when uploading/downloading large artifacts",id:"handling-timeout-when-uploadingdownloading-large-artifacts",level:2},{value:"Full List of Command Line Options",id:"full-list-of-command-line-options",level:2}];function p(e){let r={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.header,{children:(0,i.jsx)(r.h1,{id:"mlflow-tracking-server",children:"MLflow Tracking Server"})}),"\n",(0,i.jsx)(r.p,{children:"MLflow tracking server is a stand-alone HTTP server that serves multiple REST API endpoints for tracking runs/experiments.\nWhile MLflow Tracking can be used in local environment, hosting a tracking server is powerful in the team development\nworkflow:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Collaboration"}),": Multiple users can log runs to the same endpoint, and query runs and models logged by other users."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Sharing Results"}),": The tracking server also serves ",(0,i.jsx)(r.a,{href:"/ml/tracking#tracking_ui",children:"Tracking UI"})," endpoint, where team members can easily explore each other's results."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Centralized Access"}),": The tracking server can be run as a proxy for the remote access for metadata and artifacts, making it easier to secure and audit access to data."]}),"\n"]}),"\n",(0,i.jsx)(r.h2,{id:"start-the-tracking-server",children:"Start the Tracking Server"}),"\n",(0,i.jsx)(r.p,{children:"Starting the tracking server is as simple as running the following command:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"mlflow server --host 127.0.0.1 --port 8080\n"})}),"\n",(0,i.jsx)(r.p,{children:"Once the server starts running, you should see the following output:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:"INFO:     Started server process [28550]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://127.0.0.1:8080 (Press CTRL+C to quit)\n"})}),"\n",(0,i.jsxs)(r.p,{children:["There are many options to configure the server, refer to ",(0,i.jsx)(r.a,{href:"#configure-server",children:"Configure Server"})," for more details."]}),"\n",(0,i.jsxs)(r.admonition,{title:"important",type:"warning",children:[(0,i.jsxs)(r.p,{children:["The server listens on ",(0,i.jsx)(r.a,{href:"http://localhost:5000",children:"http://localhost:5000"})," by default and only accepts\nconnections from the local machine. To let the server accept connections\nfrom other machines, you will need to pass ",(0,i.jsx)(r.code,{children:"--host 0.0.0.0"})," to listen on\nall network interfaces (or a specific interface address). This is typically\nrequired configuration when running the server ",(0,i.jsx)(r.strong,{children:"in a Kubernetes pod or a\nDocker container"}),"."]}),(0,i.jsxs)(r.p,{children:["MLflow 3.5.0+ includes built-in security middleware to protect against DNS rebinding\nand CORS attacks. When using ",(0,i.jsx)(r.code,{children:"--host 0.0.0.0"}),", configure the ",(0,i.jsx)(r.code,{children:"--allowed-hosts"})," option\nto specify which domains can access your server. See ",(0,i.jsx)(r.a,{href:"/self-hosting/security/network",children:"Security Configuration"}),"\nfor details."]})]}),"\n",(0,i.jsxs)(r.admonition,{title:"Read-only Filesystems",type:"tip",children:[(0,i.jsxs)(r.p,{children:["When running in containers with read-only root filesystems (common in Kubernetes with ",(0,i.jsx)(r.code,{children:"securityContext.readOnlyRootFilesystem: true"}),"),\nconfigure remote artifact storage using ",(0,i.jsx)(r.code,{children:"--artifacts-destination"})," (artifact serving is enabled by default). The tracking server does not create\nlocal directories at startup when using remote artifact storage, making it compatible with read-only environments."]}),(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"mlflow server \\\n    --host 0.0.0.0 \\\n    --backend-store-uri postgresql://user:pass@host/db \\\n    --artifacts-destination s3://my-bucket\n"})})]}),"\n",(0,i.jsx)(r.h2,{id:"logging_to_a_tracking_server",children:"Logging to a Tracking Server"}),"\n",(0,i.jsxs)(r.p,{children:["Once the tracking server is started, connect your local clients by setting the ",(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_URI"})," environment variable to the\nserver's URI, along with its scheme and port (for example, ",(0,i.jsx)(r.code,{children:"http://10.0.0.1:5000"}),") or call ",(0,i.jsx)(a.B,{fn:"mlflow.set_tracking_uri"}),"."]}),"\n",(0,i.jsxs)(r.p,{children:["MLflow APIs like ",(0,i.jsx)(a.B,{fn:"mlflow.start_run"}),", ",(0,i.jsx)(a.B,{fn:"mlflow.log_param"}),", ",(0,i.jsx)(a.B,{fn:"mlflow.start_trace"})," make API requests to your remote tracking server and log the data."]}),"\n",(0,i.jsxs)(o.A,{children:[(0,i.jsx)(l.A,{default:!0,label:"Python",value:"python",children:(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import mlflow\n\nremote_server_uri = "..."  # set to your server URI, e.g. http://127.0.0.1:8080\nmlflow.set_tracking_uri(remote_server_uri)\nmlflow.set_experiment("/my-experiment")\n\n# Logging a run\nwith mlflow.start_run():\n    mlflow.log_param("a", 1)\n    mlflow.log_metric("b", 2)\n\n# Logging a trace\nwith mlflow.start_span(name="test_trace") as span:\n    span.set_inputs({"x": 1, "y": 2})\n    span.set_outputs(3)\n'})})}),(0,i.jsx)(l.A,{label:"TypeScript",value:"typescript",children:(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-typescript",children:'import * as mlflow from "mlflow-tracing";\n\nmlflow.init({\n    trackingUri: "<your-tracking-server-uri>",\n    experimentId: "<your-experiment-id>",\n});\n\nconst myFunc = mlflow.trace(\n    (a: number, b: number) => {\n        return a + b;\n    },\n    { name: \'my-func\' }\n)\nmyFunc(1, 2);\n'})})}),(0,i.jsx)(l.A,{label:"R",value:"r",children:(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-r",children:'library(mlflow)\ninstall_mlflow()\nremote_server_uri = "..." # set to your server URI\nmlflow_set_tracking_uri(remote_server_uri)\nmlflow_set_experiment("/my-experiment")\nmlflow_log_param("a", "1")\n'})})}),(0,i.jsx)(l.A,{label:"Scala",value:"scala",children:(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-scala",children:'import org.mlflow.tracking.MlflowClient\n\nval remoteServerUri = "..." // set to your server URI\nval client = new MlflowClient(remoteServerUri)\n\nval experimentId = client.createExperiment("my-experiment")\nclient.setExperiment(experimentId)\n\nval run = client.createRun(experimentId)\nclient.logParam(run.getRunId(), "a", "1")\n'})})})]}),"\n",(0,i.jsx)(r.h2,{id:"configure-server",children:"Configure Server"}),"\n",(0,i.jsxs)(r.p,{children:["This section describes how to configure the tracking server for some common use cases. The section requires you to have a basic knowledge about the tracking server architecture, please visit ",(0,i.jsx)(r.a,{href:"/self-hosting/architecture/overview",children:"Architecture Overview"})," if you are not familiar with it yet."]}),"\n",(0,i.jsx)(r.h3,{id:"backend-store",children:"Backend Store"}),"\n",(0,i.jsxs)(r.p,{children:["By default, the tracking server uses SQLite database (",(0,i.jsx)(r.code,{children:"sqlite:///mlflow.db"}),") to store runs metadata.\nYou can configure a different backend store by adding the ",(0,i.jsx)(r.code,{children:"--backend-store-uri"})," option:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",metastring:'title="Example"',children:"# Default: SQLite database (mlflow.db in current directory)\nmlflow server\n\n# PostgreSQL: connect to an existing PostgreSQL database\nmlflow server --backend-store-uri postgresql://username:password@host:port/database\n\n# File-based (legacy): use local filesystem under ./mlruns directory\nmlflow server --backend-store-uri ./mlruns\n"})}),"\n",(0,i.jsx)(r.p,{children:"SQLite is the default backend and provides good performance and reliability for most use cases. For production deployments with high concurrency, consider using PostgreSQL or MySQL."}),"\n",(0,i.jsx)(r.h3,{id:"tracking-server-artifact-store",children:"Remote artifacts store"}),"\n",(0,i.jsx)(r.h4,{id:"using-the-tracking-server-for-proxied-artifact-access-default",children:"Using the Tracking Server for proxied artifact access (default)"}),"\n",(0,i.jsxs)(r.p,{children:["By default, the tracking server stores artifacts in its local filesystem under ",(0,i.jsx)(r.code,{children:"./mlartifacts"})," directory. To configure\nthe tracking server to connect to remote storage and serve artifacts, start the server with ",(0,i.jsx)(r.code,{children:"--artifacts-destination"})," flag."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"mlflow server \\\n    --host 0.0.0.0 \\\n    --port 8885 \\\n    --artifacts-destination s3://my-bucket\n"})}),"\n",(0,i.jsx)(r.p,{children:"With this setting, MLflow server works as a proxy for accessing remote artifacts. The MLflow clients make HTTP request to the server for fetching artifacts."}),"\n",(0,i.jsx)(r.admonition,{title:"important",type:"warning",children:(0,i.jsxs)(r.p,{children:["If you are using remote storage, you have to configure the credentials for the server to access the artifacts. Be aware of that The MLflow artifact proxied\naccess service enables users to have an ",(0,i.jsx)(r.em,{children:"assumed role of access to all artifacts"})," that are accessible to the Tracking Server. Refer ",(0,i.jsx)(r.a,{href:"/self-hosting/architecture/artifact-store#artifacts-stores-manage-access",children:"Manage Access"})," for further details."]})}),"\n",(0,i.jsxs)(r.p,{children:["The tracking server resolves the uri ",(0,i.jsx)(r.code,{children:"mlflow-artifacts:/"}),' in tracking request from the client to an otherwise\nexplicit object store destination (e.g., "s3:/my_bucket/mlartifacts") for interfacing with artifacts. The following patterns will all resolve to the configured proxied object store location (in above example, ',(0,i.jsx)(r.code,{children:"s3://my-root-bucket/mlartifacts"}),"):"]}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"https://<host>:<port>/mlartifacts"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"http://<host>/mlartifacts"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"mlflow-artifacts://<host>/mlartifacts"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"mlflow-artifacts://<host>:<port>/mlartifacts"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"mlflow-artifacts:/mlartifacts"})}),"\n"]}),"\n",(0,i.jsx)(r.admonition,{title:"important",type:"warning",children:(0,i.jsx)(r.p,{children:"The MLflow client caches artifact location information on a per-run basis.\nIt is therefore not recommended to alter a run's artifact location before it has terminated."})}),"\n",(0,i.jsx)(r.h4,{id:"tracking-server-no-proxy",children:"Use tracking server w/o proxying artifacts access"}),"\n",(0,i.jsxs)(r.p,{children:["In some cases, you may want to directly access remote storage without proxying through the tracking server.\nIn this case, you can start the server with ",(0,i.jsx)(r.code,{children:"--no-serve-artifacts"})," flag, and setting ",(0,i.jsx)(r.code,{children:"--default-artifact-root"})," to the remote storage URI\nyou want to redirect the request to."]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"mlflow server --no-serve-artifacts --default-artifact-root s3://my-bucket\n"})}),"\n",(0,i.jsx)(r.p,{children:"With this setting, the MLflow client still makes minimum HTTP requests to the tracking server for fetching proper remote storage URI,\nbut can directly upload artifacts to / download artifacts from the remote storage. While this might not be a good practice for access and\nsecurity governance, it could be useful when you want to avoid the overhead of proxying artifacts through the tracking server."}),"\n",(0,i.jsxs)(r.admonition,{title:"Use the right configuration keys",type:"info",children:[(0,i.jsxs)(r.p,{children:["The two options ",(0,i.jsx)(r.code,{children:"--serve-artifacts"})," and ",(0,i.jsx)(r.code,{children:"--default-artifact-root"})," look similar, but they are used for different purposes. When you pick the wrong one, the artifact logging requests will not go through the expected route and may cause access issues. The rule of thumb is:"]}),(0,i.jsxs)(r.ol,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Want the server to proxy uploads?"})," Specify ",(0,i.jsx)(r.code,{children:"--artifacts-destination"})," option and ",(0,i.jsx)(r.strong,{children:"do not set"})," ",(0,i.jsx)(r.code,{children:"--default-artifact-root"}),". New experiments will get ",(0,i.jsx)(r.code,{children:"mlflow-artifacts:/..."})," run URIs and clients upload and download artifacts via the server. Credentials are managed by the tracking server and clients do not need to set them."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Want clients to write straight to storage?"})," Set ",(0,i.jsx)(r.code,{children:"--default-artifact-root"})," option and ",(0,i.jsx)(r.code,{children:"--no-serve-artifacts"}),". Runs will get ",(0,i.jsx)(r.code,{children:"s3://..."})," / ",(0,i.jsx)(r.code,{children:"gs://..."})," URIs and clients must have credentials to access the storage."]}),"\n"]})]}),"\n",(0,i.jsxs)(r.admonition,{type:"note",children:[(0,i.jsxs)(r.p,{children:["If the MLflow server is started with ",(0,i.jsx)(r.code,{children:"--no-serve-artifacts"})," option, the client directly pushes artifacts\nto the artifact store. It does not proxy these through the tracking server by default."]}),(0,i.jsxs)(r.p,{children:["For this reason, the client needs direct access to the artifact store. For instructions on setting up these credentials,\nsee ",(0,i.jsx)(r.a,{href:"/self-hosting/architecture/artifact-store#artifacts-stores-manage-access",children:"Artifact Stores documentation"}),"."]})]}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.p,{children:["When an experiment is created, the artifact storage location from the configuration of the tracking server is logged in the experiment's metadata.\nWhen enabling proxied artifact storage, any existing experiments that were created while operating a tracking server in\nnon-proxied mode will continue to use a non-proxied artifact location. In order to use proxied artifact logging, a new experiment must be created.\nIf the intention of enabling a tracking server in ",(0,i.jsx)(r.code,{children:"-serve-artifacts"})," mode is to eliminate the need for a client to have authentication to\nthe underlying storage, new experiments should be created for use by clients so that the tracking server can handle authentication after this migration."]})}),"\n",(0,i.jsx)(r.h4,{id:"tracking-server-artifacts-only",children:"Optionally using a Tracking Server instance exclusively for artifact handling"}),"\n",(0,i.jsx)(r.p,{children:"MLflow Tracking Server can be configured to use different backend store and artifact store, and provides a single endpoint for the clients."}),"\n",(0,i.jsxs)(r.p,{children:["However, if the volume of tracking server requests is sufficiently large and performance issues are noticed, a tracking server\ncan be configured to serve in ",(0,i.jsx)(r.code,{children:"--artifacts-only"})," mode, operating in tandem with an instance that\noperates with ",(0,i.jsx)(r.code,{children:"--no-serve-artifacts"})," specified. This configuration ensures that the processing of artifacts is isolated\nfrom all other tracking server event handling."]}),"\n",(0,i.jsxs)(r.p,{children:["When a tracking server is configured in ",(0,i.jsx)(r.code,{children:"--artifacts-only"})," mode, any tasks apart from those concerned with artifact\nhandling (i.e., model logging, loading models, logging artifacts, listing artifacts, etc.) will return an HTTPError.\nSee the following example of a client REST call in Python attempting to list experiments from a server that is configured in\n",(0,i.jsx)(r.code,{children:"--artifacts-only"})," mode:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"# Launch the artifact-only server\nmlflow server --artifacts-only ...\n"})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import requests\n\n# Attempt to list experiments from the server\nresponse = requests.get("http://0.0.0.0:8885/api/2.0/mlflow/experiments/list")\n'})}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-_",metastring:'title="Output"',children:">> HTTPError: Endpoint: /api/2.0/mlflow/experiments/list disabled due to the mlflow server running in `--artifacts-only` mode.\n"})}),"\n",(0,i.jsx)(r.p,{children:"Using an additional MLflow server to handle artifacts exclusively can be useful for large-scale MLOps infrastructure.\nDecoupling the longer running and more compute-intensive tasks of artifact handling from the faster and higher-volume\nmetadata functionality of the other Tracking API requests can help minimize the burden of an otherwise single MLflow\nserver handling both types of payloads."}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.p,{children:["If an MLflow server is running with the ",(0,i.jsx)(r.code,{children:"--artifacts-only"})," flag, the client should interact with this server explicitly by\nincluding either a ",(0,i.jsx)(r.code,{children:"host"})," or ",(0,i.jsx)(r.code,{children:"host:port"})," definition for uri location references for artifacts.\nOtherwise, all artifact requests will route to the MLflow Tracking server, defeating the purpose of running a distinct artifact server."]})}),"\n",(0,i.jsx)(r.h2,{id:"tracking-auth",children:"Secure Tracking Server"}),"\n",(0,i.jsx)(r.h3,{id:"built-in-security-middleware",children:"Built-in Security Middleware"}),"\n",(0,i.jsx)(r.p,{children:"MLflow 3.5.0+ includes security middleware that automatically protects against common web vulnerabilities:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"DNS Rebinding Protection"}),": Validates Host headers to prevent attacks on internal services"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"CORS Protection"}),": Controls which web applications can access your API"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Clickjacking Prevention"}),": X-Frame-Options header controls iframe embedding"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"Configure these features with simple command-line options:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'mlflow server --host 0.0.0.0 \\\n  --allowed-hosts "mlflow.company.com" \\\n  --cors-allowed-origins "https://app.company.com"\n'})}),"\n",(0,i.jsxs)(r.p,{children:["For detailed configuration options, see ",(0,i.jsx)(r.a,{href:"/self-hosting/security/network",children:"Security Configuration"}),"."]}),"\n",(0,i.jsx)(r.h3,{id:"authentication-and-encryption",children:"Authentication and Encryption"}),"\n",(0,i.jsx)(r.p,{children:"For production deployments, we recommend using a reverse proxy (NGINX, Apache httpd) or VPN to add:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"TLS/HTTPS encryption"})," for secure communication"]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.strong,{children:"Authentication"})," via proxy authentication headers"]}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"You can pass authentication headers to MLflow using these environment variables:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_USERNAME"})," and ",(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_PASSWORD"})," - username and password to use with HTTP\nBasic authentication. To use Basic authentication, you must set ",(0,i.jsx)(r.code,{children:"both"})," environment variables."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_TOKEN"})," - token to use with HTTP Bearer authentication. Basic authentication takes precedence if set."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_INSECURE_TLS"})," - If set to the literal ",(0,i.jsx)(r.code,{children:"true"}),", MLflow does not verify the TLS connection,\nmeaning it does not validate certificates or hostnames for ",(0,i.jsx)(r.code,{children:"https://"})," tracking URIs. This flag is not recommended for\nproduction environments. If this is set to ",(0,i.jsx)(r.code,{children:"true"})," then ",(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_SERVER_CERT_PATH"})," must not be set."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_SERVER_CERT_PATH"})," - Path to a CA bundle to use. Sets the ",(0,i.jsx)(r.code,{children:"verify"})," param of the\n",(0,i.jsx)(r.code,{children:"requests.request"})," function\n(see ",(0,i.jsx)(r.a,{href:"https://requests.readthedocs.io/en/master/api",children:"requests main interface"}),").\nWhen you use a self-signed server certificate you can use this to verify it on client side.\nIf this is set ",(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_INSECURE_TLS"})," must not be set (false)."]}),"\n",(0,i.jsxs)(r.li,{children:[(0,i.jsx)(r.code,{children:"MLFLOW_TRACKING_CLIENT_CERT_PATH"})," - Path to ssl client cert file (.pem). Sets the ",(0,i.jsx)(r.code,{children:"cert"})," param\nof the ",(0,i.jsx)(r.code,{children:"requests.request"})," function\n(see ",(0,i.jsx)(r.a,{href:"https://requests.readthedocs.io/en/master/api",children:"requests main interface"}),").\nThis can be used to use a (self-signed) client certificate."]}),"\n"]}),"\n",(0,i.jsxs)(r.p,{children:["For notebook integration and UI embedding options, see ",(0,i.jsx)(r.a,{href:"/self-hosting/security/network",children:"Network Security"})," configuration."]}),"\n",(0,i.jsx)(r.h2,{id:"tracking-server-versioning",children:"Tracking Server versioning"}),"\n",(0,i.jsxs)(r.p,{children:["The version of MLflow running on the server can be found by querying the ",(0,i.jsx)(r.code,{children:"/version"})," endpoint.\nThis can be used to check that the client-side version of MLflow is up-to-date with a remote tracking server prior to running experiments.\nFor example:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import requests\nimport mlflow\n\nresponse = requests.get("http://<mlflow-host>:<mlflow-port>/version")\nassert response.text == mlflow.__version__  # Checking for a strict version match\n'})}),"\n",(0,i.jsx)(r.h2,{id:"model-version-source-validation",children:"Model Version Source Validation"}),"\n",(0,i.jsx)(r.p,{children:"The tracking server can be configured to validate model version sources using a regular expression pattern. This security feature helps ensure that only model versions from approved sources are registered in your model registry."}),"\n",(0,i.jsx)(r.h3,{id:"configuration",children:"Configuration"}),"\n",(0,i.jsxs)(r.p,{children:["Set the ",(0,i.jsx)(r.code,{children:"MLFLOW_CREATE_MODEL_VERSION_SOURCE_VALIDATION_REGEX"})," environment variable when starting the tracking server:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'export MLFLOW_CREATE_MODEL_VERSION_SOURCE_VALIDATION_REGEX="^mlflow-artifacts:/.*$"\nmlflow server --host 0.0.0.0 --port 5000\n'})}),"\n",(0,i.jsxs)(r.p,{children:["When this environment variable is set, the tracking server will validate the ",(0,i.jsx)(r.code,{children:"source"})," parameter in model version creation requests against the specified regular expression pattern. If the source doesn't match the pattern, the request will be rejected with an error."]}),"\n",(0,i.jsx)(r.h3,{id:"example-restricting-to-mlflow-artifacts",children:"Example: Restricting to MLflow Artifacts"}),"\n",(0,i.jsx)(r.p,{children:"To only allow model versions from MLflow artifacts storage:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'export MLFLOW_CREATE_MODEL_VERSION_SOURCE_VALIDATION_REGEX="^mlflow-artifacts:/.*$"\nmlflow server --host 0.0.0.0 --port 5000\n'})}),"\n",(0,i.jsx)(r.p,{children:"With this configuration:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import mlflow\nfrom mlflow import MlflowClient\n\nclient = MlflowClient("http://localhost:5000")\n\n# This will work - source matches the pattern\nclient.create_model_version(\n    name="my-model",\n    source="mlflow-artifacts://1/artifacts/model",\n    run_id="abc123",\n)\n\n# This will fail - source doesn\'t match the pattern\nclient.create_model_version(\n    name="my-model",\n    source="s3://my-bucket/model",\n    run_id="def456",\n)  # Raises MlflowException: Invalid model version source\n'})}),"\n",(0,i.jsx)(r.h3,{id:"example-restricting-to-specific-s3-buckets",children:"Example: Restricting to Specific S3 Buckets"}),"\n",(0,i.jsx)(r.p,{children:"To only allow model versions from specific S3 buckets:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'export MLFLOW_CREATE_MODEL_VERSION_SOURCE_VALIDATION_REGEX="^s3://(production-models|staging-models)/.*$"\nmlflow server --host 0.0.0.0 --port 5000\n'})}),"\n",(0,i.jsx)(r.p,{children:"This pattern would allow sources like:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"s3://production-models/model-v1/"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"s3://staging-models/experiment-123/model/"})}),"\n"]}),"\n",(0,i.jsx)(r.p,{children:"But reject sources like:"}),"\n",(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"s3://untrusted-bucket/model/"})}),"\n",(0,i.jsx)(r.li,{children:(0,i.jsx)(r.code,{children:"file:///local/path/model"})}),"\n"]}),"\n",(0,i.jsx)(r.admonition,{type:"note",children:(0,i.jsxs)(r.ul,{children:["\n",(0,i.jsx)(r.li,{children:"If the environment variable is not set, no source validation is performed."}),"\n",(0,i.jsxs)(r.li,{children:["The validation only applies to the ",(0,i.jsx)(r.code,{children:"/mlflow/model-versions/create"})," API endpoint."]}),"\n",(0,i.jsxs)(r.li,{children:["The regular expression is applied using Python's ",(0,i.jsx)(r.code,{children:"re.search()"})," function."]}),"\n",(0,i.jsx)(r.li,{children:"Use standard regular expression syntax for pattern matching."}),"\n"]})}),"\n",(0,i.jsx)(r.h2,{id:"fetching-server-version",children:"Fetching Server Version"}),"\n",(0,i.jsxs)(r.p,{children:["The version of MLflow running on the server can be found by querying the ",(0,i.jsx)(r.code,{children:"/version"})," endpoint.\nThis can be used to check that the client-side version of MLflow is up-to-date with a remote tracking server prior to running experiments.\nFor example:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import requests\nimport mlflow\n\nresponse = requests.get("http://<mlflow-host>:<mlflow-port>/version")\nassert response.text == mlflow.__version__  # Checking for a strict version match\n'})}),"\n",(0,i.jsx)(r.h2,{id:"handling-timeout-when-uploadingdownloading-large-artifacts",children:"Handling timeout when uploading/downloading large artifacts"}),"\n",(0,i.jsx)(r.p,{children:"When uploading or downloading large artifacts through the tracking server with the artifact proxy enabled, the server may take a long time to process the request. If it exceeds the timeout limit, the server will terminate the request, resulting in a request failure on the client side."}),"\n",(0,i.jsx)(r.p,{children:"Example client code:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-python",children:'import mlflow\n\nmlflow.set_tracking_uri("<TRACKING_SERVER_URI>")\nwith mlflow.start_run():\n    mlflow.log_artifact("large.txt")\n'})}),"\n",(0,i.jsx)(r.p,{children:"Client traceback:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{children:'Traceback (most recent call last):\n  File "/Users/user/python3.10/site-packages/requests/adapters.py", line 486, in send\n    resp = conn.urlopen(\n  File "/Users/user/python3.10/site-packages/urllib3/connectionpool.py", line 826, in urlopen\n    return self.urlopen(\n  ...\n  File "/Users/user/python3.10/site-packages/urllib3/connectionpool.py", line 798, in urlopen\n    retries = retries.increment(\n  File "/Users/user/python3.10/site-packages/urllib3/util/retry.py", line 592, in increment\n    raise MaxRetryError(_pool, url, error or ResponseError(cause))\nurllib3.exceptions.MaxRetryError: HTTPSConnectionPool(host=\'mlflow.example.com\', port=443): Max retries exceeded with url: ... (Caused by SSLError(SSLEOFError(8, \'EOF occurred in violation of protocol (_ssl.c:2426)\')))\nDuring handling of the above exception, another exception occurred:\n'})}),"\n",(0,i.jsx)(r.p,{children:"Tracking server logs:"}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:"INFO:     Started server process [82]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\nINFO:     Uvicorn running on http://0.0.0.0:5000 (Press CTRL+C to quit)\n...\nWARNING:  Request timeout exceeded\nERROR:    Exception in ASGI application\n"})}),"\n",(0,i.jsxs)(r.p,{children:["To mitigate this issue, the timeout length can be increased by using the ",(0,i.jsx)(r.code,{children:"--uvicorn-opts"})," option when starting the server as shown below:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'mlflow server --uvicorn-opts "--timeout-keep-alive=120" ...\n'})}),"\n",(0,i.jsxs)(r.p,{children:["For users still using gunicorn (via ",(0,i.jsx)(r.code,{children:"--gunicorn-opts"}),"), the equivalent command would be:"]}),"\n",(0,i.jsx)(r.pre,{children:(0,i.jsx)(r.code,{className:"language-bash",children:'mlflow server --gunicorn-opts "--timeout=120" ...\n'})}),"\n",(0,i.jsxs)(r.p,{children:["See the ",(0,i.jsx)(r.a,{href:"https://www.uvicorn.org/settings/",children:"uvicorn settings documentation"})," for more configuration options."]}),"\n",(0,i.jsx)(r.h2,{id:"full-list-of-command-line-options",children:"Full List of Command Line Options"}),"\n",(0,i.jsxs)(r.p,{children:["Please run ",(0,i.jsx)(r.code,{children:"mlflow server --help"})," for the full list of command line options."]})]})}function m(e={}){let{wrapper:r}={...(0,s.R)(),...e.components};return r?(0,i.jsx)(r,{...e,children:(0,i.jsx)(p,{...e})}):p(e)}},57250(e,r,n){n.d(r,{A:()=>s});var t=n(74848);n(96540);var i=n(34164);function s({children:e,hidden:r,className:n}){return(0,t.jsx)("div",{role:"tabpanel",className:(0,i.A)("tabItem_Ymn6",n),hidden:r,children:e})}},78010(e,r,n){n.d(r,{A:()=>v});var t=n(74848),i=n(96540),s=n(34164),o=n(88287),l=n(28584),a=n(56347),c=n(99989),h=n(96629),d=n(80618),f=n(41367);function p(e){return i.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,i.isValidElement)(e)&&function(e){let{props:r}=e;return!!r&&"object"==typeof r&&"value"in r}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m({value:e,tabValues:r}){return r.some(r=>r.value===e)}var u=n(19863);function g({className:e,block:r,selectedValue:n,selectValue:i,tabValues:o}){let a=[],{blockElementScrollPositionUntilNextRender:c}=(0,l.a_)(),h=e=>{let r=e.currentTarget,t=o[a.indexOf(r)].value;t!==n&&(c(r),i(t))},d=e=>{let r=null;switch(e.key){case"Enter":h(e);break;case"ArrowRight":{let n=a.indexOf(e.currentTarget)+1;r=a[n]??a[0];break}case"ArrowLeft":{let n=a.indexOf(e.currentTarget)-1;r=a[n]??a[a.length-1]}}r?.focus()};return(0,t.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":r},e),children:o.map(({value:e,label:r,attributes:i})=>(0,t.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:h,...i,className:(0,s.A)("tabs__item","tabItem_LNqP",i?.className,{"tabs__item--active":n===e}),children:r??e},e))})}function x({lazy:e,children:r,selectedValue:n}){let o=(Array.isArray(r)?r:[r]).filter(Boolean);if(e){let e=o.find(e=>e.props.value===n);return e?(0,i.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,t.jsx)("div",{className:"margin-top--md",children:o.map((e,r)=>(0,i.cloneElement)(e,{key:r,hidden:e.props.value!==n}))})}function w(e){let r=function(e){let r,{defaultValue:n,queryString:t=!1,groupId:s}=e,o=function(e){let{values:r,children:n}=e;return(0,i.useMemo)(()=>{let e=r??p(n).map(({props:{value:e,label:r,attributes:n,default:t}})=>({value:e,label:r,attributes:n,default:t})),t=(0,d.XI)(e,(e,r)=>e.value===r.value);if(t.length>0)throw Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[r,n])}(e),[l,u]=(0,i.useState)(()=>(function({defaultValue:e,tabValues:r}){if(0===r.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:r}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${r.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=r.find(e=>e.default)??r[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:n,tabValues:o})),[g,x]=function({queryString:e=!1,groupId:r}){let n=(0,a.W6)(),t=function({queryString:e=!1,groupId:r}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!r)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return r??null}({queryString:e,groupId:r});return[(0,h.aZ)(t),(0,i.useCallback)(e=>{if(!t)return;let r=new URLSearchParams(n.location.search);r.set(t,e),n.replace({...n.location,search:r.toString()})},[t,n])]}({queryString:t,groupId:s}),[w,v]=function({groupId:e}){let r=e?`docusaurus.tab.${e}`:null,[n,t]=(0,f.Dv)(r);return[n,(0,i.useCallback)(e=>{r&&t.set(e)},[r,t])]}({groupId:s}),j=m({value:r=g??w,tabValues:o})?r:null;return(0,c.A)(()=>{j&&u(j)},[j]),{selectedValue:l,selectValue:(0,i.useCallback)(e=>{if(!m({value:e,tabValues:o}))throw Error(`Can't select invalid tab value=${e}`);u(e),x(e),v(e)},[x,v,o]),tabValues:o}}(e);return(0,t.jsxs)("div",{className:(0,s.A)(o.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,t.jsx)(g,{...r,...e}),(0,t.jsx)(x,{...r,...e})]})}function v(e){let r=(0,u.A)();return(0,t.jsx)(w,{...e,children:p(e.children)},String(r))}},54725(e,r,n){n.d(r,{B:()=>o});var t=n(74848);n(96540);var i=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),s=n(66497);function o({fn:e,children:r,hash:n}){let o=(e=>{let r=e.split(".");for(let e=r.length;e>0;e--){let n=r.slice(0,e).join(".");if(i[n])return n}return null})(e);if(!o)return(0,t.jsx)(t.Fragment,{children:r});let l=(0,s.default)(`/${i[o]}#${n??e}`);return(0,t.jsx)("a",{href:l,target:"_blank",children:r??(0,t.jsxs)("code",{children:[e,"()"]})})}},28453(e,r,n){n.d(r,{R:()=>o,x:()=>l});var t=n(96540);let i={},s=t.createContext(i);function o(e){let r=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function l(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(s.Provider,{value:r},e.children)}}}]);