/*! For license information please see e8daf5c4.41a4853e.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9879],{6789:(e,t,i)=>{i.d(t,{A:()=>o});i(96540);var n=i(28774),a=i(34164);const c={tileCard:"tileCard_NHsj",tileIcon:"tileIcon_pyoR",tileLink:"tileLink_iUbu",tileImage:"tileImage_O4So"};var s=i(86025),r=i(21122),l=i(74848);function o({icon:e,image:t,imageDark:i,imageWidth:o,imageHeight:d,iconSize:h=32,containerHeight:p,title:u,description:m,href:f,linkText:g="Learn more \u2192",className:k}){if(!e&&!t)throw new Error("TileCard requires either an icon or image prop");const b=p?{height:`${p}px`}:{},x={};return o&&(x.width=`${o}px`),d&&(x.height=`${d}px`),(0,l.jsxs)(n.A,{href:f,className:(0,a.A)(c.tileCard,k),children:[(0,l.jsx)("div",{className:c.tileIcon,style:b,children:e?(0,l.jsx)(e,{size:h}):i?(0,l.jsx)(r.A,{sources:{light:(0,s.Ay)(t),dark:(0,s.Ay)(i)},alt:u,className:c.tileImage,style:x}):(0,l.jsx)("img",{src:(0,s.Ay)(t),alt:u,className:c.tileImage,style:x})}),(0,l.jsx)("h3",{children:u}),(0,l.jsx)("p",{children:m}),(0,l.jsx)("div",{className:c.tileLink,children:g})]})}},22492:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},22864:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},28453:(e,t,i)=>{i.d(t,{R:()=>s,x:()=>r});var n=i(96540);const a={},c=n.createContext(a);function s(e){const t=n.useContext(c);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:s(e.components),n.createElement(c.Provider,{value:t},e.children)}},47504:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("message-square",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]])},47792:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},51004:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]])},65592:(e,t,i)=>{i.d(t,{A:()=>s});i(96540);var n=i(34164);const a={tilesGrid:"tilesGrid_hB9N"};var c=i(74848);function s({children:e,className:t}){return(0,c.jsx)("div",{className:(0,n.A)(a.tilesGrid,t),children:e})}},65919:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>I,contentTitle:()=>N,default:()=>U,frontMatter:()=>C,metadata:()=>n,toc:()=>M});const n=JSON.parse('{"id":"tracing/collect-user-feedback/index","title":"Collect User Feedback","description":"Capturing user feedback is critical for understanding the real-world quality of your GenAI application. MLflow\'s Feedback API provides a structured, standardized approach to collecting, storing, and analyzing user feedback directly within your traces.","source":"@site/docs/genai/tracing/collect-user-feedback/index.mdx","sourceDirName":"tracing/collect-user-feedback","slug":"/tracing/collect-user-feedback/","permalink":"/mlflow-website/docs/latest/genai/tracing/collect-user-feedback/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Track App Versions and Environments","permalink":"/mlflow-website/docs/latest/genai/tracing/track-environments-context/"},"next":{"title":"Trace Tagging","permalink":"/mlflow-website/docs/latest/genai/tracing/attach-tags/"}}');var a=i(74848),c=i(28453),s=i(82238),r=i(79206),l=i(65592),o=i(6789),d=i(66927),h=i(47792),p=i(22492),u=i(22864),m=i(84722);const f=(0,m.A)("thumbs-up",[["path",{d:"M7 10v12",key:"1qc93n"}],["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}]]);var g=i(76316);const k=(0,m.A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);var b=i(51004);const x=(0,m.A)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);var y=i(93893),w=i(47504),v=i(98445);const j=i.p+"assets/images/assessments_trace_detail_ui-d460aa8741ab1feca6d3fd1ac864bcd8.png";var A=i(82309),_=i(77655);const C={},N="Collect User Feedback",I={},M=[{value:"Why Use MLflow Feedback for User Feedback?",id:"why-use-mlflow-feedback-for-user-feedback",level:2},{value:"Step-by-Step Guide: Collecting User Feedback",id:"step-by-step-guide-collecting-user-feedback",level:2},{value:"1. Set Up Your GenAI Application with Tracing",id:"1-set-up-your-genai-application-with-tracing",level:3},{value:"2. Collect Simple Thumbs Up/Down Feedback",id:"2-collect-simple-thumbs-updown-feedback",level:3},{value:"3. View Feedback in MLflow UI",id:"3-view-feedback-in-mlflow-ui",level:3},{value:"4. Adding and Updating Feedback via UI",id:"4-adding-and-updating-feedback-via-ui",level:3},{value:"Feedback Value Types",id:"feedback-value-types",level:2},{value:"MLflow Feedback Collection Best Practices",id:"mlflow-feedback-collection-best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function F(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,c.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(t.header,{children:(0,a.jsx)(t.h1,{id:"collect-user-feedback",children:"Collect User Feedback"})}),"\n",(0,a.jsxs)(t.p,{children:["Capturing user feedback is critical for understanding the real-world quality of your GenAI application. MLflow's ",(0,a.jsx)(t.strong,{children:"Feedback API"})," provides a structured, standardized approach to collecting, storing, and analyzing user feedback directly within your traces."]}),"\n",(0,a.jsx)(t.h2,{id:"why-use-mlflow-feedback-for-user-feedback",children:"Why Use MLflow Feedback for User Feedback?"}),"\n",(0,a.jsx)(s.A,{features:[{icon:h.A,title:"Direct Trace Integration",description:"Feedback is linked directly to specific application executions, creating an immediate connection between user reactions and system performance."},{icon:p.A,title:"Structured Data Model",description:"Standardized format with clear attribution and rationale ensures consistent feedback collection across your entire application."},{icon:u.A,title:"Production Ready",description:"Available in OSS MLflow 3.2.0+ with no external dependencies, designed for high-throughput production environments."},{icon:f,title:"Complete Audit Trail",description:"Track every feedback change with timestamps and user attribution, enabling comprehensive quality analysis over time."}]}),"\n",(0,a.jsx)(t.h2,{id:"step-by-step-guide-collecting-user-feedback",children:"Step-by-Step Guide: Collecting User Feedback"}),"\n",(0,a.jsx)(t.h3,{id:"1-set-up-your-genai-application-with-tracing",children:"1. Set Up Your GenAI Application with Tracing"}),"\n",(0,a.jsx)(t.p,{children:"First, create a simple application that automatically generates traces using MLflow's OpenAI autologging:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'import mlflow\nfrom mlflow.entities import AssessmentSource, AssessmentSourceType\nimport openai\n\n# Enable automatic tracing for OpenAI calls\nmlflow.openai.autolog()\n\n# Initialize your LLM client\nclient = openai.OpenAI()\n\n\ndef ask_question(question):\n    """Simple Q&A application with automatic tracing."""\n    # This call is automatically traced by MLflow\n    response = client.chat.completions.create(\n        model="gpt-4o-mini",\n        messages=[\n            {\n                "role": "system",\n                "content": "You are a helpful assistant. Answer questions clearly and concisely.",\n            },\n            {"role": "user", "content": question},\n        ],\n        temperature=0.7,\n    )\n\n    answer = response.choices[0].message.content\n    return answer\n\n\n# Generate some traces - each call creates a trace automatically\nquestion = "What is machine learning?"\nanswer = ask_question(question)\nprint(f"Question: {question}")\nprint(f"Answer: {answer}")\n\n# You can get the trace ID from the MLflow UI or search API\n# For this example, we\'ll show how to collect feedback programmatically\n'})}),"\n",(0,a.jsx)(t.h3,{id:"2-collect-simple-thumbs-updown-feedback",children:"2. Collect Simple Thumbs Up/Down Feedback"}),"\n",(0,a.jsx)(t.p,{children:"Implement basic boolean feedback collection. In a real application, you'd get the trace_id from your tracing system:"}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-python",children:'def collect_thumbs_feedback(trace_id, is_helpful, user_id):\n    """Collect simple thumbs up/down feedback from users."""\n    mlflow.log_feedback(\n        trace_id=trace_id,\n        name="user_satisfaction",\n        value=is_helpful,\n        rationale="User indicated response was helpful"\n        if is_helpful\n        else "User indicated response was not helpful",\n        source=AssessmentSource(\n            source_type=AssessmentSourceType.HUMAN, source_id=user_id\n        ),\n    )\n    print(f"\u2713 Feedback recorded: {\'\ud83d\udc4d\' if is_helpful else \'\ud83d\udc4e\'}")\n\n\n# Example: Collect feedback on a trace\ntrace_id = mlflow.get_last_active_trace_id()\ncollect_thumbs_feedback(trace_id, True, "user_123")\n'})}),"\n",(0,a.jsx)(t.h3,{id:"3-view-feedback-in-mlflow-ui",children:"3. View Feedback in MLflow UI"}),"\n",(0,a.jsx)(t.p,{children:"After collecting feedback, you can view it in the MLflow UI:"}),"\n",(0,a.jsx)(d.A,{src:j,alt:"Feedback in MLflow UI",width:"90%"}),"\n",(0,a.jsx)(t.p,{children:"The trace detail page shows all feedback attached to your traces, making it easy to analyze user satisfaction and identify patterns in your application's performance."}),"\n",(0,a.jsx)(t.h3,{id:"4-adding-and-updating-feedback-via-ui",children:"4. Adding and Updating Feedback via UI"}),"\n",(0,a.jsx)(t.p,{children:"Users can also provide feedback directly through the MLflow UI:"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Creating New Feedback:"})}),"\n",(0,a.jsx)(d.A,{src:A.A,alt:"Create Feedback",width:"90%"}),"\n",(0,a.jsx)(t.p,{children:(0,a.jsx)(t.strong,{children:"Adding Additional Feedback:"})}),"\n",(0,a.jsx)(d.A,{src:_.A,alt:"Additional Feedback",width:"90%"}),"\n",(0,a.jsx)(t.p,{children:"This collaborative approach enables both programmatic feedback collection and manual review workflows."}),"\n",(0,a.jsx)(t.h2,{id:"feedback-value-types",children:"Feedback Value Types"}),"\n",(0,a.jsx)(t.p,{children:"MLflow feedback supports various formats to match your application's needs:"}),"\n",(0,a.jsxs)(t.table,{children:[(0,a.jsx)(t.thead,{children:(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.th,{children:"Feedback Type"}),(0,a.jsx)(t.th,{children:"Description"}),(0,a.jsx)(t.th,{children:"Example Use Cases"})]})}),(0,a.jsxs)(t.tbody,{children:[(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Boolean"})}),(0,a.jsxs)(t.td,{children:["Simple ",(0,a.jsx)(t.code,{children:"True"}),"/",(0,a.jsx)(t.code,{children:"False"})," feedback"]}),(0,a.jsx)(t.td,{children:"Thumbs up/down, correct/incorrect"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Numeric"})}),(0,a.jsx)(t.td,{children:"Integer or float ratings"}),(0,a.jsx)(t.td,{children:"1-5 star ratings, confidence scores"})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Categorical"})}),(0,a.jsx)(t.td,{children:"String classifications"}),(0,a.jsx)(t.td,{children:'"Helpful", "Neutral", "Unhelpful"'})]}),(0,a.jsxs)(t.tr,{children:[(0,a.jsx)(t.td,{children:(0,a.jsx)(t.strong,{children:"Structured"})}),(0,a.jsx)(t.td,{children:"Complex objects with multiple dimensions"}),(0,a.jsx)(t.td,{children:"Detailed quality breakdowns"})]})]})]}),"\n",(0,a.jsx)(t.h2,{id:"mlflow-feedback-collection-best-practices",children:"MLflow Feedback Collection Best Practices"}),"\n",(0,a.jsx)(r.A,{concepts:[{icon:g.A,title:"Start with Boolean Feedback",description:"Use MLflow's boolean feedback type for simple thumbs up/down collection. Once you analyze patterns with MLflow's search APIs, expand to numeric ratings or structured feedback types."},{icon:k,title:"Link Feedback to Fresh Traces",description:"Collect feedback immediately after trace generation when the interaction context is available. MLflow's direct trace-feedback linkage ensures you always have the full execution context."},{icon:b.A,title:"Use Consistent Naming Conventions",description:"Standardize feedback names like 'user_satisfaction' or 'quality_rating' across traces. This enables MLflow's search and aggregation features to provide meaningful insights across your application."},{icon:x,title:"Use Source Attribution Properly",description:"Set meaningful source_id values in AssessmentSource objects for tracking feedback providers. MLflow preserves complete audit trails with timestamps and source attribution."},{icon:y.A,title:"Combine Programmatic and UI Collection",description:"Use MLflow's API for automated collection and the UI for manual review. Both methods integrate seamlessly, allowing different teams to contribute feedback through their preferred interface."}]}),"\n",(0,a.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(l.A,{children:[(0,a.jsx)(o.A,{icon:w.A,iconSize:48,title:"Feedback API Guide",description:"Comprehensive guide to all feedback APIs with advanced patterns and examples",href:"/genai/assessments/feedback",linkText:"View API reference \u2192",containerHeight:64}),(0,a.jsx)(o.A,{icon:h.A,iconSize:48,title:"Feedback Concepts",description:"Deep dive into feedback architecture, schema, and best practices",href:"/genai/tracing/concepts/feedback",linkText:"Learn concepts \u2192",containerHeight:64}),(0,a.jsx)(o.A,{icon:v.A,iconSize:48,title:"Search and Analyze Traces",description:"Query traces with feedback data and analyze patterns for quality insights",href:"/genai/tracing/search-traces",linkText:"Start analyzing \u2192",containerHeight:64})]})]})}function U(e={}){const{wrapper:t}={...(0,c.R)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(F,{...e})}):F(e)}},66927:(e,t,i)=>{i.d(t,{A:()=>s});i(96540);const n={container:"container_JwLF",imageWrapper:"imageWrapper_RfGN",image:"image_bwOA",caption:"caption_jo2G"};var a=i(86025),c=i(74848);function s({src:e,alt:t,width:i,caption:s,className:r}){return(0,c.jsxs)("div",{className:`${n.container} ${r||""}`,children:[(0,c.jsx)("div",{className:n.imageWrapper,style:i?{width:i}:{},children:(0,c.jsx)("img",{src:(0,a.Ay)(e),alt:t,className:n.image})}),s&&(0,c.jsx)("p",{className:n.caption,children:s})]})}},76316:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]])},77655:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/additional_feedback_ui-55514604c28b292d5b976cb56a30773a.png"},79206:(e,t,i)=>{i.d(t,{A:()=>c});i(96540);const n={conceptOverview:"conceptOverview_x8T_",overviewTitle:"overviewTitle_HyAI",conceptGrid:"conceptGrid_uJNV",conceptCard:"conceptCard_oday",conceptHeader:"conceptHeader_HCk5",conceptIcon:"conceptIcon_gejw",conceptTitle:"conceptTitle_TGMM",conceptDescription:"conceptDescription_ZyDn"};var a=i(74848);function c({concepts:e,title:t}){return(0,a.jsxs)("div",{className:n.conceptOverview,children:[t&&(0,a.jsx)("h3",{className:n.overviewTitle,children:t}),(0,a.jsx)("div",{className:n.conceptGrid,children:e.map((e,t)=>(0,a.jsxs)("div",{className:n.conceptCard,children:[(0,a.jsxs)("div",{className:n.conceptHeader,children:[e.icon&&(0,a.jsx)("div",{className:n.conceptIcon,children:(0,a.jsx)(e.icon,{size:20})}),(0,a.jsx)("h4",{className:n.conceptTitle,children:e.title})]}),(0,a.jsx)("p",{className:n.conceptDescription,children:e.description})]},t))})]})}},82238:(e,t,i)=>{i.d(t,{A:()=>c});i(96540);const n={featureHighlights:"featureHighlights_Ardf",highlightItem:"highlightItem_XPnN",highlightIcon:"highlightIcon_SUR8",highlightContent:"highlightContent_d0XP"};var a=i(74848);function c({features:e}){return(0,a.jsx)("div",{className:n.featureHighlights,children:e.map((e,t)=>(0,a.jsxs)("div",{className:n.highlightItem,children:[e.icon&&(0,a.jsx)("div",{className:n.highlightIcon,children:(0,a.jsx)(e.icon,{size:24})}),(0,a.jsxs)("div",{className:n.highlightContent,children:[(0,a.jsx)("h4",{children:e.title}),(0,a.jsx)("p",{children:e.description})]})]},t))})}},82309:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/add_feedback_ui-d41b6141727bf92f5d87568ae5522ae1.png"},84722:(e,t,i)=>{i.d(t,{A:()=>o});var n=i(96540);const a=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},c=(...e)=>e.filter((e,t,i)=>Boolean(e)&&""!==e.trim()&&i.indexOf(e)===t).join(" ").trim(),s=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:i=2,absoluteStrokeWidth:a,className:l="",children:o,iconNode:d,...h},p)=>(0,n.createElement)("svg",{ref:p,...r,width:t,height:t,stroke:e,strokeWidth:a?24*Number(i)/Number(t):i,className:c("lucide",l),...!o&&!s(h)&&{"aria-hidden":"true"},...h},[...d.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=(e,t)=>{const i=(0,n.forwardRef)(({className:i,...s},r)=>{return(0,n.createElement)(l,{ref:r,iconNode:t,className:c(`lucide-${o=a(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,i),...s});var o});return i.displayName=a(e),i}},93893:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},98445:(e,t,i)=>{i.d(t,{A:()=>n});const n=(0,i(84722).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])}}]);