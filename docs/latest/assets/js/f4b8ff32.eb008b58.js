"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["7697"],{15838(e,t,n){n.r(t),n.d(t,{metadata:()=>r,default:()=>u,frontMatter:()=>m,contentTitle:()=>c,toc:()=>f,assets:()=>h});var r=JSON.parse('{"id":"prompt-registry/create-and-edit-prompts","title":"Create and Edit Prompts","description":"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs.","source":"@site/docs/genai/prompt-registry/create-and-edit-prompts.mdx","sourceDirName":"prompt-registry","slug":"/prompt-registry/create-and-edit-prompts","permalink":"/mlflow-website/docs/latest/genai/prompt-registry/create-and-edit-prompts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Create and Edit Prompts","description":"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs."},"sidebar":"genAISidebar","previous":{"title":"Prompt Registry","permalink":"/mlflow-website/docs/latest/genai/prompt-registry/"},"next":{"title":"Evaluating Prompts","permalink":"/mlflow-website/docs/latest/genai/prompt-registry/evaluate-prompts"}}'),l=n(74848),a=n(28453),i=n(78010),o=n(57250),s=n(54725),p=n(95986);let m={title:"Create and Edit Prompts",description:"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs."},c="Create and Edit Prompts",h={},f=[{value:"Creating a New Prompt",id:"creating-a-new-prompt",level:2},{value:"Editing an Existing Prompt (Creating New Versions)",id:"editing-an-existing-prompt-creating-new-versions",level:2},{value:"Understanding Immutability",id:"understanding-immutability",level:2},{value:"Comparing Prompt Versions",id:"comparing-prompt-versions",level:2}];function d(e){let t={code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,a.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.header,{children:(0,l.jsx)(t.h1,{id:"create-and-edit-prompts",children:"Create and Edit Prompts"})}),"\n",(0,l.jsx)(t.p,{children:"This guide walks you through the process of creating new prompts and managing their versions within the MLflow Prompt Registry."}),"\n",(0,l.jsx)(t.h2,{id:"creating-a-new-prompt",children:"Creating a New Prompt"}),"\n",(0,l.jsx)(t.p,{children:"You can initiate a new prompt in the MLflow Prompt Registry in two primary ways: through the MLflow UI or programmatically using the Python SDK."}),"\n",(0,l.jsx)(p.A,{children:(0,l.jsxs)(i.A,{children:[(0,l.jsx)(o.A,{value:"ui",label:"UI",default:!0,children:(0,l.jsxs)("div",{class:"flex-column",children:[(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"Navigate to the Prompt Registry section in your MLflow instance."}),"\n",(0,l.jsx)(t.li,{children:'Click on the "Create Prompt" (or similar) button.'}),"\n",(0,l.jsx)(t.li,{children:"Fill in the prompt details such as name, prompt template text, and commit message (optional)"}),"\n"]}),(0,l.jsx)(t.p,{children:(0,l.jsx)(t.img,{alt:"Registered Prompt in UI",src:n(72406).A+"",width:"1287",height:"616"})})]})}),(0,l.jsx)(o.A,{value:"python",label:"Python",children:(0,l.jsxs)("div",{class:"flex-column",children:[(0,l.jsxs)(t.p,{children:["To create a new prompt programmatically, use the ",(0,l.jsx)(s.B,{fn:"mlflow.genai.register_prompt"})," function. This is particularly useful for automating prompt creation or managing prompts as part of a larger script."]}),(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import mlflow\n\n# Use double curly braces for variables in the template\ninitial_template = """\\\nSummarize content you are provided with in {{ num_sentences }} sentences.\n\nSentences: {{ sentences }}\n"""\n\n# Chat Style template\ninitial_template = [\n    {\n        "role": "system",\n        "content": "Summarize content you are provided with in {{ num_sentences }} sentences.",\n    },\n    {"role": "user", "content": "Sentences: {{ sentences }}"},\n]\n\n# Optional Response Format\nfrom pydantic import BaseModel, Field\n\n\nclass ResponseFormat(BaseModel):\n    summary: str = Field(..., description="Summary of the content")\n\n\n# Register a new prompt\nprompt = mlflow.genai.register_prompt(\n    name="summarization-prompt",\n    template=initial_template,\n    # Optional: Provide Response Format to get structured output\n    response_format=ResponseFormat,\n    # Optional: Provide a commit message to describe the changes\n    commit_message="Initial commit",\n    # Optional: Set tags applies to the prompt (across versions)\n    tags={\n        "author": "author@example.com",\n        "task": "summarization",\n        "language": "en",\n    },\n)\n\n# The prompt object contains information about the registered prompt\nprint(f"Created prompt \'{prompt.name}\' (version {prompt.version})")\n'})})]})})]})}),"\n",(0,l.jsx)(t.h2,{id:"editing-an-existing-prompt-creating-new-versions",children:"Editing an Existing Prompt (Creating New Versions)"}),"\n",(0,l.jsxs)(t.p,{children:["Once a prompt version is created, its template and initial metadata are ",(0,l.jsx)(t.strong,{children:"immutable"}),". Editing an existing prompt means creating a ",(0,l.jsx)(t.em,{children:"new version"})," of that prompt with your changes. This Git-like behavior ensures a complete history and allows you to revert to previous versions if needed."]}),"\n",(0,l.jsx)(p.A,{children:(0,l.jsxs)(i.A,{children:[(0,l.jsx)(o.A,{value:"ui",label:"UI",default:!0,children:(0,l.jsxs)("div",{class:"flex-column",children:[(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsx)(t.li,{children:"Navigate to the specific prompt you wish to edit in the Prompt Registry."}),"\n",(0,l.jsx)(t.li,{children:"Select the version you want to base your new version on (often the latest)."}),"\n",(0,l.jsx)(t.li,{children:'Look for an "Edit Prompt" or "Create New Version" button.'}),"\n",(0,l.jsx)(t.li,{children:"Modify the template, update metadata, or change tags as needed."}),"\n",(0,l.jsxs)(t.li,{children:["Provide a new ",(0,l.jsx)(t.strong,{children:"Commit Message"})," describing the changes you made for this new version."]}),"\n"]}),(0,l.jsx)(t.p,{children:(0,l.jsx)(t.img,{alt:"Update Prompt UI",src:n(53296).A+"",width:"1150",height:"594"})})]})}),(0,l.jsx)(o.A,{value:"python",label:"Python",children:(0,l.jsxs)("div",{class:"flex-column",children:[(0,l.jsxs)(t.p,{children:["To create a new version of an existing prompt, you again use the ",(0,l.jsx)(s.B,{fn:"mlflow.genai.register_prompt"})," function, but this time, you provide the ",(0,l.jsx)(t.code,{children:"name"})," of an existing prompt. MLflow will automatically increment the version number."]}),(0,l.jsx)(t.pre,{children:(0,l.jsx)(t.code,{className:"language-python",children:'import mlflow\n\nnew_template = """\\\nYou are an expert summarizer. Condense the following content into exactly {{ num_sentences }} clear and informative sentences that capture the key points.\n\nSentences: {{ sentences }}\n\nYour summary should:\n- Contain exactly {{ num_sentences }} sentences\n- Include only the most important information\n- Be written in a neutral, objective tone\n- Maintain the same level of formality as the original text\n"""\n\n# Register a new version of an existing prompt\nupdated_prompt = mlflow.genai.register_prompt(\n    name="summarization-prompt",  # Specify the existing prompt name\n    template=new_template,\n    commit_message="Improvement",\n    tags={\n        "author": "author@example.com",\n    },\n)\n'})})]})})]})}),"\n",(0,l.jsx)(t.h2,{id:"understanding-immutability",children:"Understanding Immutability"}),"\n",(0,l.jsxs)(t.p,{children:["It's crucial to remember that prompt versions in the MLflow Prompt Registry are immutable. Once ",(0,l.jsx)(t.code,{children:"mlflow.genai.register_prompt()"})," is called and a version is created (or a new version of an existing prompt is made), the template, initial commit message, and initial metadata for ",(0,l.jsx)(t.em,{children:"that specific version"})," cannot be altered. This design choice provides strong guarantees for reproducibility and lineage tracking."]}),"\n",(0,l.jsx)(t.p,{children:"If you need to change a prompt, you always create a new version."}),"\n",(0,l.jsx)(t.h2,{id:"comparing-prompt-versions",children:"Comparing Prompt Versions"}),"\n",(0,l.jsx)(t.p,{children:"The MLflow UI provides tools to compare different versions of a prompt. This typically includes a side-by-side diff view, allowing you to easily see what changed in the template text, metadata, or tags between versions."}),"\n",(0,l.jsx)(t.p,{children:(0,l.jsx)(t.img,{alt:"Compare Prompt Versions",src:n(2371).A+"",width:"1267",height:"713"})})]})}function u(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(d,{...e})}):d(e)}},2371(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/compare-prompt-versions-2082121aeaca4be99a0cf968535141ed.png"},72406(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/registered-prompt-b8d47ff0d061d8703b61a9a6e94a77c3.png"},53296(e,t,n){n.d(t,{A:()=>r});let r=n.p+"assets/images/update-prompt-ui-74a489e65098893bbffe253f43fb210d.png"},57250(e,t,n){n.d(t,{A:()=>a});var r=n(74848);n(96540);var l=n(34164);function a({children:e,hidden:t,className:n}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,l.A)("tabItem_Ymn6",n),hidden:t,children:e})}},78010(e,t,n){n.d(t,{A:()=>_});var r=n(74848),l=n(96540),a=n(34164),i=n(88287),o=n(28584),s=n(56347),p=n(99989),m=n(96629),c=n(80618),h=n(41367);function f(e){return l.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,l.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function d({value:e,tabValues:t}){return t.some(t=>t.value===e)}var u=n(19863);function w({className:e,block:t,selectedValue:n,selectValue:l,tabValues:i}){let s=[],{blockElementScrollPositionUntilNextRender:p}=(0,o.a_)(),m=e=>{let t=e.currentTarget,r=i[s.indexOf(t)].value;r!==n&&(p(t),l(r))},c=e=>{let t=null;switch(e.key){case"Enter":m(e);break;case"ArrowRight":{let n=s.indexOf(e.currentTarget)+1;t=s[n]??s[0];break}case"ArrowLeft":{let n=s.indexOf(e.currentTarget)-1;t=s[n]??s[s.length-1]}}t?.focus()};return(0,r.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":t},e),children:i.map(({value:e,label:t,attributes:l})=>(0,r.jsx)("li",{role:"tab",tabIndex:n===e?0:-1,"aria-selected":n===e,ref:e=>{s.push(e)},onKeyDown:c,onClick:m,...l,className:(0,a.A)("tabs__item","tabItem_LNqP",l?.className,{"tabs__item--active":n===e}),children:t??e},e))})}function g({lazy:e,children:t,selectedValue:n}){let i=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=i.find(e=>e.props.value===n);return e?(0,l.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,r.jsx)("div",{className:"margin-top--md",children:i.map((e,t)=>(0,l.cloneElement)(e,{key:t,hidden:e.props.value!==n}))})}function y(e){let t=function(e){let t,{defaultValue:n,queryString:r=!1,groupId:a}=e,i=function(e){let{values:t,children:n}=e;return(0,l.useMemo)(()=>{let e=t??f(n).map(({props:{value:e,label:t,attributes:n,default:r}})=>({value:e,label:t,attributes:n,default:r})),r=(0,c.XI)(e,(e,t)=>e.value===t.value);if(r.length>0)throw Error(`Docusaurus error: Duplicate values "${r.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,n])}(e),[o,u]=(0,l.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!d({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let n=t.find(e=>e.default)??t[0];if(!n)throw Error("Unexpected error: 0 tabValues");return n.value})({defaultValue:n,tabValues:i})),[w,g]=function({queryString:e=!1,groupId:t}){let n=(0,s.W6)(),r=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,m.aZ)(r),(0,l.useCallback)(e=>{if(!r)return;let t=new URLSearchParams(n.location.search);t.set(r,e),n.replace({...n.location,search:t.toString()})},[r,n])]}({queryString:r,groupId:a}),[y,_]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[n,r]=(0,h.Dv)(t);return[n,(0,l.useCallback)(e=>{t&&r.set(e)},[t,r])]}({groupId:a}),v=d({value:t=w??y,tabValues:i})?t:null;return(0,p.A)(()=>{v&&u(v)},[v]),{selectedValue:o,selectValue:(0,l.useCallback)(e=>{if(!d({value:e,tabValues:i}))throw Error(`Can't select invalid tab value=${e}`);u(e),g(e),_(e)},[g,_,i]),tabValues:i}}(e);return(0,r.jsxs)("div",{className:(0,a.A)(i.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,r.jsx)(w,{...t,...e}),(0,r.jsx)(g,{...t,...e})]})}function _(e){let t=(0,u.A)();return(0,r.jsx)(y,{...e,children:f(e.children)},String(t))}},54725(e,t,n){n.d(t,{B:()=>i});var r=n(74848);n(96540);var l=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),a=n(66497);function i({fn:e,children:t,hash:n}){let i=(e=>{let t=e.split(".");for(let e=t.length;e>0;e--){let n=t.slice(0,e).join(".");if(l[n])return n}return null})(e);if(!i)return(0,r.jsx)(r.Fragment,{children:t});let o=(0,a.default)(`/${l[i]}#${n??e}`);return(0,r.jsx)("a",{href:o,target:"_blank",children:t??(0,r.jsxs)("code",{children:[e,"()"]})})}},95986(e,t,n){n.d(t,{A:()=>l});var r=n(74848);n(96540);function l({children:e}){return(0,r.jsx)("div",{className:"wrapper_sf5q",children:e})}},28453(e,t,n){n.d(t,{R:()=>i,x:()=>o});var r=n(96540);let l={},a=r.createContext(l);function i(e){let t=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:i(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);