"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["4154"],{902(e,a,t){t.r(a),t.d(a,{metadata:()=>n,default:()=>v,frontMatter:()=>f,contentTitle:()=>b,toc:()=>k,assets:()=>x});var n=JSON.parse('{"id":"tracing/integrations/listing/databricks","title":"Tracing Databricks","description":"Databricks offers a unified platform for data, analytics and AI. Databricks Foundation Model APIs provide an OpenAI-compatible API format for accessing state-of-the-art models such as OpenAI GPT, Anthropic Claude, Google Gemini, and more, through a single platform. Since Databricks Foundation Model APIs are OpenAI-compatible, you can use MLflow tracing to trace your interactions with Databricks Foundation Model APIs.","source":"@site/docs/genai/tracing/integrations/listing/databricks.mdx","sourceDirName":"tracing/integrations/listing","slug":"/tracing/integrations/listing/databricks","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/databricks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"sidebar_position":23,"sidebar_label":"Databricks"},"sidebar":"genAISidebar","previous":{"title":"Cohere","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/cohere"},"next":{"title":"DeepSeek","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/deepseek"}}'),r=t(74848),i=t(28453),s=t(10440),o=t(77541),l=t(46077),c=t(89001),d=t(78010),u=t(57250),p=t(95986),h=t(93893),m=t(60665),g=t(43975);let f={sidebar_position:23,sidebar_label:"Databricks"},b="Tracing Databricks",x={},k=[{value:"Managed MLflow on Databricks",id:"managed-mlflow-on-databricks",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Streaming and Async Support",id:"streaming-and-async-support",level:2},{value:"Combine with frameworks or manual tracing",id:"combine-with-frameworks-or-manual-tracing",level:2},{value:"Next steps",id:"next-steps",level:2}];function w(e){let a={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.header,{children:(0,r.jsx)(a.h1,{id:"tracing-databricks",children:"Tracing Databricks"})}),"\n",(0,r.jsxs)(a.p,{children:[(0,r.jsx)(a.a,{href:"https://www.databricks.com/",children:"Databricks"})," offers a unified platform for data, analytics and AI. Databricks Foundation Model APIs provide an OpenAI-compatible API format for accessing state-of-the-art models such as OpenAI GPT, Anthropic Claude, Google Gemini, and more, through a single platform. Since Databricks Foundation Model APIs are OpenAI-compatible, you can use MLflow tracing to trace your interactions with Databricks Foundation Model APIs."]}),"\n",(0,r.jsx)(l.A,{src:"/images/llms/tracing/openai-function-calling.png",alt:"Tracing via autolog"}),"\n",(0,r.jsx)(a.h2,{id:"managed-mlflow-on-databricks",children:"Managed MLflow on Databricks"}),"\n",(0,r.jsx)(a.p,{children:"Databricks offers a fully managed MLflow service as a part of their platform. This is the easiest way to get started with MLflow tracing, without having to set up any infrastructure. If you are using Databricks Foundation Model APIs, it is no brainer to use the managed MLflow for end-to-end LLMOps including tracing."}),"\n",(0,r.jsx)(a.admonition,{title:"Visit Databricks documentation",type:"warning",children:(0,r.jsxs)(a.p,{children:["This guide only covers how to trace Databricks Foundation Model APIs using MLflow tracing. For more details on how to get started with MLflow tracing on Databricks (e.g., tracing agent deployed on Databricks), please refer to the ",(0,r.jsx)(a.a,{href:"https://docs.databricks.com/aws/en/mlflow3/genai/",children:"Databricks documentation"}),"."]})}),"\n",(0,r.jsx)(a.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,r.jsx)(c.A,{number:1,title:"Install dependencies"}),"\n",(0,r.jsx)(p.A,{children:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(u.A,{value:"python",label:"Python",default:!0,children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"pip install 'mlflow[genai]' openai\n"})})}),(0,r.jsx)(u.A,{value:"typescript",label:"JS / TS",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-bash",children:"npm install mlflow-openai openai\n"})})})]})}),"\n",(0,r.jsx)(c.A,{number:2,title:"Enable tracing and call Databricks"}),"\n",(0,r.jsx)(p.A,{children:(0,r.jsxs)(d.A,{children:[(0,r.jsx)(u.A,{value:"python",label:"Python",default:!0,children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-python",children:'import openai\nimport mlflow\n\n# Enable auto-tracing for OpenAI (works with Databricks)\nmlflow.openai.autolog()\n\n# Initialize the OpenAI client with Databricks API endpoint\nclient = openai.OpenAI(\n    base_url="https://example.staging.cloud.databricks.com/serving-endpoints",\n    api_key="<your_databricks_token>",\n)\n\nresponse = client.chat.completions.create(\n    model="databricks-gemini-3-pro",\n    messages=[\n        {"role": "system", "content": "You are a helpful assistant."},\n        {"role": "user", "content": "What is the capital of France?"},\n    ],\n)\n'})})}),(0,r.jsx)(u.A,{value:"typescript",label:"JS / TS",children:(0,r.jsx)(a.pre,{children:(0,r.jsx)(a.code,{className:"language-typescript",children:'import { OpenAI } from "openai";\nimport { tracedOpenAI } from "mlflow-openai";\n\n// Wrap the OpenAI client and point to Databricks endpoint\nconst client = tracedOpenAI(\n  new OpenAI({\n    baseURL: "https://example.staging.cloud.databricks.com/serving-endpoints",\n    apiKey: "<your_databricks_token>",\n  })\n);\n\nconst response = await client.chat.completions.create({\n  model: "databricks-gemini-3-pro",\n  messages: [\n    { role: "system", content: "You are a helpful assistant." },\n    { role: "user", content: "What is the capital of France?" },\n  ],\n});\n'})})})]})}),"\n",(0,r.jsx)(c.A,{number:3,title:"View traces in MLflow UI"}),"\n",(0,r.jsxs)(a.p,{children:["Browse to your MLflow UI (for example, ",(0,r.jsx)(a.a,{href:"http://localhost:5000",children:"http://localhost:5000"}),") and open the ",(0,r.jsx)(a.code,{children:"Databricks"})," experiment to see traces for the calls above."]}),"\n",(0,r.jsx)(l.A,{src:"/images/llms/tracing/basic-openai-trace.png",alt:"Databricks Tracing"}),"\n",(0,r.jsxs)(a.p,{children:["-> View ",(0,r.jsx)("u",{children:(0,r.jsx)(a.a,{href:"#next-steps",children:"Next Steps"})})," for learning about more MLflow features like user feedback tracking, prompt management, and evaluation."]}),"\n",(0,r.jsx)(a.h2,{id:"streaming-and-async-support",children:"Streaming and Async Support"}),"\n",(0,r.jsxs)(a.p,{children:["MLflow supports tracing for streaming and async Databricks APIs. Visit the ",(0,r.jsx)(a.a,{href:"../openai",children:"OpenAI Tracing documentation"})," for example code snippets for tracing streaming and async calls through OpenAI SDK."]}),"\n",(0,r.jsx)(a.h2,{id:"combine-with-frameworks-or-manual-tracing",children:"Combine with frameworks or manual tracing"}),"\n",(0,r.jsxs)(a.p,{children:["The automatic tracing capability in MLflow is designed to work seamlessly with the ",(0,r.jsx)(a.a,{href:"/genai/tracing/app-instrumentation/manual-tracing",children:"Manual Tracing SDK"})," or multi-framework integrations. Please refer to the ",(0,r.jsx)(a.a,{href:"/genai/tracing/integrations/listing/openai#combine-with-manual-tracing",children:"Combining with frameworks or manual tracing"})," for example code snippets."]}),"\n",(0,r.jsx)(l.A,{src:"/images/llms/tracing/openai-trace-with-manual-span.png",alt:"Databricks Tracing with Manual Tracing"}),"\n",(0,r.jsx)(a.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,r.jsxs)(s.A,{children:[(0,r.jsx)(o.A,{icon:h.A,iconSize:48,title:"Track User Feedback",description:"Record user feedback on traces for tracking user satisfaction.",href:"/genai/tracing/collect-user-feedback",linkText:"Learn about feedback ->",containerHeight:64}),(0,r.jsx)(o.A,{icon:m.A,iconSize:48,title:"Manage Prompts",description:"Learn how to manage prompts with MLflow's prompt registry.",href:"/genai/prompt-registry",linkText:"Manage prompts ->",containerHeight:64}),(0,r.jsx)(o.A,{icon:g.A,iconSize:48,title:"Evaluate Traces",description:"Evaluate traces with LLM judges to understand and improve your AI application's behavior.",href:"/genai/eval-monitor/running-evaluation/traces",linkText:"Evaluate traces ->",containerHeight:64})]})]})}function v(e={}){let{wrapper:a}={...(0,i.R)(),...e.components};return a?(0,r.jsx)(a,{...e,children:(0,r.jsx)(w,{...e})}):w(e)}},75689(e,a,t){t.d(a,{A:()=>l});var n=t(96540);let r=e=>{let a=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,a,t)=>t?t.toUpperCase():a.toLowerCase());return a.charAt(0).toUpperCase()+a.slice(1)},i=(...e)=>e.filter((e,a,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===a).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...d},u)=>(0,n.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:r?24*Number(t)/Number(a):t,className:i("lucide",o),...!l&&!(e=>{for(let a in e)if(a.startsWith("aria-")||"role"===a||"title"===a)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,a])=>(0,n.createElement)(e,a)),...Array.isArray(l)?l:[l]])),l=(e,a)=>{let t=(0,n.forwardRef)(({className:t,...s},l)=>(0,n.createElement)(o,{ref:l,iconNode:a,className:i(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...s}));return t.displayName=r(e),t}},60665(e,a,t){t.d(a,{A:()=>n});let n=(0,t(75689).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},43975(e,a,t){t.d(a,{A:()=>n});let n=(0,t(75689).A)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]])},93893(e,a,t){t.d(a,{A:()=>n});let n=(0,t(75689).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},57250(e,a,t){t.d(a,{A:()=>i});var n=t(74848);t(96540);var r=t(34164);function i({children:e,hidden:a,className:t}){return(0,n.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_Ymn6",t),hidden:a,children:e})}},78010(e,a,t){t.d(a,{A:()=>k});var n=t(74848),r=t(96540),i=t(34164),s=t(88287),o=t(28584),l=t(56347),c=t(99989),d=t(96629),u=t(80618),p=t(41367);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:a}=e;return!!a&&"object"==typeof a&&"value"in a}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m({value:e,tabValues:a}){return a.some(a=>a.value===e)}var g=t(19863);function f({className:e,block:a,selectedValue:t,selectValue:r,tabValues:s}){let l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{let a=e.currentTarget,n=s[l.indexOf(a)].value;n!==t&&(c(a),r(n))},u=e=>{let a=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let t=l.indexOf(e.currentTarget)+1;a=l[t]??l[0];break}case"ArrowLeft":{let t=l.indexOf(e.currentTarget)-1;a=l[t]??l[l.length-1]}}a?.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":a},e),children:s.map(({value:e,label:a,attributes:r})=>(0,n.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...r,className:(0,i.A)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":t===e}),children:a??e},e))})}function b({lazy:e,children:a,selectedValue:t}){let s=(Array.isArray(a)?a:[a]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:s.map((e,a)=>(0,r.cloneElement)(e,{key:a,hidden:e.props.value!==t}))})}function x(e){let a=function(e){let a,{defaultValue:t,queryString:n=!1,groupId:i}=e,s=function(e){let{values:a,children:t}=e;return(0,r.useMemo)(()=>{let e=a??h(t).map(({props:{value:e,label:a,attributes:t,default:n}})=>({value:e,label:a,attributes:t,default:n})),n=(0,u.XI)(e,(e,a)=>e.value===a.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[a,t])}(e),[o,g]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:a}){if(0===a.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:a}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${a.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=a.find(e=>e.default)??a[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:s})),[f,b]=function({queryString:e=!1,groupId:a}){let t=(0,l.W6)(),n=function({queryString:e=!1,groupId:a}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!a)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return a??null}({queryString:e,groupId:a});return[(0,d.aZ)(n),(0,r.useCallback)(e=>{if(!n)return;let a=new URLSearchParams(t.location.search);a.set(n,e),t.replace({...t.location,search:a.toString()})},[n,t])]}({queryString:n,groupId:i}),[x,k]=function({groupId:e}){let a=e?`docusaurus.tab.${e}`:null,[t,n]=(0,p.Dv)(a);return[t,(0,r.useCallback)(e=>{a&&n.set(e)},[a,n])]}({groupId:i}),w=m({value:a=f??x,tabValues:s})?a:null;return(0,c.A)(()=>{w&&g(w)},[w]),{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!m({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);g(e),b(e),k(e)},[b,k,s]),tabValues:s}}(e);return(0,n.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,n.jsx)(f,{...a,...e}),(0,n.jsx)(b,{...a,...e})]})}function k(e){let a=(0,g.A)();return(0,n.jsx)(x,{...e,children:h(e.children)},String(a))}},46077(e,a,t){t.d(a,{A:()=>i});var n=t(74848);t(96540);var r=t(66497);function i({src:e,alt:a,width:t,caption:i,className:s}){return(0,n.jsxs)("div",{className:`container_JwLF ${s||""}`,children:[(0,n.jsx)("div",{className:"imageWrapper_RfGN",style:t?{width:t}:{},children:(0,n.jsx)("img",{src:(0,r.default)(e),alt:a,className:"image_bwOA"})}),i&&(0,n.jsx)("p",{className:"caption_jo2G",children:i})]})}},89001(e,a,t){t.d(a,{A:()=>r});var n=t(74848);t(96540);let r=({number:e,title:a})=>(0,n.jsxs)("div",{className:"stepHeader_RqmM",children:[(0,n.jsx)("div",{className:"stepNumber_exmH",children:e}),(0,n.jsx)("h3",{className:"stepTitle_SzBx",children:a})]})},95986(e,a,t){t.d(a,{A:()=>r});var n=t(74848);t(96540);function r({children:e}){return(0,n.jsx)("div",{className:"wrapper_sf5q",children:e})}},77541(e,a,t){t.d(a,{A:()=>c});var n=t(74848);t(96540);var r=t(95310),i=t(34164);let s="tileImage_O4So";var o=t(66497),l=t(92802);function c({icon:e,image:a,imageDark:t,imageWidth:c,imageHeight:d,iconSize:u=32,containerHeight:p,title:h,description:m,href:g,linkText:f="Learn more \u2192",className:b}){if(!e&&!a)throw Error("TileCard requires either an icon or image prop");let x=p?{height:`${p}px`}:{},k={};return c&&(k.width=`${c}px`),d&&(k.height=`${d}px`),(0,n.jsxs)(r.A,{href:g,className:(0,i.A)("tileCard_NHsj",b),children:[(0,n.jsx)("div",{className:"tileIcon_pyoR",style:x,children:e?(0,n.jsx)(e,{size:u}):t?(0,n.jsx)(l.A,{sources:{light:(0,o.default)(a),dark:(0,o.default)(t)},alt:h,className:s,style:k}):(0,n.jsx)("img",{src:(0,o.default)(a),alt:h,className:s,style:k})}),(0,n.jsx)("h3",{children:h}),(0,n.jsx)("p",{children:m}),(0,n.jsx)("div",{className:"tileLink_iUbu",children:f})]})}},10440(e,a,t){t.d(a,{A:()=>i});var n=t(74848);t(96540);var r=t(34164);function i({children:e,className:a}){return(0,n.jsx)("div",{className:(0,r.A)("tilesGrid_hB9N",a),children:e})}},28453(e,a,t){t.d(a,{R:()=>s,x:()=>o});var n=t(96540);let r={},i=n.createContext(r);function s(e){let a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function o(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:a},e.children)}}}]);