"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[4646],{28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>s});var i=t(96540);const o={},r=i.createContext(o);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},90707:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"tracing/faq","title":"FAQ","description":"Q: Can I use MLflow Tracing for production applications?","source":"@site/docs/tracing/faq.mdx","sourceDirName":"tracing","slug":"/tracing/faq","permalink":"/docs/latest/tracing/faq","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7,"sidebar_label":"FAQ"},"sidebar":"docsSidebar","previous":{"title":"Managing Chat Sessions","permalink":"/docs/latest/tracing/session"},"next":{"title":"Trace Data Structure","permalink":"/docs/latest/tracing/tracing-schema"}}');var o=t(74848),r=t(28453);const a={sidebar_position:7,sidebar_label:"FAQ"},s="FAQ",c={},l=[{value:"Q: Can I use MLflow Tracing for production applications?",id:"q-can-i-use-mlflow-tracing-for-production-applications",level:3},{value:"Q: I cannot open my trace in the MLflow UI. What should I do?",id:"q-i-cannot-open-my-trace-in-the-mlflow-ui-what-should-i-do",level:3},{value:"Q: The model execution gets stuck and my trace is &quot;in progress&quot; forever.",id:"q-the-model-execution-gets-stuck-and-my-trace-is-in-progress-forever",level:3},{value:"Q: My trace is split into multiple traces when doing multi-threading. How can I combine them into a single trace?",id:"q-my-trace-is-split-into-multiple-traces-when-doing-multi-threading-how-can-i-combine-them-into-a-single-trace",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"faq",children:"FAQ"})}),"\n",(0,o.jsx)(n.h3,{id:"q-can-i-use-mlflow-tracing-for-production-applications",children:"Q: Can I use MLflow Tracing for production applications?"}),"\n",(0,o.jsx)(n.p,{children:"Yes, MLflow Tracing is stable and designed to be used in production environments."}),"\n",(0,o.jsxs)(n.p,{children:["When using MLflow Tracing in production environments, we recommend using the ",(0,o.jsx)(n.a,{href:"https://pypi.org/project/mlflow-tracing/",children:"MLflow Tracing SDK"})," (",(0,o.jsx)(n.code,{children:"mlflow-tracing"}),") to instrument your code/models/agents with a minimal set of dependencies and a smeller installation footprint. The SDK is designed to be a perfect fit for production environments where you want an efficient and lightweight tracing solution. Please refer to the ",(0,o.jsx)(n.a,{href:"/tracing/production",children:"Production Monitoring"})," section for more details."]}),"\n",(0,o.jsx)(n.h3,{id:"q-i-cannot-open-my-trace-in-the-mlflow-ui-what-should-i-do",children:"Q: I cannot open my trace in the MLflow UI. What should I do?"}),"\n",(0,o.jsx)(n.p,{children:"There are multiple possible reasons why a trace may not be viewable in the MLflow UI."}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"The trace is not completed yet"}),': If the trace is still being collected, MLflow cannot display spans in the UI. Ensure that all spans are properly ended with either "OK" or "ERROR" status.']}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"The browser cache is outdated"}),": When you upgrade MLflow to a new version, the browser cache may contain outdated data and prevent the UI from displaying traces correctly. Clear your browser cache (Shift+F5) and refresh the page."]}),"\n"]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"q-the-model-execution-gets-stuck-and-my-trace-is-in-progress-forever",children:'Q: The model execution gets stuck and my trace is "in progress" forever.'}),"\n",(0,o.jsx)(n.p,{children:'Sometimes a model or an agent gets stuck in a long-running operation or an infinite loop, causing the trace to be stuck in the "in progress" state.'}),"\n",(0,o.jsxs)(n.p,{children:["To prevent this, you can set a timeout for the trace using the ",(0,o.jsx)(n.code,{children:"MLFLOW_TRACE_TIMEOUT_SECONDS"})," environment variable. If the trace exceeds the timeout, MLflow will automatically halt the trace with ",(0,o.jsx)(n.code,{children:"ERROR"})," status and export it to the backend, so that you can analyze the spans to identify the issue. By default, the timeout is not set."]}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsx)(n.p,{children:"The timeout only applies to MLflow trace. The main program, model, or agent, will continue to run even if the trace is halted."})}),"\n",(0,o.jsx)(n.p,{children:"For example, the following code sets the timeout to 5 seconds and simulates how MLflow handles a long-running operation:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-python",children:'import mlflow\nimport os\nimport time\n\n# Set the timeout to 5 seconds for demonstration purposes\nos.environ["MLFLOW_TRACE_TIMEOUT_SECONDS"] = "5"\n\n\n# Simulate a long-running operation\n@mlflow.trace\ndef long_running():\n    for _ in range(10):\n        child()\n\n\n@mlflow.trace\ndef child():\n    time.sleep(1)\n\n\nlong_running()\n'})}),"\n",(0,o.jsx)(n.admonition,{type:"note",children:(0,o.jsxs)(n.p,{children:["MLflow monitors the trace execution time and expiration in a background thread. By default, this check is performed every second and  resource consumption is negligible. If you want to adjust the interval, you can set the ",(0,o.jsx)(n.code,{children:"MLFLOW_TRACE_TIMEOUT_CHECK_INTERVAL_SECONDS"})," environment variable."]})}),"\n",(0,o.jsx)(n.h3,{id:"q-my-trace-is-split-into-multiple-traces-when-doing-multi-threading-how-can-i-combine-them-into-a-single-trace",children:"Q: My trace is split into multiple traces when doing multi-threading. How can I combine them into a single trace?"}),"\n",(0,o.jsxs)(n.p,{children:["As MLflow Tracing depends on Python ContextVar, each thread has its own trace context by default, but it is possible to generate a single trace for multi-threaded applications with a few additional steps. Refer to the ",(0,o.jsx)(n.a,{href:"/tracing/api/manual-instrumentation#multi-threading",children:"Multi-threading"})," section for more information."]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}}}]);