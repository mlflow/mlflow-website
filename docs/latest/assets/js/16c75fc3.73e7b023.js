"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6099],{28453:(e,l,o)=>{o.d(l,{R:()=>a,x:()=>i});var n=o(96540);const t={},r=n.createContext(t);function a(e){const l=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(l):{...l,...e}}),[l,e])}function i(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),n.createElement(r.Provider,{value:l},e.children)}},67756:(e,l,o)=>{o.d(l,{B:()=>m});o(96540);const n=JSON.parse('{"mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.promptflow":"api_reference/python_api/mlflow.promptflow.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html"}');var t=o(29030),r=o(56289),a=o(74848);const i=e=>{const l=e.split(".");for(let o=l.length;o>0;o--){const e=l.slice(0,o).join(".");if(n[e])return e}return null};function m(e){let{fn:l,children:o}=e;const m=i(l);if(!m)return(0,a.jsx)(a.Fragment,{children:o});const s=(0,t.Ay)(`/${n[m]}#${l}`);return(0,a.jsx)(r.A,{to:s,target:"_blank",children:o??(0,a.jsxs)("code",{children:[l,"()"]})})}},77725:(e,l,o)=>{o.r(l),o.d(l,{assets:()=>s,contentTitle:()=>m,default:()=>d,frontMatter:()=>i,metadata:()=>n,toc:()=>f});const n=JSON.parse('{"id":"mlflow-3/faqs","title":"FAQs","description":"Can MLflow 3.x load resources (runs, models, traces, etc.) created with MLflow 2.x?","source":"@site/docs/mlflow-3/faqs.mdx","sourceDirName":"mlflow-3","slug":"/mlflow-3/faqs","permalink":"/docs/latest/mlflow-3/faqs","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"docsSidebar","previous":{"title":"Deep Learning Development","permalink":"/docs/latest/mlflow-3/deep-learning"},"next":{"title":"Getting Started with MLflow","permalink":"/docs/latest/getting-started/"}}');var t=o(74848),r=o(28453),a=o(67756);const i={},m="FAQs",s={},f=[{value:"Can MLflow 3.x load resources (runs, models, traces, etc.) created with MLflow 2.x?",id:"can-mlflow-3x-load-resources-runs-models-traces-etc-created-with-mlflow-2x",level:4},{value:"<code>load_model</code> throws a <code>ResourceNotFound</code> error when loading a model created with MLflow 2.x. What&#39;s wrong?",id:"load_model-throws-a-resourcenotfound-error-when-loading-a-model-created-with-mlflow-2x-whats-wrong",level:4},{value:"I want to modify <code>requirements.txt</code> of my model. How can I do that?",id:"i-want-to-modify-requirementstxt-of-my-model-how-can-i-do-that",level:4},{value:"I&#39;m still not ready to upgrade to MLflow 3.x. How can I pin my MLflow version to 2.x?",id:"im-still-not-ready-to-upgrade-to-mlflow-3x-how-can-i-pin-my-mlflow-version-to-2x",level:4}];function p(e){const l={admonition:"admonition",code:"code",h1:"h1",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.header,{children:(0,t.jsx)(l.h1,{id:"faqs",children:"FAQs"})}),"\n",(0,t.jsx)(l.h4,{id:"can-mlflow-3x-load-resources-runs-models-traces-etc-created-with-mlflow-2x",children:"Can MLflow 3.x load resources (runs, models, traces, etc.) created with MLflow 2.x?"}),"\n",(0,t.jsx)(l.p,{children:"Yes, MLflow 3.x can load resources such as runs, models, traces, and more that were created with MLflow 2.x. However, the reverse is not true."}),"\n",(0,t.jsx)(l.admonition,{type:"warning",children:(0,t.jsxs)(l.p,{children:["When testing MLflow 3.x, we strongly recommend using ",(0,t.jsx)(l.strong,{children:"a separate environment"})," to avoid conflicts with MLflow 2.x."]})}),"\n",(0,t.jsxs)(l.h4,{id:"load_model-throws-a-resourcenotfound-error-when-loading-a-model-created-with-mlflow-2x-whats-wrong",children:[(0,t.jsx)(l.code,{children:"load_model"})," throws a ",(0,t.jsx)(l.code,{children:"ResourceNotFound"})," error when loading a model created with MLflow 2.x. What's wrong?"]}),"\n",(0,t.jsx)(l.p,{children:"For example, the following code fails to load the model in MLflow 3.x since the model artifacts are NOT stored as run artifacts:"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-python",children:'import mlflow\n\nwith mlflow.start_run() as run:\n    mlflow.sklearn.log_model(my_model, name="model")\n    mlflow.sklearn.load_model(mlflow.get_artifact_uri("model"))\n    # Throws a `ResourceNotFound` error.\n'})}),"\n",(0,t.jsxs)(l.p,{children:["To avoid this error, call ",(0,t.jsx)(l.code,{children:"mlflow.<flavor>.load_model"})," with the model URI returned by ",(0,t.jsx)(l.code,{children:"mlflow.<flavor>.log_model"}),":"]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-python",children:'import mlflow\n\nwith mlflow.start_run() as run:\n    info = mlflow.sklearn.log_model(my_model, name="model")\n    # if the result of `log_model` is available (recommended)\n    mlflow.sklearn.load_model(info.model_uri)\n    # if only `model_id` is available\n    mlflow.sklearn.load_model(f"models:/{info.model_id}")\n    # if neither `model_id` nor `model_uri` is available (deprecated and will be removed in future versions)\n    mlflow.sklearn.load_model(f"runs:/{run.info.run_id}/model")\n'})}),"\n",(0,t.jsxs)(l.p,{children:["Why does this happen? In MLflow 3.x, the model artifacts are stored in a different location than in MLflow 2.x. The following is a comparison of the two versions using the ",(0,t.jsx)(l.code,{children:"tree"})," format:"]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-shell",children:"# MLflow 2.x\nexperiments/\n  \u2514\u2500\u2500 <experiment_id>/\n    \u2514\u2500\u2500 <run_id>/\n      \u2514\u2500\u2500 artifacts/\n        \u2514\u2500\u2500 ... # model artifacts are stored here\n\n# MLflow 3.x\nexperiments/\n  \u2514\u2500\u2500 <experiment_id>/\n    \u2514\u2500\u2500 models/\n      \u2514\u2500\u2500 <model_id>/\n        \u2514\u2500\u2500 artifacts/\n          \u2514\u2500\u2500 ... # model artifacts are stored here\n"})}),"\n",(0,t.jsxs)(l.h4,{id:"i-want-to-modify-requirementstxt-of-my-model-how-can-i-do-that",children:["I want to modify ",(0,t.jsx)(l.code,{children:"requirements.txt"})," of my model. How can I do that?"]}),"\n",(0,t.jsxs)(l.p,{children:["You can modify ",(0,t.jsx)(l.code,{children:"requirements.txt"})," of your model using ",(0,t.jsx)(a.B,{fn:"mlflow.models.update_model_requirements"})," to add or remove requirements. Here's an example of how to add a requirement to the model:"]}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-python",children:'import mlflow\n\n\nclass DummyModel(mlflow.pyfunc.PythonModel):\n    def predict(self, context, model_input: list[str]) -> list[str]:\n        return model_input\n\n\nmodel_info = mlflow.pyfunc.log_model(name="model", python_model=DummyModel())\nmlflow.models.update_model_requirements(\n    model_uri=model_info.model_uri,\n    operation="add",\n    requirement_list=["scikit-learn"],\n)\n'})}),"\n",(0,t.jsx)(l.h4,{id:"im-still-not-ready-to-upgrade-to-mlflow-3x-how-can-i-pin-my-mlflow-version-to-2x",children:"I'm still not ready to upgrade to MLflow 3.x. How can I pin my MLflow version to 2.x?"}),"\n",(0,t.jsx)(l.p,{children:"You can pin MLflow to the latest 2.x version by using the following command:"}),"\n",(0,t.jsx)(l.pre,{children:(0,t.jsx)(l.code,{className:"language-bash",children:"pip install 'mlflow<3'\n"})})]})}function d(e={}){const{wrapper:l}={...(0,r.R)(),...e.components};return l?(0,t.jsx)(l,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}}}]);