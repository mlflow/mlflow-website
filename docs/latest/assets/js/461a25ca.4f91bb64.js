"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2804],{2371:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/compare-prompt-versions-2082121aeaca4be99a0cf968535141ed.png"},28453:(e,n,t)=>{t.d(n,{R:()=>o,x:()=>a});var i=t(96540);const r={},s=i.createContext(r);function o(e){const n=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:n},e.children)}},53296:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/update-prompt-ui-74a489e65098893bbffe253f43fb210d.png"},72406:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/registered-prompt-b8d47ff0d061d8703b61a9a6e94a77c3.png"},98064:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>d,frontMatter:()=>o,metadata:()=>i,toc:()=>p});const i=JSON.parse('{"id":"prompt-version-mgmt/prompt-registry/create-and-edit-prompts","title":"Create and Edit Prompts","description":"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs.","source":"@site/docs/genai/prompt-version-mgmt/prompt-registry/create-and-edit-prompts.mdx","sourceDirName":"prompt-version-mgmt/prompt-registry","slug":"/prompt-version-mgmt/prompt-registry/create-and-edit-prompts","permalink":"/docs/latest/genai/prompt-version-mgmt/prompt-registry/create-and-edit-prompts","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Create and Edit Prompts","description":"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs."},"sidebar":"genAISidebar","previous":{"title":"Prompt Registry","permalink":"/docs/latest/genai/prompt-version-mgmt/prompt-registry/"},"next":{"title":"Evaluate Prompts","permalink":"/docs/latest/genai/prompt-version-mgmt/prompt-registry/evaluate-prompts"}}');var r=t(74848),s=t(28453);const o={title:"Create and Edit Prompts",description:"Learn how to create new prompts and edit existing ones in the MLflow Prompt Registry using both the UI and Python APIs."},a="Create and Edit Prompts",l={},p=[{value:"Creating a New Prompt",id:"creating-a-new-prompt",level:2},{value:"Using the MLflow UI",id:"using-the-mlflow-ui",level:3},{value:"Using the Python SDK",id:"using-the-python-sdk",level:3},{value:"Editing an Existing Prompt (Creating New Versions)",id:"editing-an-existing-prompt-creating-new-versions",level:2},{value:"Using the MLflow UI",id:"using-the-mlflow-ui-1",level:3},{value:"Using the Python SDK",id:"using-the-python-sdk-1",level:3},{value:"Understanding Immutability",id:"understanding-immutability",level:2},{value:"Comparing Prompt Versions",id:"comparing-prompt-versions",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2},{value:"Prerequisites",id:"prerequisites",level:2}];function m(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"create-and-edit-prompts",children:"Create and Edit Prompts"})}),"\n",(0,r.jsx)(n.p,{children:"This guide walks you through the process of creating new prompts and managing their versions within the MLflow Prompt Registry. You'll learn how to perform these actions using both the MLflow UI and the Python SDK, enabling you to integrate prompt management seamlessly into your development workflow."}),"\n",(0,r.jsx)(n.p,{children:"The key steps and concepts covered include:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Creating a brand new prompt in the registry."}),"\n",(0,r.jsx)(n.li,{children:"Defining prompt templates with variables for dynamic content."}),"\n",(0,r.jsx)(n.li,{children:"Updating existing prompts, thereby creating new immutable versions."}),"\n",(0,r.jsx)(n.li,{children:"Understanding the immutability of prompt versions."}),"\n",(0,r.jsx)(n.li,{children:"Comparing different versions of a prompt to track changes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-a-new-prompt",children:"Creating a New Prompt"}),"\n",(0,r.jsx)(n.p,{children:"You can initiate a new prompt in the MLflow Prompt Registry in two primary ways: through the MLflow UI or programmatically using the Python SDK."}),"\n",(0,r.jsx)(n.h3,{id:"using-the-mlflow-ui",children:"Using the MLflow UI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Navigate to the Prompt Registry section in your MLflow instance."}),"\n",(0,r.jsx)(n.li,{children:'Click on the "Create Prompt" (or similar) button.'}),"\n",(0,r.jsxs)(n.li,{children:["You will be prompted to provide:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Name"}),": A unique name for your new prompt (e.g., ",(0,r.jsx)(n.code,{children:"customer-service-greeting"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Template"}),": The initial text of your prompt. You can include variables using the ",(0,r.jsx)(n.code,{children:"{{variable_name}}"})," syntax (e.g., ",(0,r.jsx)(n.code,{children:"Hello {{customer_name}}, how can I assist you today?"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Initial Commit Message"}),': A brief description of this first version (e.g., "Initial version of customer greeting prompt").']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"(Optional) Version Metadata"}),": Any structured key-value data relevant to this version."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"(Optional) Tags"}),": Key-value tags for organization (e.g., ",(0,r.jsx)(n.code,{children:"app: chatbot"}),", ",(0,r.jsx)(n.code,{children:"language: english"}),")."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Registered Prompt in UI",src:t(72406).A+"",width:"1287",height:"616"})}),"\n",(0,r.jsx)(n.h3,{id:"using-the-python-sdk",children:"Using the Python SDK"}),"\n",(0,r.jsxs)(n.p,{children:["To create a new prompt programmatically, use the ",(0,r.jsx)(n.code,{children:"mlflow.genai.register_prompt()"})," function. This is particularly useful for automating prompt creation or managing prompts as part of a larger script."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import mlflow\n\n# Use double curly braces for variables in the template\ninitial_template = """\\\nSummarize content you are provided with in {{ num_sentences }} sentences.\n\nSentences: {{ sentences }}\n"""\n\n# Register a new prompt\nprompt = mlflow.genai.register_prompt(\n    name="summarization-prompt",\n    template=initial_template,\n    # Optional: Provide a commit message to describe the changes\n    commit_message="Initial commit",\n    # Optional: Specify any additional metadata about the prompt version\n    version_metadata={\n        "author": "author@example.com",\n    },\n    # Optional: Set tags applies to the prompt (across versions)\n    tags={\n        "task": "summarization",\n        "language": "en",\n    },\n)\n\n# The prompt object contains information about the registered prompt\nprint(f"Created prompt \'{prompt.name}\' (version {prompt.version})")\n'})}),"\n",(0,r.jsx)(n.h2,{id:"editing-an-existing-prompt-creating-new-versions",children:"Editing an Existing Prompt (Creating New Versions)"}),"\n",(0,r.jsxs)(n.p,{children:["Once a prompt version is created, its template and initial metadata are ",(0,r.jsx)(n.strong,{children:"immutable"}),". Editing an existing prompt means creating a ",(0,r.jsx)(n.em,{children:"new version"})," of that prompt with your changes. This Git-like behavior ensures a complete history and allows you to revert to previous versions if needed."]}),"\n",(0,r.jsx)(n.h3,{id:"using-the-mlflow-ui-1",children:"Using the MLflow UI"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Navigate to the specific prompt you wish to edit in the Prompt Registry."}),"\n",(0,r.jsx)(n.li,{children:"Select the version you want to base your new version on (often the latest)."}),"\n",(0,r.jsx)(n.li,{children:'Look for an "Edit Prompt" or "Create New Version" button.'}),"\n",(0,r.jsx)(n.li,{children:"Modify the template, update metadata, or change tags as needed."}),"\n",(0,r.jsxs)(n.li,{children:["Provide a new ",(0,r.jsx)(n.strong,{children:"Commit Message"})," describing the changes you made for this new version."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Update Prompt UI",src:t(53296).A+"",width:"1150",height:"594"})}),"\n",(0,r.jsx)(n.h3,{id:"using-the-python-sdk-1",children:"Using the Python SDK"}),"\n",(0,r.jsxs)(n.p,{children:["To create a new version of an existing prompt, you again use the ",(0,r.jsx)(n.code,{children:"mlflow.genai.register_prompt()"})," function, but this time, you provide the ",(0,r.jsx)(n.code,{children:"name"})," of an existing prompt. MLflow will automatically increment the version number."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import mlflow\n\nnew_template = """\\\nYou are an expert summarizer. Condense the following content into exactly {{ num_sentences }} clear and informative sentences that capture the key points.\n\nSentences: {{ sentences }}\n\nYour summary should:\n- Contain exactly {{ num_sentences }} sentences\n- Include only the most important information\n- Be written in a neutral, objective tone\n- Maintain the same level of formality as the original text\n"""\n\n# Register a new version of an existing prompt\nupdated_prompt = mlflow.genai.register_prompt(\n    name="summarization-prompt",  # Specify the existing prompt name\n    template=new_template,\n    commit_message="Improvement",\n    version_metadata={\n        "author": "author@example.com",\n    },\n)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"understanding-immutability",children:"Understanding Immutability"}),"\n",(0,r.jsxs)(n.p,{children:["It's crucial to remember that prompt versions in the MLflow Prompt Registry are immutable. Once ",(0,r.jsx)(n.code,{children:"mlflow.genai.register_prompt()"})," is called and a version is created (or a new version of an existing prompt is made), the template, initial commit message, and initial metadata for ",(0,r.jsx)(n.em,{children:"that specific version"})," cannot be altered. This design choice provides strong guarantees for reproducibility and lineage tracking."]}),"\n",(0,r.jsx)(n.p,{children:"If you need to change a prompt, you always create a new version."}),"\n",(0,r.jsx)(n.h2,{id:"comparing-prompt-versions",children:"Comparing Prompt Versions"}),"\n",(0,r.jsx)(n.p,{children:"The MLflow UI provides tools to compare different versions of a prompt. This typically includes a side-by-side diff view, allowing you to easily see what changed in the template text, metadata, or tags between versions."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Compare Prompt Versions",src:t(2371).A+"",width:"1267",height:"713"})}),"\n",(0,r.jsx)(n.p,{children:"This comparison capability is invaluable for:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Understanding the evolution of a prompt."}),"\n",(0,r.jsx)(n.li,{children:"Identifying unintended changes."}),"\n",(0,r.jsx)(n.li,{children:"Reviewing contributions from team members."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Prompts are created and versioned in the MLflow Prompt Registry using either the UI or the Python SDK (",(0,r.jsx)(n.code,{children:"mlflow.genai.register_prompt()"}),")."]}),"\n",(0,r.jsxs)(n.li,{children:["Prompt templates support variables (e.g., ",(0,r.jsx)(n.code,{children:"{{variable}}"}),") for dynamic content generation."]}),"\n",(0,r.jsxs)(n.li,{children:["Each prompt version is ",(0,r.jsx)(n.strong,{children:"immutable"}),"; edits always result in a new version, preserving history."]}),"\n",(0,r.jsx)(n.li,{children:"Commit messages, version metadata, and tags are essential for organizing and understanding your prompts."}),"\n",(0,r.jsx)(n.li,{children:"The MLflow UI allows you to visually compare prompt versions to track changes."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Access to an MLflow instance with the Prompt Registry enabled."}),"\n",(0,r.jsxs)(n.li,{children:["If using the Python SDK: MLflow installed in your Python environment (",(0,r.jsx)(n.code,{children:"pip install mlflow"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"With these tools and concepts, you can effectively manage the creation and iteration of your prompts, laying a solid foundation for building high-quality GenAI applications."})]})}function d(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(m,{...e})}):m(e)}}}]);