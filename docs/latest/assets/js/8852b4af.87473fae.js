"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3854"],{53771(e,n,t){t.r(n),t.d(n,{metadata:()=>i,default:()=>_,frontMatter:()=>y,contentTitle:()=>w,toc:()=>v,assets:()=>j});var i=JSON.parse('{"id":"eval-monitor/scorers/llm-judge/guidelines","title":"Create a guidelines LLM Judge","description":"Guidelines LLM judges use pass/fail natural language criteria to evaluate GenAI outputs. They excel at evaluating:","source":"@site/docs/genai/eval-monitor/scorers/llm-judge/guidelines.mdx","sourceDirName":"eval-monitor/scorers/llm-judge","slug":"/eval-monitor/scorers/llm-judge/guidelines","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/guidelines","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Built-in LLM Judges","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/predefined"},"next":{"title":"RAG Evaluation with Built-in Judges","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/rag/"}}'),s=t(74848),l=t(28453),r=t(54725),a=t(77541),o=t(10440),c=t(42640),d=t(7043);let u=(0,t(75689).A)("file-check",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);var p=t(78010),m=t(57250),h=t(95986),f=t(83884),g=t(55935),x=t(46077);let y={},w="Create a guidelines LLM Judge",j={},v=[{value:"Benefits",id:"benefits",level:3},{value:"Ways to use guidelines judges",id:"ways-to-use-guidelines-judges",level:2},{value:"How guidelines work",id:"how-guidelines-work",level:2},...f.RM,{value:"1. Built-in <code>Guidelines()</code> judge: global guidelines",id:"1-built-in-guidelines-judge-global-guidelines",level:2},{value:"Examples",id:"examples",level:3},{value:"Parameters",id:"parameters",level:3},{value:"2. Built-in <code>ExpectationsGuidelines()</code> judge: per-row guidelines",id:"2-built-in-expectationsguidelines-judge-per-row-guidelines",level:2},{value:"Example",id:"example",level:3},{value:"Return values",id:"return-values",level:2},{value:"Writing effective guidelines",id:"writing-effective-guidelines",level:2},{value:"Best practices",id:"best-practices",level:3},{value:"Real world examples",id:"real-world-examples",level:2},{value:"Customer service chatbot",id:"customer-service-chatbot",level:3},{value:"Global guidelines for all interactions",id:"global-guidelines-for-all-interactions",level:4},{value:"Document extraction app",id:"document-extraction-app",level:3},{value:"Per-row guidelines for document types",id:"per-row-guidelines-for-document-types",level:4},...g.RM,{value:"Next steps",id:"next-steps",level:2}];function b(e){let n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"create-a-guidelines-llm-judge",children:"Create a guidelines LLM Judge"})}),"\n",(0,s.jsx)(n.p,{children:"Guidelines LLM judges use pass/fail natural language criteria to evaluate GenAI outputs. They excel at evaluating:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Compliance"}),': "Must not include pricing information"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Style/tone"}),': "Maintain professional, empathetic tone"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Requirements"}),': "Must include specific disclaimers"']}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Accuracy"}),': "Use only facts from provided context"']}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"benefits",children:"Benefits"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Business-friendly"}),": Domain experts write criteria without coding"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Flexible"}),": Update criteria without code changes"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Interpretable"}),": Clear pass/fail conditions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Fast iteration"}),": Rapidly test new criteria"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ways-to-use-guidelines-judges",children:"Ways to use guidelines judges"}),"\n",(0,s.jsx)(n.p,{children:"MLflow provides the following guidelines judges:"}),"\n",(0,s.jsx)(h.A,{children:(0,s.jsxs)(p.A,{groupId:"guidelines-type",children:[(0,s.jsx)(m.A,{value:"global",label:"Global guidelines",default:!0,children:(0,s.jsxs)("div",{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsxs)(n.a,{href:"#1-built-in-guidelines-judge-global-guidelines",children:["Built-in ",(0,s.jsx)(n.code,{children:"Guidelines()"})," judge"]})}),": Apply global guidelines uniformly to all rows. Evaluates app inputs/outputs only."]}),(0,s.jsx)(n.p,{children:"Use this judge when:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You want to apply the same evaluation criteria uniformly across all examples"}),"\n",(0,s.jsx)(n.li,{children:"You have consistent quality standards that apply to all outputs"}),"\n",(0,s.jsx)(n.li,{children:"You're evaluating general requirements like tone, style, or compliance"}),"\n"]})]})}),(0,s.jsx)(m.A,{value:"per-row",label:"Per-row guidelines",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:(0,s.jsxs)(n.a,{href:"#2-built-in-expectationsguidelines-judge-per-row-guidelines",children:["Built-in ",(0,s.jsx)(n.code,{children:"ExpectationsGuidelines()"})," judge"]})}),": Apply per-row guidelines labeled by domain experts in an evaluation dataset. Evaluates app inputs/outputs only."]}),(0,s.jsx)(n.p,{children:"Use this judge when:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"You have domain experts who have labeled specific examples with custom guidelines"}),"\n",(0,s.jsx)(n.li,{children:"Different rows require different evaluation criteria"}),"\n",(0,s.jsx)(n.li,{children:"You're evaluating diverse content types that need specialized criteria"}),"\n"]})]})})]})}),"\n",(0,s.jsx)(n.h2,{id:"how-guidelines-work",children:"How guidelines work"}),"\n",(0,s.jsx)(n.p,{children:"Guidelines judges evaluate whether text meets your specified criteria. The judge:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Receives context"}),": Any JSON dictionary containing the data to evaluate (e.g., request, response). You can reference these keys by name directly in your guidelines - see detailed examples"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Applies guidelines"}),": Your natural language rules defining pass/fail conditions"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Makes judgment"}),": Returns a binary pass/fail score with detailed rationale"]}),"\n"]}),"\n",(0,s.jsx)(f.Ay,{}),"\n",(0,s.jsxs)(n.h2,{id:"1-built-in-guidelines-judge-global-guidelines",children:["1. Built-in ",(0,s.jsx)(n.code,{children:"Guidelines()"})," judge: global guidelines"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Guidelines"})," judge applies uniform guidelines across all rows in your evaluation. It automatically extracts request/response data from your trace and evaluates it against your guidelines."]}),"\n",(0,s.jsx)(n.h3,{id:"examples",children:"Examples"}),"\n",(0,s.jsxs)(n.p,{children:["In your guideline, refer to the app's inputs as the ",(0,s.jsx)(n.code,{children:"request"})," and the app's outputs as the ",(0,s.jsx)(n.code,{children:"response"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from mlflow.genai.scorers import Guidelines\nimport mlflow\n\n# Example data\ndata = [\n    {\n        "inputs": {"question": "What is the capital of France?"},\n        "outputs": {"response": "The capital of France is Paris."},\n    },\n    {\n        "inputs": {"question": "What is the capital of Germany?"},\n        "outputs": {"response": "The capital of Germany is Berlin."},\n    },\n]\n\n# Create scorers with global guidelines\nenglish = Guidelines(\n    name="english",\n    guidelines=[\n        "The response must be in English",\n        "The response must be grammatically correct",\n    ],\n)\n\nclarity = Guidelines(\n    name="clarity",\n    guidelines=["The response must be clear, coherent, and concise"],\n    model="openai:/gpt-4o-mini",  # Optional custom judge model\n)\n\n# Evaluate with global guidelines\nresults = mlflow.genai.evaluate(data=data, scorers=[english, clarity])\n'})}),"\n",(0,s.jsx)(x.A,{src:"/images/genai/eval-monitor/guidelines-judge-results.png",alt:"Guidelines judge result"}),"\n",(0,s.jsx)(n.h3,{id:"parameters",children:"Parameters"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Parameter"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Required"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"name"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"str"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Name for the judge, displayed in evaluation results"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"guidelines"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"str | list[str]"})}),(0,s.jsx)(n.td,{children:"Yes"}),(0,s.jsx)(n.td,{children:"Guidelines to apply uniformly to all rows"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"model"})}),(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"str"})}),(0,s.jsx)(n.td,{children:"No"}),(0,s.jsxs)(n.td,{children:["Custom judge model (defaults to ",(0,s.jsx)(n.code,{children:"gpt-4o-mini"}),")"]})]})]})]}),"\n",(0,s.jsxs)(n.h2,{id:"2-built-in-expectationsguidelines-judge-per-row-guidelines",children:["2. Built-in ",(0,s.jsx)(n.code,{children:"ExpectationsGuidelines()"})," judge: per-row guidelines"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"ExpectationsGuidelines"})," judge evaluates against row-specific guidelines from domain experts. This allows different evaluation criteria for each example in your dataset."]}),"\n",(0,s.jsx)(n.h3,{id:"example",children:"Example"}),"\n",(0,s.jsxs)(n.p,{children:["In your guideline, refer to the app's inputs as the ",(0,s.jsx)(n.code,{children:"request"})," and the app's outputs as the ",(0,s.jsx)(n.code,{children:"response"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from mlflow.genai.scorers import ExpectationsGuidelines\nimport mlflow\n\n# Dataset with per-row guidelines\ndata = [\n    {\n        "inputs": {"question": "What is the capital of France?"},\n        "outputs": "The capital of France is Paris.",\n        "expectations": {"guidelines": ["The response must be factual and concise"]},\n    },\n    {\n        "inputs": {"question": "How to learn Python?"},\n        "outputs": "You can read a book or take a course.",\n        "expectations": {\n            "guidelines": ["The response must be helpful and encouraging"]\n        },\n    },\n]\n\n# Evaluate with per-row guidelines\nresults = mlflow.genai.evaluate(data=data, scorers=[ExpectationsGuidelines()])\n'})}),"\n",(0,s.jsx)(x.A,{src:"/images/genai/eval-monitor/expectations-guidelines-judge-results.png",alt:"Expectations Guidelines judge results"}),"\n",(0,s.jsx)(n.h2,{id:"return-values",children:"Return values"}),"\n",(0,s.jsxs)(n.p,{children:["Guidelines judges return an ",(0,s.jsx)(r.B,{fn:"mlflow.entities.Feedback",children:"mlflow.entities.Feedback"})," object containing:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"value"}),": Either ",(0,s.jsx)(n.code,{children:'"yes"'})," (meets guidelines) or ",(0,s.jsx)(n.code,{children:'"no"'})," (fails guidelines)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"rationale"}),": Detailed explanation of why the content passed or failed"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"name"}),": The assessment name (either provided or auto-generated)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"error"}),": Error details if evaluation failed"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"writing-effective-guidelines",children:"Writing effective guidelines"}),"\n",(0,s.jsx)(n.p,{children:"Well-written guidelines are crucial for accurate evaluation. Follow these best practices:"}),"\n",(0,s.jsx)(n.h3,{id:"best-practices",children:"Best practices"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Be specific and measurable"})}),"\n",(0,s.jsx)(n.p,{children:'\u2705 "The response must not include specific pricing amounts or percentages"'}),"\n",(0,s.jsx)(n.p,{children:'\u274C "Don\'t talk about money"'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use clear pass/fail conditions"})}),"\n",(0,s.jsx)(n.p,{children:'\u2705 "If asked about pricing, the response must direct users to the pricing page"'}),"\n",(0,s.jsx)(n.p,{children:'\u274C "Handle pricing questions appropriately"'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Structure complex requirements"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'guidelines = [\n    "The response must include a greeting if first message.",\n    "The response must address the user\'s specific question.",\n    "The response must end with an offer to help further.",\n    "The response must not exceed 150 words.",\n]\n'})}),"\n",(0,s.jsx)(n.h2,{id:"real-world-examples",children:"Real world examples"}),"\n",(0,s.jsx)(n.h3,{id:"customer-service-chatbot",children:"Customer service chatbot"}),"\n",(0,s.jsx)(n.p,{children:"Here are practical guidelines examples for evaluating a customer service chatbot across different scenarios:"}),"\n",(0,s.jsx)(n.h4,{id:"global-guidelines-for-all-interactions",children:"Global guidelines for all interactions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from mlflow.genai.scorers import Guidelines\nimport mlflow\n\n# Define global standards for all customer interactions\ntone_guidelines = Guidelines(\n    name="customer_service_tone",\n    guidelines="""The response must maintain our brand voice which is:\n    - Professional yet warm and conversational (avoid corporate jargon)\n    - Empathetic, acknowledging emotional context before jumping to solutions\n    - Proactive in offering help without being pushy\n\n    Specifically:\n    - If the customer expresses frustration, anger, or disappointment, the first sentence must acknowledge their emotion\n    - The response must use "I" statements to take ownership (e.g., "I understand" not "We understand")\n    - The response must avoid phrases that minimize concerns like "simply", "just", or "obviously"\n    - The response must end with a specific next step or open-ended offer to help, not generic closings""",\n)\n\ncompliance_guidelines = Guidelines(\n    name="policy_compliance",\n    guidelines=[\n        """Refund and return policies:\n        - The response must not promise refunds beyond the 30-day return window\n        - The response must mention restocking fees for electronics (15%) if discussing returns\n        - For items over $500, the response must note that manager approval is required\n        - The response must not waive shipping fees without checking customer loyalty tier""",\n        """Data privacy and security:\n        - The response must never ask for full credit card numbers, SSN, or passwords\n        - The response must not reference other customers\' orders or information\n        - When discussing order details, the response must only reference the last 4 digits of payment methods\n        - The response must direct customers to secure portal for updating payment information""",\n        """Commitment limitations:\n        - The response must not guarantee specific delivery dates without system verification\n        - The response must include disclaimer about "estimated" times when discussing shipping\n        - The response must not promise price matches without mentioning the verification process\n        - For out-of-stock items, the response must not commit to restock dates""",\n    ],\n)\n\n# Example customer service data\ncustomer_interactions = [\n    {\n        "inputs": {\n            "messages": [\n                {\n                    "role": "user",\n                    "content": "I\'ve been waiting 2 hours on hold! This is ridiculous!",\n                }\n            ]\n        },\n        "outputs": {\n            "choices": [\n                {\n                    "message": {\n                        "content": "I completely understand your frustration about the long wait time. That\'s absolutely not the experience we want you to have. I\'m here to help you right now - what can I assist you with today?"\n                    }\n                }\n            ]\n        },\n    },\n    {\n        "inputs": {\n            "messages": [\n                {\n                    "role": "user",\n                    "content": "Can I return my laptop? I bought it 45 days ago.",\n                }\n            ]\n        },\n        "outputs": {\n            "choices": [\n                {\n                    "message": {\n                        "content": "I\'d be happy to look into return options for you. Since our standard return window is 30 days and your purchase was 45 days ago, I\'ll need to check if there are any exceptions we can make. For electronics like laptops, we do have a 15% restocking fee. May I have your order number to review your specific situation?"\n                    }\n                }\n            ]\n        },\n    },\n]\n\n# Evaluate customer service interactions\nresults = mlflow.genai.evaluate(\n    data=customer_interactions, scorers=[tone_guidelines, compliance_guidelines]\n)\n'})}),"\n",(0,s.jsx)(n.h3,{id:"document-extraction-app",children:"Document extraction app"}),"\n",(0,s.jsx)(n.p,{children:"Here are practical guidelines examples for evaluating a document extraction application:"}),"\n",(0,s.jsx)(n.h4,{id:"per-row-guidelines-for-document-types",children:"Per-row guidelines for document types"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'from mlflow.genai.scorers import ExpectationsGuidelines\nimport mlflow\n\n\n# Dataset with document-type specific guidelines\ndocument_extraction_data = [\n    {\n        "inputs": {\n            "document_type": "invoice",\n            "document_text": "Invoice #INV-2024-001\\nBill To: Acme Corp\\nAmount: $1,234.56\\nDue Date: 2024-03-15",\n        },\n        "outputs": {\n            "invoice_number": "INV-2024-001",\n            "customer": "Acme Corp",\n            "total_amount": 1234.56,\n            "due_date": "2024-03-15",\n        },\n        "expectations": {\n            "guidelines": [\n                """Invoice identification and classification:\n               - Must extract invoice_number preserving exact format including prefixes/suffixes\n               - Must identify invoice type (standard, credit memo, proforma) if specified\n               - Must extract both invoice date and due date, calculating days until due\n               - Must identify if this is a partial, final, or supplementary invoice\n               - For recurring invoices, must extract frequency and period covered""",\n                """Financial data extraction and validation:\n               - Line items must be extracted as array with: description, quantity, unit_price, total\n               - Must identify and separate: subtotal, tax amounts (with rates), shipping, discounts\n               - Currency must be identified explicitly, not assumed to be USD\n               - For discounts, must specify if percentage or fixed amount and what it applies to\n               - Payment terms must be extracted (e.g., "Net 30", "2/10 Net 30")\n               - Must flag any mathematical inconsistencies between line items and totals""",\n                """Vendor and customer information:\n               - Must extract complete billing and shipping addresses as separate objects\n               - Company names must include any DBA ("doing business as") variations\n               - Must extract tax IDs, business registration numbers if present\n               - Contact information must be categorized (billing contact vs. delivery contact)\n               - Must preserve any customer account numbers or reference codes""",\n            ]\n        },\n    },\n    {\n        "inputs": {\n            "document_type": "contract",\n            "document_text": "This agreement between Party A and Party B commences on January 1, 2024...",\n        },\n        "outputs": {\n            "parties": ["Party A", "Party B"],\n            "effective_date": "2024-01-01",\n            "term_length": "Not specified",\n        },\n        "expectations": {\n            "guidelines": [\n                """Party identification and roles:\n               - Must extract all parties with their full legal names and entity types (Inc., LLC, etc.)\n               - Must identify party roles (buyer/seller, licensee/licensor, employer/employee)\n               - Must extract any parent company relationships or guarantors mentioned\n               - Must capture all representatives, their titles, and authority to sign\n               - Must identify jurisdiction for each party if specified""",\n                """Critical dates and terms extraction:\n               - Must differentiate between: execution date, effective date, and expiration date\n               - Must extract notice periods for termination (e.g., "30 days written notice")\n               - Must identify any automatic renewal clauses and their conditions\n               - Must extract all milestone dates and deliverable deadlines\n               - For amendments, must note which version/date of original contract is modified""",\n                """Obligations and risk analysis:\n               - Must extract all payment terms, amounts, and schedules\n               - Must identify liability caps, indemnification clauses, and insurance requirements\n               - Must flag any non-standard clauses that deviate from typical contracts\n               - Must extract all conditions precedent and subsequent\n               - Must identify dispute resolution mechanism (arbitration, litigation, jurisdiction)\n               - Must extract any non-compete, non-solicitation, or confidentiality periods""",\n            ]\n        },\n    },\n    {\n        "inputs": {\n            "document_type": "medical_record",\n            "document_text": "Patient: John Doe\\nDOB: 1985-06-15\\nDiagnosis: Type 2 Diabetes\\nMedications: Metformin 500mg",\n        },\n        "outputs": {\n            "patient_name": "John Doe",\n            "date_of_birth": "1985-06-15",\n            "diagnoses": ["Type 2 Diabetes"],\n            "medications": [{"name": "Metformin", "dosage": "500mg"}],\n        },\n        "expectations": {\n            "guidelines": [\n                """HIPAA compliance and privacy protection:\n               - Must never extract full SSN (only last 4 digits if needed for matching)\n               - Must never include full insurance policy numbers or member IDs\n               - Must redact or generalize sensitive mental health or substance abuse information\n               - For minors, must flag records requiring additional consent for sharing\n               - Must not extract genetic testing results without explicit permission flag""",\n                """Clinical data extraction standards:\n               - Diagnoses must use ICD-10 codes when available, with lay descriptions\n               - Medications must include: generic name, brand name, dosage, frequency, route, start date\n               - Must differentiate between active medications and discontinued/past medications\n               - Allergies must specify type (drug, food, environmental) and reaction severity\n               - Lab results must include: value, unit, reference range, abnormal flags\n               - Vital signs must include measurement date/time and measurement conditions""",\n                """Data quality and medical accuracy:\n               - Must flag any potentially dangerous drug interactions if multiple meds listed\n               - Must identify if vaccination records are up-to-date based on CDC guidelines\n               - Must extract both chief complaint and final diagnosis separately\n               - For chronic conditions, must note date of first diagnosis vs. most recent visit\n               - Must preserve clinical abbreviations but also provide expansions\n               - Must extract provider name, credentials, and NPI number if available""",\n            ]\n        },\n    },\n]\n\n\nresults = mlflow.genai.evaluate(\n    data=document_extraction_data, scorers=[ExpectationsGuidelines()]\n)\n'})}),"\n",(0,s.jsx)(g.Ay,{}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(a.A,{icon:c.A,title:"Use built-in LLM judges",description:"Evaluate quality with MLflow's other research-backed, built-in LLM judges",href:"/genai/eval-monitor/scorers/llm-judge/predefined/#available-judges"}),(0,s.jsx)(a.A,{icon:d.A,title:"Create custom LLM judges",description:"Build custom judges for your specific needs",href:"/genai/eval-monitor/scorers/llm-judge/custom-judges"}),(0,s.jsx)(a.A,{icon:u,title:"Align judges with human feedback",description:"Improve judge accuracy to match your quality standards",href:"/genai/eval-monitor/scorers/llm-judge/alignment"})]})]})}function _(e={}){let{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(b,{...e})}):b(e)}},83884(e,n,t){t.d(n,{Ay:()=>a,RM:()=>l});var i=t(74848),s=t(28453);let l=[{value:"Prerequisites for running the examples",id:"prerequisites-for-running-the-examples",level:2}];function r(e){let n={a:"a",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"prerequisites-for-running-the-examples",children:"Prerequisites for running the examples"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Install MLflow and required packages"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"pip install --upgrade mlflow\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Create an MLflow experiment by following the ",(0,i.jsx)(n.a,{href:"/genai/getting-started/connect-environment/",children:"setup your environment quickstart"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["(Optional, if using OpenAI models) Use the native OpenAI SDK to connect to OpenAI-hosted models. Select a model from the ",(0,i.jsx)(n.a,{href:"https://platform.openai.com/docs/models",children:"available OpenAI models"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import mlflow\nimport os\nimport openai\n\n# Ensure your OPENAI_API_KEY is set in your environment\n# os.environ["OPENAI_API_KEY"] = "<YOUR_API_KEY>" # Uncomment and set if not globally configured\n\n# Enable auto-tracing for OpenAI\nmlflow.openai.autolog()\n\n# Create an OpenAI client\nclient = openai.OpenAI()\n\n# Select an LLM\nmodel_name = "gpt-4o-mini"\n'})}),"\n"]}),"\n"]})]})}function a(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},55935(e,n,t){t.d(n,{Ay:()=>a,RM:()=>l});var i=t(74848),s=t(28453);let l=[{value:"Select the LLM that powers the judge",id:"select-the-llm-that-powers-the-judge",level:2}];function r(e){let n={a:"a",code:"code",h2:"h2",p:"p",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"select-the-llm-that-powers-the-judge",children:"Select the LLM that powers the judge"}),"\n",(0,i.jsxs)(n.p,{children:["You can change the judge model by using the ",(0,i.jsx)(n.code,{children:"model"})," argument in the judge definition. The model must be specified in the format ",(0,i.jsx)(n.code,{children:"<provider>:/<model-name>"}),", where ",(0,i.jsx)(n.code,{children:"<provider>"})," is a LiteLLM-compatible model provider."]}),"\n",(0,i.jsxs)(n.p,{children:["For a list of supported models, see ",(0,i.jsx)(n.a,{href:"/genai/eval-monitor/scorers/llm-judge/custom-judges/#selecting-judge-models",children:"selecting judge models"}),"."]})]})}function a(e={}){let{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(r,{...e})}):r(e)}},75689(e,n,t){t.d(n,{A:()=>o});var i=t(96540);let s=e=>{let n=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase());return n.charAt(0).toUpperCase()+n.slice(1)},l=(...e)=>e.filter((e,n,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,i.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:a="",children:o,iconNode:c,...d},u)=>(0,i.createElement)("svg",{ref:u,...r,width:n,height:n,stroke:e,strokeWidth:s?24*Number(t)/Number(n):t,className:l("lucide",a),...!o&&!(e=>{for(let n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,n])=>(0,i.createElement)(e,n)),...Array.isArray(o)?o:[o]])),o=(e,n)=>{let t=(0,i.forwardRef)(({className:t,...r},o)=>(0,i.createElement)(a,{ref:o,iconNode:n,className:l(`lucide-${s(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...r}));return t.displayName=s(e),t}},42640(e,n,t){t.d(n,{A:()=>i});let i=(0,t(75689).A)("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]])},7043(e,n,t){t.d(n,{A:()=>i});let i=(0,t(75689).A)("hammer",[["path",{d:"m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9",key:"eefl8a"}],["path",{d:"m18 15 4-4",key:"16gjal"}],["path",{d:"m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5",key:"b7pghm"}]])},57250(e,n,t){t.d(n,{A:()=>l});var i=t(74848);t(96540);var s=t(34164);function l({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,s.A)("tabItem_Ymn6",t),hidden:n,children:e})}},78010(e,n,t){t.d(n,{A:()=>w});var i=t(74848),s=t(96540),l=t(34164),r=t(88287),a=t(28584),o=t(56347),c=t(99989),d=t(96629),u=t(80618),p=t(41367);function m(e){return s.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,s.isValidElement)(e)&&function(e){let{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h({value:e,tabValues:n}){return n.some(n=>n.value===e)}var f=t(19863);function g({className:e,block:n,selectedValue:t,selectValue:s,tabValues:r}){let o=[],{blockElementScrollPositionUntilNextRender:c}=(0,a.a_)(),d=e=>{let n=e.currentTarget,i=r[o.indexOf(n)].value;i!==t&&(c(n),s(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{let t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1]}}n?.focus()};return(0,i.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:s})=>(0,i.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:u,onClick:d,...s,className:(0,l.A)("tabs__item","tabItem_LNqP",s?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function x({lazy:e,children:n,selectedValue:t}){let r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){let e=r.find(e=>e.props.value===t);return e?(0,s.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,i.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function y(e){let n=function(e){let n,{defaultValue:t,queryString:i=!1,groupId:l}=e,r=function(e){let{values:n,children:t}=e;return(0,s.useMemo)(()=>{let e=n??m(t).map(({props:{value:e,label:n,attributes:t,default:i}})=>({value:e,label:n,attributes:t,default:i})),i=(0,u.XI)(e,(e,n)=>e.value===n.value);if(i.length>0)throw Error(`Docusaurus error: Duplicate values "${i.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[n,t])}(e),[a,f]=(0,s.useState)(()=>(function({defaultValue:e,tabValues:n}){if(0===n.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!h({value:e,tabValues:n}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let t=n.find(e=>e.default)??n[0];if(!t)throw Error("Unexpected error: 0 tabValues");return t.value})({defaultValue:t,tabValues:r})),[g,x]=function({queryString:e=!1,groupId:n}){let t=(0,o.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,d.aZ)(i),(0,s.useCallback)(e=>{if(!i)return;let n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})},[i,t])]}({queryString:i,groupId:l}),[y,w]=function({groupId:e}){let n=e?`docusaurus.tab.${e}`:null,[t,i]=(0,p.Dv)(n);return[t,(0,s.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:l}),j=h({value:n=g??y,tabValues:r})?n:null;return(0,c.A)(()=>{j&&f(j)},[j]),{selectedValue:a,selectValue:(0,s.useCallback)(e=>{if(!h({value:e,tabValues:r}))throw Error(`Can't select invalid tab value=${e}`);f(e),x(e),w(e)},[x,w,r]),tabValues:r}}(e);return(0,i.jsxs)("div",{className:(0,l.A)(r.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,i.jsx)(g,{...n,...e}),(0,i.jsx)(x,{...n,...e})]})}function w(e){let n=(0,f.A)();return(0,i.jsx)(y,{...e,children:m(e.children)},String(n))}},54725(e,n,t){t.d(n,{B:()=>r});var i=t(74848);t(96540);var s=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),l=t(66497);function r({fn:e,children:n,hash:t}){let r=(e=>{let n=e.split(".");for(let e=n.length;e>0;e--){let t=n.slice(0,e).join(".");if(s[t])return t}return null})(e);if(!r)return(0,i.jsx)(i.Fragment,{children:n});let a=(0,l.default)(`/${s[r]}#${t??e}`);return(0,i.jsx)("a",{href:a,target:"_blank",children:n??(0,i.jsxs)("code",{children:[e,"()"]})})}},46077(e,n,t){t.d(n,{A:()=>l});var i=t(74848);t(96540);var s=t(66497);function l({src:e,alt:n,width:t,caption:l,className:r}){return(0,i.jsxs)("div",{className:`container_JwLF ${r||""}`,children:[(0,i.jsx)("div",{className:"imageWrapper_RfGN",style:t?{width:t}:{},children:(0,i.jsx)("img",{src:(0,s.default)(e),alt:n,className:"image_bwOA"})}),l&&(0,i.jsx)("p",{className:"caption_jo2G",children:l})]})}},95986(e,n,t){t.d(n,{A:()=>s});var i=t(74848);t(96540);function s({children:e}){return(0,i.jsx)("div",{className:"wrapper_sf5q",children:e})}},77541(e,n,t){t.d(n,{A:()=>c});var i=t(74848);t(96540);var s=t(95310),l=t(34164);let r="tileImage_O4So";var a=t(66497),o=t(92802);function c({icon:e,image:n,imageDark:t,imageWidth:c,imageHeight:d,iconSize:u=32,containerHeight:p,title:m,description:h,href:f,linkText:g="Learn more \u2192",className:x}){if(!e&&!n)throw Error("TileCard requires either an icon or image prop");let y=p?{height:`${p}px`}:{},w={};return c&&(w.width=`${c}px`),d&&(w.height=`${d}px`),(0,i.jsxs)(s.A,{href:f,className:(0,l.A)("tileCard_NHsj",x),children:[(0,i.jsx)("div",{className:"tileIcon_pyoR",style:y,children:e?(0,i.jsx)(e,{size:u}):t?(0,i.jsx)(o.A,{sources:{light:(0,a.default)(n),dark:(0,a.default)(t)},alt:m,className:r,style:w}):(0,i.jsx)("img",{src:(0,a.default)(n),alt:m,className:r,style:w})}),(0,i.jsx)("h3",{children:m}),(0,i.jsx)("p",{children:h}),(0,i.jsx)("div",{className:"tileLink_iUbu",children:g})]})}},10440(e,n,t){t.d(n,{A:()=>l});var i=t(74848);t(96540);var s=t(34164);function l({children:e,className:n}){return(0,i.jsx)("div",{className:(0,s.A)("tilesGrid_hB9N",n),children:e})}},28453(e,n,t){t.d(n,{R:()=>r,x:()=>a});var i=t(96540);let s={},l=i.createContext(s);function r(e){let n=i.useContext(l);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),i.createElement(l.Provider,{value:n},e.children)}}}]);