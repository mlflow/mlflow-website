"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["3564"],{39711(e,l,t){t.r(l),t.d(l,{metadata:()=>r,default:()=>y,frontMatter:()=>m,contentTitle:()=>f,toc:()=>u,assets:()=>w});var r=JSON.parse('{"id":"tracing/collect-user-feedback/index","title":"Collect User Feedback","description":"Capturing user feedback is critical for understanding the real-world quality of your GenAI application. MLflow\'s Feedback API provides a structured, standardized approach to collecting, storing, and analyzing user feedback directly within your traces.","source":"@site/docs/genai/tracing/collect-user-feedback/index.mdx","sourceDirName":"tracing/collect-user-feedback","slug":"/tracing/collect-user-feedback/","permalink":"/mlflow-website/docs/latest/genai/tracing/collect-user-feedback/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Tag Traces","permalink":"/mlflow-website/docs/latest/genai/tracing/attach-tags/"},"next":{"title":"Redact Sensitive Data","permalink":"/mlflow-website/docs/latest/genai/tracing/observe-with-traces/masking"}}'),a=t(74848),n=t(28453),i=t(54725),o=t(10440),c=t(77541),s=t(47792),p=t(98445),d=t(22864),h=t(66497);let m={},f="Collect User Feedback",w={},u=[{value:"Adding Feedback with MLflow UI",id:"adding-feedback-with-mlflow-ui",level:2},{value:"Adding Feedback with API",id:"adding-feedback-with-api",level:2},{value:"Supported Value Types",id:"supported-value-types",level:2},{value:"Supported Feedback Sources",id:"supported-feedback-sources",level:2},{value:"Next Steps",id:"next-steps",level:2}];function _(e){let l={code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.header,{children:(0,a.jsx)(l.h1,{id:"collect-user-feedback",children:"Collect User Feedback"})}),"\n",(0,a.jsx)(l.p,{children:"Capturing user feedback is critical for understanding the real-world quality of your GenAI application. MLflow's Feedback API provides a structured, standardized approach to collecting, storing, and analyzing user feedback directly within your traces."}),"\n",(0,a.jsx)(l.h2,{id:"adding-feedback-with-mlflow-ui",children:"Adding Feedback with MLflow UI"}),"\n",(0,a.jsx)("video",{src:(0,h.default)("/images/llms/tracing/logging-feedback.mp4"),controls:!0,loop:!0,autoPlay:!0,muted:!0,"aria-label":"Add Feedback"}),"\n",(0,a.jsx)(l.h2,{id:"adding-feedback-with-api",children:"Adding Feedback with API"}),"\n",(0,a.jsxs)(l.p,{children:["To annotate traces with feedback programmatically, use the ",(0,a.jsx)(i.B,{fn:"mlflow.log_feedback"})," API."]}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-python",children:'import mlflow\nfrom mlflow.entities import AssessmentSource, AssessmentSourceType\n\nmlflow.log_feedback(\n    trace_id="<your trace id>",\n    name="user_satisfaction",\n    value=True,\n    rationale="User indicated response was helpful",\n    source=AssessmentSource(\n        source_type=AssessmentSourceType.HUMAN, source_id="user_123"\n    ),\n)\n'})}),"\n",(0,a.jsxs)(l.p,{children:["If you have a ",(0,a.jsx)(l.code,{children:"Feedback"})," object already (e.g., a response from LLM-as-a-Judge), you can log it\ndirectly using the ",(0,a.jsx)(i.B,{fn:"mlflow.log_assessment"})," API. This is equivalent to using the"]}),"\n",(0,a.jsxs)(l.p,{children:[(0,a.jsx)(i.B,{fn:"mlflow.log_feedback"})," API with unpacked fields."]}),"\n",(0,a.jsx)(l.pre,{children:(0,a.jsx)(l.code,{className:"language-python",children:'import mlflow\nfrom mlflow.genai.judges import make_judge\nfrom typing import Literal\n\ncoherence_judge = make_judge(\n    name="coherence",\n    instructions=(\n        "Evaluate if the response is coherent, maintaining a constant tone "\n        "and following a clear flow of thoughts/concepts"\n        "Trace: {{ trace }}\\n"\n    ),\n    feedback_value_type=Literal["coherent", "somewhat coherent", "incoherent"],\n    model="anthropic:/claude-opus-4-1-20250805",\n)\n\ntrace = mlflow.get_trace("<your trace id>")\nfeedback = coherence_judge(trace=trace)\n\nmlflow.log_assessment(trace_id="<your trace id>", assessment=feedback)\n# Equivalent to log_feedback(trace_id="<trace_id>", name=feedback.name, value=feedback.value, ...)"\n'})}),"\n",(0,a.jsx)(l.h2,{id:"supported-value-types",children:"Supported Value Types"}),"\n",(0,a.jsx)(l.p,{children:"MLflow feedback supports various formats to match your application's needs:"}),"\n",(0,a.jsxs)(l.table,{children:[(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"Feedback Type"}),(0,a.jsx)(l.th,{children:"Description"}),(0,a.jsx)(l.th,{children:"Example Use Cases"})]})}),(0,a.jsxs)(l.tbody,{children:[(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"Boolean"})}),(0,a.jsxs)(l.td,{children:["Simple ",(0,a.jsx)(l.code,{children:"True"}),"/",(0,a.jsx)(l.code,{children:"False"})," feedback"]}),(0,a.jsx)(l.td,{children:"Thumbs up/down, correct/incorrect"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"Numeric"})}),(0,a.jsx)(l.td,{children:"Integer or float ratings"}),(0,a.jsx)(l.td,{children:"1-5 star ratings, confidence scores"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"Text"})}),(0,a.jsx)(l.td,{children:"Free-form text feedback"}),(0,a.jsx)(l.td,{children:"Detailed quality breakdowns"})]})]})]}),"\n",(0,a.jsx)(l.h2,{id:"supported-feedback-sources",children:"Supported Feedback Sources"}),"\n",(0,a.jsxs)(l.p,{children:["The ",(0,a.jsx)(l.code,{children:"source"})," field of the feedback provides information about where the feedback came from."]}),"\n",(0,a.jsxs)(l.table,{children:[(0,a.jsx)(l.thead,{children:(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.th,{children:"Source Type"}),(0,a.jsx)(l.th,{children:"Description"}),(0,a.jsx)(l.th,{children:"Example Use Cases"})]})}),(0,a.jsxs)(l.tbody,{children:[(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"HUMAN"})}),(0,a.jsx)(l.td,{children:"Human feedback"}),(0,a.jsx)(l.td,{children:"User thumbs up/down, correct/incorrect"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"LLM_JUDGE"})}),(0,a.jsx)(l.td,{children:"LLM-based feedback"}),(0,a.jsx)(l.td,{children:"Score traces with an LLM-based judge"})]}),(0,a.jsxs)(l.tr,{children:[(0,a.jsx)(l.td,{children:(0,a.jsx)(l.strong,{children:"CODE"})}),(0,a.jsx)(l.td,{children:"Programmatic feedback"}),(0,a.jsx)(l.td,{children:"Score traces with a programmatic checker"})]})]})]}),"\n",(0,a.jsx)(l.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsxs)(o.A,{children:[(0,a.jsx)(c.A,{icon:s.A,iconSize:48,title:"Feedback Concepts",description:"Deep dive into feedback architecture, schema, and best practices",href:"/genai/concepts/feedback",linkText:"Learn concepts \u2192",containerHeight:64}),(0,a.jsx)(c.A,{icon:p.A,iconSize:48,title:"Search and Analyze Traces",description:"Query traces with feedback data and analyze patterns for quality insights",href:"/genai/tracing/search-traces",linkText:"Start analyzing \u2192",containerHeight:64}),(0,a.jsx)(c.A,{icon:d.A,iconSize:48,title:"Evaluate Traces",description:"Learn how to evaluate traces with feedback data and analyze patterns for quality insights",href:"/genai/eval-monitor",linkText:"Start evaluating \u2192",containerHeight:64})]})]})}function y(e={}){let{wrapper:l}={...(0,n.R)(),...e.components};return l?(0,a.jsx)(l,{...e,children:(0,a.jsx)(_,{...e})}):_(e)}},75689(e,l,t){t.d(l,{A:()=>c});var r=t(96540);let a=e=>{let l=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,l,t)=>t?t.toUpperCase():l.toLowerCase());return l.charAt(0).toUpperCase()+l.slice(1)},n=(...e)=>e.filter((e,l,t)=>!!e&&""!==e.trim()&&t.indexOf(e)===l).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,r.forwardRef)(({color:e="currentColor",size:l=24,strokeWidth:t=2,absoluteStrokeWidth:a,className:o="",children:c,iconNode:s,...p},d)=>(0,r.createElement)("svg",{ref:d,...i,width:l,height:l,stroke:e,strokeWidth:a?24*Number(t)/Number(l):t,className:n("lucide",o),...!c&&!(e=>{for(let l in e)if(l.startsWith("aria-")||"role"===l||"title"===l)return!0})(p)&&{"aria-hidden":"true"},...p},[...s.map(([e,l])=>(0,r.createElement)(e,l)),...Array.isArray(c)?c:[c]])),c=(e,l)=>{let t=(0,r.forwardRef)(({className:t,...i},c)=>(0,r.createElement)(o,{ref:c,iconNode:l,className:n(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...i}));return t.displayName=a(e),t}},22864(e,l,t){t.d(l,{A:()=>r});let r=(0,t(75689).A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},98445(e,l,t){t.d(l,{A:()=>r});let r=(0,t(75689).A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]])},47792(e,l,t){t.d(l,{A:()=>r});let r=(0,t(75689).A)("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]])},54725(e,l,t){t.d(l,{B:()=>i});var r=t(74848);t(96540);var a=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),n=t(66497);function i({fn:e,children:l,hash:t}){let i=(e=>{let l=e.split(".");for(let e=l.length;e>0;e--){let t=l.slice(0,e).join(".");if(a[t])return t}return null})(e);if(!i)return(0,r.jsx)(r.Fragment,{children:l});let o=(0,n.default)(`/${a[i]}#${t??e}`);return(0,r.jsx)("a",{href:o,target:"_blank",children:l??(0,r.jsxs)("code",{children:[e,"()"]})})}},77541(e,l,t){t.d(l,{A:()=>s});var r=t(74848);t(96540);var a=t(95310),n=t(34164);let i="tileImage_O4So";var o=t(66497),c=t(92802);function s({icon:e,image:l,imageDark:t,imageWidth:s,imageHeight:p,iconSize:d=32,containerHeight:h,title:m,description:f,href:w,linkText:u="Learn more \u2192",className:_}){if(!e&&!l)throw Error("TileCard requires either an icon or image prop");let y=h?{height:`${h}px`}:{},g={};return s&&(g.width=`${s}px`),p&&(g.height=`${p}px`),(0,r.jsxs)(a.A,{href:w,className:(0,n.A)("tileCard_NHsj",_),children:[(0,r.jsx)("div",{className:"tileIcon_pyoR",style:y,children:e?(0,r.jsx)(e,{size:d}):t?(0,r.jsx)(c.A,{sources:{light:(0,o.default)(l),dark:(0,o.default)(t)},alt:m,className:i,style:g}):(0,r.jsx)("img",{src:(0,o.default)(l),alt:m,className:i,style:g})}),(0,r.jsx)("h3",{children:m}),(0,r.jsx)("p",{children:f}),(0,r.jsx)("div",{className:"tileLink_iUbu",children:u})]})}},10440(e,l,t){t.d(l,{A:()=>n});var r=t(74848);t(96540);var a=t(34164);function n({children:e,className:l}){return(0,r.jsx)("div",{className:(0,a.A)("tilesGrid_hB9N",l),children:e})}},28453(e,l,t){t.d(l,{R:()=>i,x:()=>o});var r=t(96540);let a={},n=r.createContext(a);function i(e){let l=r.useContext(n);return r.useMemo(function(){return"function"==typeof e?e(l):{...l,...e}},[l,e])}function o(e){let l;return l=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),r.createElement(n.Provider,{value:l},e.children)}}}]);