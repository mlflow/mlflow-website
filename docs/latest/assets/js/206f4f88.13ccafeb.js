"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[9903],{24629:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/tag-exp-run-relationship-fc898eccc4bb05fe59f41372ab5f6b50.svg"},24641:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"getting-started/logging-first-model/step3-create-experiment/index","title":"Creating Experiments","description":"In the previous section, we became familiar with the MLflow Client and its search_experiments API.","source":"@site/docs/getting-started/logging-first-model/step3-create-experiment/index.mdx","sourceDirName":"getting-started/logging-first-model/step3-create-experiment","slug":"/getting-started/logging-first-model/step3-create-experiment/","permalink":"/docs/latest/getting-started/logging-first-model/step3-create-experiment/","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3}}');var s=t(74848),r=t(28453);function a(e){let{items:n}=e;return n&&0!==n.length?(0,s.jsx)("ul",{style:{fontSize:"1.25rem"},children:n.map((e=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("li",{className:"badge badge--info",children:e.name}),e.items?(0,s.jsx)(a,{items:e.items}):(0,s.jsx)("br",{})]})))}):null}const o={sidebar_position:3},l="Creating Experiments",c={},d=[{value:"Viewing the MLflow UI",id:"viewing-the-mlflow-ui",level:2},{value:"Notes on Tags vs Experiments",id:"notes-on-tags-vs-experiments",level:2},{value:"Creating the Apples Experiment with Meaningful tags",id:"creating-the-apples-experiment-with-meaningful-tags",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"creating-experiments",children:"Creating Experiments"})}),"\n",(0,s.jsxs)(n.p,{children:["In the previous section, we became familiar with the MLflow Client and its ",(0,s.jsx)(n.code,{children:"search_experiments"})," API.\nBefore we get into creating experiments and adding metadata tags to them, let's take a brief look at the\nMLflow UI."]}),"\n",(0,s.jsxs)(n.p,{children:["In the first section of this tutorial, we started the MLflow Tracking Server from a command prompt, specifying the\nhost as ",(0,s.jsx)(n.code,{children:"127.0.0.1"})," and the port as ",(0,s.jsx)(n.code,{children:"8080"}),". Let's go to the UI and see what the Default Experiment looks like."]}),"\n",(0,s.jsx)(n.h2,{id:"viewing-the-mlflow-ui",children:"Viewing the MLflow UI"}),"\n",(0,s.jsxs)(n.p,{children:["In order to see the MLflow UI, we simply have to use a web browser to connect to the MLflow Tracking Server and navigate to ",(0,s.jsx)(n.a,{href:"http://127.0.0.1:8080",children:"http://127.0.0.1:8080"}),".\nOnce navigating to the url for the MLflow UI, you will see the default experiment with no run data."]}),"\n",(0,s.jsx)("figure",{style:{width:"95%",textAlign:"center",margin:0},children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"A freshly initialized MLflow UI",src:t(79633).A+"",width:"2646",height:"1558"}),"\n",(0,s.jsx)("figcaption",{children:"The default MLflow UI"})]})}),"\n",(0,s.jsxs)(n.p,{children:["As you can see, there are no runs recorded and only the Default Experiment (with an ID of ",(0,s.jsx)(n.code,{children:"0"}),") is present.\nThis won't be the case for long, as we're about to add a new Experiment."]}),"\n",(0,s.jsx)(n.h2,{id:"notes-on-tags-vs-experiments",children:"Notes on Tags vs Experiments"}),"\n",(0,s.jsx)(n.p,{children:"While MLflow does provide a default experiment, it primarily serves as a 'catch-all' safety net for\nruns initiated without a specified active experiment. However, it's not recommended for regular use.\nInstead, creating unique experiments for specific collections of runs offers numerous advantages,\nas we'll explore below."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Benefits of Defining Unique Experiments:"})}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Enhanced Organization"}),": Experiments allow you to group related runs, making it easier to track\nand compare them. This is especially helpful when managing numerous runs, as in large-scale projects."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Metadata Annotation"}),": Experiments can carry metadata that aids in organizing and associating\nruns with larger projects."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Consider the scenario below: we're simulating participation in a large demand forecasting project.\nThis project involves building forecasting models for various departments in a chain of grocery\nstores, each housing numerous products. Our focus here is the 'produce' department, which has several\ndistinct items, each requiring its own forecast model. Organizing these models becomes paramount\nto ensure easy navigation and comparison."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"When Should You Define an Experiment?"})}),"\n",(0,s.jsx)(n.p,{children:"The guiding principle for creating an experiment is the consistency of the input data. If multiple\nruns use the same input dataset (even if they utilize different portions of it), they logically belong\nto the same experiment. For other hierarchical categorizations, using tags is advisable."}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Example"}),":"]}),"\n",(0,s.jsx)(n.p,{children:"Consider the following structure of the models, mapped to the business product hierarchy:"}),"\n",(0,s.jsx)(a,{items:[{name:"Demand Forecasting Project",items:[{name:"Dairy",items:[{name:"Cheese",items:[{name:"Parmesan"},{name:"Cheddar"}]},{name:"Milk",items:[{name:"Whole"},{name:"2%"}]}]},{name:"Produce",items:[{name:"Fruit",items:[{name:"Apples"},{name:"Cherries"}]},{name:"Vegetables",items:[{name:"Carrots"}]}]}]}]}),"\n",(0,s.jsxs)(n.p,{children:["Here, the ",(0,s.jsx)(n.code,{children:"produce"})," and ",(0,s.jsx)(n.code,{children:"dairy"})," departments are part of the same overarching project, but they rely\non distinct datasets and will likely produce different model metrics. Grouping the departments together\ndefinitely doesn't make sense."]}),"\n",(0,s.jsx)(n.p,{children:"However, the temptation might arise to group all produce together. Grouping diverse items like apples,\ncherries, and carrots under a single experiment could dilute the effectiveness of run comparisons\nwithin that experiment. Thus, it's essential to demarcate clear boundaries for your experiments\nto ensure meaningful insights."}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"While the business product hierarchy in this case doesn't explicitly need to be captured within\nthe tags, there is nothing preventing you from doing so. There isn't a limit to the number of tags\nthat you can apply. Provided that the keys being used are consistent across experiments and runs to\npermit search to function properly, any number of arbitrary mappings between tracked models and your\nspecific business rules can be applied."})}),"\n",(0,s.jsx)(n.p,{children:"To apply these boundaries effectively, as is shown in the figure below, tags should be employed."}),"\n",(0,s.jsx)("figure",{className:"center-div",style:{width:"70%",textAlign:"center"},children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.img,{alt:"Tags, experiments, and runs relationships",src:t(24629).A+"",width:"1062",height:"801"}),"\n",(0,s.jsx)("figcaption",{children:"Effective grouping of modeling runs for a large project"})]})}),"\n",(0,s.jsx)(n.h2,{id:"creating-the-apples-experiment-with-meaningful-tags",children:"Creating the Apples Experiment with Meaningful tags"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'# Provide an Experiment description that will appear in the UI\nexperiment_description = (\n    "This is the grocery forecasting project. "\n    "This experiment contains the produce models for apples."\n)\n\n# Provide searchable tags that define characteristics of the Runs that\n# will be in this Experiment\nexperiment_tags = {\n    "project_name": "grocery-forecasting",\n    "store_dept": "produce",\n    "team": "stores-ml",\n    "project_quarter": "Q3-2023",\n    "mlflow.note.content": experiment_description,\n}\n\n# Create the Experiment, providing a unique name\nproduce_apples_experiment = client.create_experiment(\n    name="Apple_Models", tags=experiment_tags\n)\n'})}),"\n",(0,s.jsxs)(n.p,{children:["In the next section, we'll take a look at what these tags can be used for, which are visible in the UI,\nand how we can leverage the power of ",(0,s.jsx)(n.code,{children:"tags"})," to simplify access to experiments that are part of a\nlarger project."]})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var i=t(96540);const s={},r=i.createContext(s);function a(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:n},e.children)}},79633:(e,n,t)=>{t.d(n,{A:()=>i});const i=t.p+"assets/images/default-ui-e733e29706c434eb4443048ea57b8a17.png"}}]);