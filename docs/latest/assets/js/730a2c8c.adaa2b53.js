"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["9967"],{23140(e,i,s){s.r(i),s.d(i,{metadata:()=>n,default:()=>I,frontMatter:()=>N,contentTitle:()=>b,toc:()=>C,assets:()=>_});var n=JSON.parse('{"id":"eval-monitor/ai-insights/ai-issue-discovery","title":"AI Issue Discovery","description":"Automatically analyze traces in your MLflow experiments to find operational issues, quality problems, and performance patterns. The Analyze Experiment tool uses hypothesis-driven analysis to systematically examine your GenAI application\'s behavior, identify the most important problems, and create a plan for addressing them in the form of a comprehensive markdown report.","source":"@site/docs/genai/eval-monitor/ai-insights/ai-issue-discovery.mdx","sourceDirName":"eval-monitor/ai-insights","slug":"/eval-monitor/ai-insights/ai-issue-discovery","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/ai-insights/ai-issue-discovery","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Ground Truth Expectations","permalink":"/mlflow-website/docs/latest/genai/assessments/expectations"},"next":{"title":"Migrating from MLflow 2 LLM Evaluation","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/legacy-llm-evaluation"}}'),t=s(74848),r=s(28453),a=s(78010),l=s(57250),o=s(95986),c=s(33508),d=s(33425),h=s(34742),p=s(46077),u=s(418),m=s(47792),x=s(94140),g=s(44080),j=s(61878),v=s(98445),y=s(42640),f=s(43598),w=s(80827),A=s(22864);let N={},b="AI Issue Discovery",_={},C=[{value:"Overview",id:"overview",level:2},{value:"Usage",id:"usage",level:2},{value:"Using MCP",id:"using-mcp",level:3},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Using CLI",id:"using-cli",level:3},{value:"Prerequisites",id:"prerequisites-1",level:3},{value:"Analysis Workflow",id:"analysis-workflow",level:2},{value:"1. Setup and Authentication",id:"1-setup-and-authentication",level:3},{value:"2. Experiment Selection",id:"2-experiment-selection",level:3},{value:"3. Agent Purpose Identification",id:"3-agent-purpose-identification",level:3},{value:"4. Hypothesis-Driven Analysis",id:"4-hypothesis-driven-analysis",level:3},{value:"5. Report Generation",id:"5-report-generation",level:3},{value:"Report Content",id:"report-content",level:2}];function M(e){let i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.header,{children:(0,t.jsx)(i.h1,{id:"ai-issue-discovery",children:"AI Issue Discovery"})}),"\n",(0,t.jsx)(i.p,{children:"Automatically analyze traces in your MLflow experiments to find operational issues, quality problems, and performance patterns. The Analyze Experiment tool uses hypothesis-driven analysis to systematically examine your GenAI application's behavior, identify the most important problems, and create a plan for addressing them in the form of a comprehensive markdown report."}),"\n",(0,t.jsx)(i.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(i.p,{children:"The Analyze Experiment command examines traces logged in an MLflow experiment to automatically discover:"}),"\n",(0,t.jsx)(c.A,{features:[{icon:u.A,title:"Operational Issues",description:"Detect errors, timeouts, rate limiting, authentication failures, and performance bottlenecks"},{icon:m.A,title:"Quality Issues",description:"Identify overly verbose responses, inconsistent outputs, repetitive content, and inappropriate response formats"},{icon:x.A,title:"Success Patterns",description:"Discover what's working well, effective tool usage, and high-quality interactions"},{icon:g.A,title:"Performance Metrics",description:"Analyze latency distributions, success rates, and error patterns"}]}),"\n",(0,t.jsx)(i.p,{children:"The tool generates a detailed markdown report with specific trace examples, quantitative evidence, and actionable recommendations for improvement."}),"\n",(0,t.jsx)(i.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(i.p,{children:"The Analyze Experiment functionality is available through two methods:"}),"\n",(0,t.jsx)(o.A,{children:(0,t.jsxs)(a.A,{children:[(0,t.jsxs)(l.A,{value:"mcp",label:"MCP",default:!0,children:[(0,t.jsx)(i.h3,{id:"using-mcp",children:"Using MCP"}),(0,t.jsx)(i.p,{children:"If you have MLflow's MCP server configured, you can simply run:"}),(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{children:"/analyze-experiment\n"})}),(0,t.jsx)(i.h3,{id:"prerequisites",children:"Prerequisites"}),(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:["MLflow MCP server (see ",(0,t.jsx)(i.a,{href:"/genai/mcp/",children:"MCP setup guide"}),")"]}),"\n",(0,t.jsx)(i.li,{children:"A coding agent with MCP support (e.g., Claude Code, Cursor, Windsurf, etc.) configured to connect to MLflow MCP server"}),"\n",(0,t.jsx)(i.li,{children:"MLflow experiment with logged traces"}),"\n"]})]}),(0,t.jsxs)(l.A,{value:"cli",label:"CLI",children:[(0,t.jsx)(i.h3,{id:"using-cli",children:"Using CLI"}),(0,t.jsx)(i.p,{children:"Run the analyze experiment command directly:"}),(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-bash",children:"mlflow ai-commands run genai/analyze_experiment\n"})}),(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Note"}),": This command must be run inside a coding agent with MCP support. The agent will interactively guide you through the analysis process."]}),(0,t.jsx)(i.h3,{id:"prerequisites-1",children:"Prerequisites"}),(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"A coding agent with MCP support (e.g., Claude Code, Cursor, Windsurf, etc.)"}),"\n",(0,t.jsxs)(i.li,{children:["MLflow 3.4 or later: ",(0,t.jsx)(i.code,{children:"pip install 'mlflow[genai]>=3.4'"})]}),"\n",(0,t.jsx)(i.li,{children:"Access to MLflow tracking server with logged traces"}),"\n"]})]})]})}),"\n",(0,t.jsx)(i.h2,{id:"analysis-workflow",children:"Analysis Workflow"}),"\n",(0,t.jsx)(d.A,{title:"Analyze Experiment Workflow",circleSize:450,steps:[{icon:j.A,title:"Setup & Authentication",description:"Configure MLflow connection",detailedDescription:"Connect to your MLflow tracking server (Databricks, local, or cloud) with appropriate credentials"},{icon:v.A,title:"Select Experiment",description:"Choose experiment to analyze",detailedDescription:"Browse and select the experiment containing traces you want to analyze for issues"},{icon:y.A,title:"Identify Agent Purpose",description:"Understand agent capabilities",detailedDescription:"Automatically detect what your agent does, its tools, and data sources from trace patterns"},{icon:f.A,title:"Analyze Issues",description:"Test hypotheses systematically",detailedDescription:"Systematically analyze operational and quality issues through hypothesis-driven testing"},{icon:w.A,title:"Generate Report",description:"Create actionable insights",detailedDescription:"Produce comprehensive markdown report with issues, recommendations, and improvement plans"}]}),"\n",(0,t.jsx)(i.h3,{id:"1-setup-and-authentication",children:"1. Setup and Authentication"}),"\n",(0,t.jsx)(i.p,{children:"The tool will ask you to configure authentication:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Databricks"}),": Provide workspace URL and personal access token, or use a Databricks CLI profile"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Local MLflow"}),": Specify tracking URI (SQLite, PostgreSQL, MySQL, or file store)"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Environment Variables"}),": Use pre-configured MLflow environment variables like ",(0,t.jsx)(i.code,{children:"MLFLOW_TRACKING_URI"})," (see ",(0,t.jsx)(i.a,{href:"/genai/getting-started/connect-environment",children:"environment setup guide"}),")"]}),"\n"]}),"\n",(0,t.jsx)(p.A,{src:"/images/genai/ai-issue-discovery/setup-authentication.png",alt:"Setup and Authentication",width:"90%"}),"\n",(0,t.jsx)(i.h3,{id:"2-experiment-selection",children:"2. Experiment Selection"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Browse available experiments or search by name"}),"\n",(0,t.jsx)(i.li,{children:"Select the experiment containing traces to analyze"}),"\n",(0,t.jsx)(i.li,{children:"Verify trace availability and data structure"}),"\n"]}),"\n",(0,t.jsx)(p.A,{src:"/images/genai/ai-issue-discovery/experiment-selection.png",alt:"Experiment Selection",width:"90%"}),"\n",(0,t.jsx)(i.h3,{id:"3-agent-purpose-identification",children:"3. Agent Purpose Identification"}),"\n",(0,t.jsx)(i.p,{children:"The tool examines trace inputs and outputs to understand:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:'What your agent\'s job is (e.g., "a customer service agent that helps users with billing questions")'}),"\n",(0,t.jsx)(i.li,{children:"What data sources and tools the agent has access to"}),"\n",(0,t.jsx)(i.li,{children:"Common patterns in user interactions"}),"\n"]}),"\n",(0,t.jsx)(i.p,{children:"You'll be asked to confirm or correct this understanding before analysis continues."}),"\n",(0,t.jsx)(p.A,{src:"/images/genai/ai-issue-discovery/agent-purpose.png",alt:"Agent Purpose Identification",width:"90%"}),"\n",(0,t.jsx)(i.h3,{id:"4-hypothesis-driven-analysis",children:"4. Hypothesis-Driven Analysis"}),"\n",(0,t.jsx)(i.p,{children:"The tool systematically tests hypotheses about potential issues:"}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Operational Issues"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Error patterns (authentication failures, timeouts, API failures)"}),"\n",(0,t.jsx)(i.li,{children:"Performance bottlenecks (slow tool calls, sequential vs parallel execution)"}),"\n",(0,t.jsx)(i.li,{children:"Rate limiting and resource contention"}),"\n"]}),"\n",(0,t.jsxs)(i.p,{children:[(0,t.jsx)(i.strong,{children:"Quality Issues"}),":"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"Content problems (verbosity, repetition, inconsistency)"}),"\n",(0,t.jsx)(i.li,{children:"Response appropriateness for query types"}),"\n",(0,t.jsx)(i.li,{children:"Context handling and conversation flow"}),"\n"]}),"\n",(0,t.jsx)(p.A,{src:"/images/genai/ai-issue-discovery/hypothesis-analysis.png",alt:"Hypothesis-Driven Analysis",width:"90%"}),"\n",(0,t.jsx)(i.h3,{id:"5-report-generation",children:"5. Report Generation"}),"\n",(0,t.jsx)(i.p,{children:"The tool generates a comprehensive markdown report containing:"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Summary Statistics"}),": Success rates, latency metrics, error distributions"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Confirmed Issues"}),": Detailed analysis with specific trace examples and root causes"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Strengths"}),": What's working well in your application"]}),"\n",(0,t.jsxs)(i.li,{children:[(0,t.jsx)(i.strong,{children:"Recommendations"}),": Actionable improvements based on findings"]}),"\n"]}),"\n",(0,t.jsx)(p.A,{src:"/images/genai/ai-issue-discovery/report-generation.png",alt:"Report Generation",width:"90%"}),"\n",(0,t.jsx)(i.h2,{id:"report-content",children:"Report Content"}),"\n",(0,t.jsx)(i.p,{children:"Each generated report provides comprehensive insights into your application's behavior:"}),"\n",(0,t.jsx)(h.A,{concepts:[{icon:A.A,title:"Quantitative Metrics",description:"Key performance indicators including total traces analyzed, success rates (OK vs ERROR), latency statistics (average, median, P95), and error rate distributions"},{icon:m.A,title:"Issue Analysis",description:"Detailed breakdown of confirmed issues with problem statements, trace examples with inputs/outputs, root cause analysis, frequency assessment, and specific trace IDs for investigation"},{icon:f.A,title:"Actionable Recommendations",description:"Prioritized improvement suggestions with implementation guidance and expected impact of changes to help you systematically address identified problems"}]})]})}function I(e={}){let{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(M,{...e})}):M(e)}},34742(e,i,s){s.d(i,{A:()=>t});var n=s(74848);s(96540);function t({concepts:e,title:i}){return(0,n.jsxs)("div",{className:"conceptOverview_x8T_",children:[i&&(0,n.jsx)("h3",{className:"overviewTitle_HyAI",children:i}),(0,n.jsx)("div",{className:"conceptGrid_uJNV",children:e.map((e,i)=>(0,n.jsxs)("div",{className:"conceptCard_oday",children:[(0,n.jsxs)("div",{className:"conceptHeader_HCk5",children:[e.icon&&(0,n.jsx)("div",{className:"conceptIcon_gejw",children:(0,n.jsx)(e.icon,{size:20})}),(0,n.jsx)("h4",{className:"conceptTitle_TGMM",children:e.title})]}),(0,n.jsx)("p",{className:"conceptDescription_ZyDn",children:e.description})]},i))})]})}},33425(e,i,s){s.d(i,{A:()=>l});var n=s(74848),t=s(96540);let r="loopContainer_P7aD",a="loopTitle_JPUj",l=({steps:e,title:i,loopBackIcon:s,loopBackText:l,loopBackDescription:o,circleSize:c=400})=>{let[d,h]=(0,t.useState)(null),[p,u]=(0,t.useState)(!1),[m,x]=(0,t.useState)({x:0,y:0}),[g,j]=(0,t.useState)(!1),v=(0,t.useRef)(null);t.useEffect(()=>{let e=()=>{j(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let y=g?280:c,f=Math.max(g?100:140,Math.min(g?130:220,(c/2-(g?50:80))*Math.min(1.2,.8+.05*e.length))),w=y/2,A=y/2,N=i=>{let s=2*i*Math.PI/e.length-Math.PI/2;return{x:w+f*Math.cos(s),y:A+f*Math.sin(s)}},b=()=>{h(null)};return g?(0,n.jsxs)("div",{className:r,children:[i&&(0,n.jsx)("h3",{className:a,children:i}),(0,n.jsxs)("div",{className:"mobileLinearContent_PCYK",children:[e.map((i,s)=>(0,n.jsxs)("div",{className:"mobileStepItem_x9mX",children:[(0,n.jsxs)("div",{className:"mobileStepIndicator_zWzO",children:[(0,n.jsx)("div",{className:`mobileStepNumber_HnjD ${i.isFocus?"mobileFocusNode_FTRa":""}`,children:i.icon?(0,n.jsx)(i.icon,{size:20}):(0,n.jsx)("span",{children:s+1})}),s<e.length-1&&(0,n.jsx)("div",{className:"mobileStepConnector_kK9y"})]}),(0,n.jsxs)("div",{className:"mobileStepContent_jmKx",children:[(0,n.jsx)("h4",{className:"mobileStepTitle_P2DM",children:i.title}),(0,n.jsx)("p",{className:"mobileStepDescription_qbMN",children:i.detailedDescription||i.description})]})]},s)),s&&o&&(0,n.jsxs)("div",{className:"mobileLoopBack_nXtn",children:[(0,n.jsx)("div",{className:"mobileLoopIcon_FAGz",children:(0,n.jsx)(s,{size:24})}),(0,n.jsxs)("div",{className:"mobileLoopContent_BRFV",children:[(0,n.jsx)("h4",{className:"mobileLoopTitle_JcCt",children:l||"Iterate"}),(0,n.jsx)("p",{className:"mobileLoopDescription_5B8T",children:o})]})]})]})]}):(0,n.jsxs)("div",{className:r,children:[i&&(0,n.jsx)("h3",{className:a,children:i}),(0,n.jsx)("div",{className:"loopContent_d_OB",children:(0,n.jsxs)("div",{className:"circleContainer_r3vu",ref:v,style:{width:`${y}px`,height:`${y}px`},children:[(0,n.jsxs)("svg",{width:y,height:y,className:"svgCanvas_uDoP",children:[e.map((i,s)=>{let t,r,a,l,o,c,d,h,p,u=(s+1)%e.length;return(0,n.jsxs)("g",{children:[(0,n.jsx)("defs",{children:(0,n.jsx)("marker",{id:`arrowhead-${s}`,markerWidth:"6",markerHeight:"6",refX:"5",refY:"3",orient:"auto",children:(0,n.jsx)("path",{d:"M 0 0 L 6 3 L 0 6 L 1.5 3 Z",fill:"currentColor",opacity:"1",className:"arrowHead_pHvN"})})}),(0,n.jsx)("path",{d:(t=N(s),a=(r=N(u)).x-t.x,l=r.y-t.y,o=(t.x+r.x)/2,c=(t.y+r.y)/2,d=Math.sqrt(a*a+l*l),h=a/d,p=l/d,`M ${o-10*h} ${c-10*p} L ${o+10*h} ${c+10*p}`),fill:"none",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"0",opacity:"0.9",markerEnd:`url(#arrowhead-${s})`,className:"arrowPath_C9al"})]},`arrow-${s}`)}),s&&(0,n.jsxs)("g",{className:"centerIcon_KAOa",onMouseEnter:()=>u(!0),onMouseLeave:()=>u(!1),style:{cursor:"pointer"},children:[(0,n.jsx)("foreignObject",{x:w-35,y:A-35,width:"70",height:"70",children:(0,n.jsx)("div",{className:"loopIconWrapper_xBPW",children:(0,n.jsx)(s,{size:32})})}),l&&(0,n.jsx)("text",{x:w,y:A+50,textAnchor:"middle",className:"loopText_T4eg",children:l})]})]}),e.map((e,i)=>{let s=N(i);return(0,n.jsxs)("div",{className:`stepNode_dfTI ${e.highlight?"highlighted_oNtg":""} ${e.isFocus?"focusNode_z3RB":""}`,style:{left:`${s.x}px`,top:`${s.y}px`,transform:"translate(-50%, -50%)"},onMouseEnter:e=>((e,i)=>{if(h(e),v.current){v.current.getBoundingClientRect();let i=N(e);x({x:i.x,y:i.y})}})(i,0),onMouseLeave:b,children:[(0,n.jsx)("div",{className:"stepNodeContent_qttg",children:e.icon?(0,n.jsx)(e.icon,{size:24}):(0,n.jsx)("span",{className:"stepNumber_LNrP",children:i+1})}),(0,n.jsx)("div",{className:"stepLabel_vl8R",children:e.title})]},i)}),null!==d&&(0,n.jsxs)("div",{className:"tooltip_UzKu",style:{left:`${m.x}px`,top:`${m.y}px`,transform:"translate(-50%, -120%)"},children:[(0,n.jsx)("h4",{className:"tooltipTitle_HAKW",children:e[d].title}),(0,n.jsx)("p",{className:"tooltipDescription_EDYJ",children:e[d].detailedDescription||e[d].description}),(0,n.jsx)("div",{className:"tooltipArrow_WNhr"})]}),p&&o&&(0,n.jsx)("div",{className:"centerTooltip_R18b",style:{left:`${w}px`,top:`${A}px`,transform:"translate(-50%, -50%)"},children:(0,n.jsx)("p",{className:"centerTooltipDescription_ttXB",children:o})})]})})]})}},33508(e,i,s){s.d(i,{A:()=>t});var n=s(74848);s(96540);function t({features:e,col:i=2}){return(0,n.jsx)("div",{className:"featureHighlights_Ardf",style:{gridTemplateColumns:`repeat(${i}, 1fr)`},children:e.map((e,i)=>(0,n.jsxs)("div",{className:"highlightItem_XPnN",children:[e.icon&&(0,n.jsx)("div",{className:"highlightIcon_SUR8",children:(0,n.jsx)(e.icon,{size:24})}),(0,n.jsxs)("div",{className:"highlightContent_d0XP",children:[(0,n.jsx)("h4",{children:e.title}),(0,n.jsx)("p",{children:e.description})]})]},i))})}},46077(e,i,s){s.d(i,{A:()=>r});var n=s(74848);s(96540);var t=s(66497);function r({src:e,alt:i,width:s,caption:r,className:a}){return(0,n.jsxs)("div",{className:`container_JwLF ${a||""}`,children:[(0,n.jsx)("div",{className:"imageWrapper_RfGN",style:s?{width:s}:{},children:(0,n.jsx)("img",{src:(0,t.default)(e),alt:i,className:"image_bwOA"})}),r&&(0,n.jsx)("p",{className:"caption_jo2G",children:r})]})}},95986(e,i,s){s.d(i,{A:()=>t});var n=s(74848);s(96540);function t({children:e}){return(0,n.jsx)("div",{className:"wrapper_sf5q",children:e})}}}]);