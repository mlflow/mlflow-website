"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["350"],{28259(e,t,a){a.r(t),a.d(t,{metadata:()=>n,default:()=>x,frontMatter:()=>y,contentTitle:()=>f,toc:()=>A,assets:()=>w});var n=JSON.parse('{"id":"tracing/integrations/listing/pydantic-ai-gateway","title":"Tracing Pydantic AI Gateway","description":"Pydantic AI Gateway is a unified interface for accessing multiple AI providers with a single key. It supports models from OpenAI, Anthropic, Google Vertex, Groq, AWS Bedrock, and more. Key features include spending limits, failover management, and zero translation\u2014requests flow through directly in each provider\'s native format, giving you immediate access to new model features as soon as they are released.","source":"@site/docs/genai/tracing/integrations/listing/pydantic-ai-gateway.mdx","sourceDirName":"tracing/integrations/listing","slug":"/tracing/integrations/listing/pydantic-ai-gateway","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/pydantic-ai-gateway","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":107,"frontMatter":{"sidebar_position":107,"sidebar_label":"Pydantic AI Gateway"},"sidebar":"genAISidebar","previous":{"title":"Portkey","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/portkey"},"next":{"title":"TrueFoundry","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/listing/truefoundry"}}'),r=a(74848),i=a(28453),s=a(78010),o=a(57250),l=a(95986),c=a(46077),d=a(8060),u=a(10440),p=a(77541),h=a(93893),g=a(60665),m=a(43975);let y={sidebar_position:107,sidebar_label:"Pydantic AI Gateway"},f="Tracing Pydantic AI Gateway",w={},A=[{value:"Prerequisite",id:"prerequisite",level:2},{value:"Start MLflow Server",id:"start-mlflow-server",level:3},...d.RM,{value:"Get Pydantic AI Gateway API Key",id:"get-pydantic-ai-gateway-api-key",level:3},{value:"Query Gateway",id:"query-gateway",level:2},{value:"View Traces in MLflow UI",id:"view-traces-in-mlflow-ui",level:2},{value:"Next Steps",id:"next-steps",level:2}];function v(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"tracing-pydantic-ai-gateway",children:"Tracing Pydantic AI Gateway"})}),"\n",(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.a,{href:"https://ai.pydantic.dev/gateway/",children:"Pydantic AI Gateway"})," is a unified interface for accessing multiple AI providers with a single key. It supports models from OpenAI, Anthropic, Google Vertex, Groq, AWS Bedrock, and more. Key features include spending limits, failover management, and zero translation\u2014requests flow through directly in each provider's native format, giving you immediate access to new model features as soon as they are released."]}),"\n",(0,r.jsx)(t.p,{children:"Since Pydantic AI Gateway exposes OpenAI and Anthropic-compatible APIs, you can use MLflow's automatic tracing integrations to capture detailed traces of your LLM interactions."}),"\n",(0,r.jsx)(c.A,{src:"/images/llms/pydantic-ai/pydanticai-gateway-tracing.png",alt:"Pydantic AI Gateway Tracing"}),"\n",(0,r.jsx)(t.admonition,{title:"Looking for PydanticAI Agent Framework?",type:"tip",children:(0,r.jsxs)(t.p,{children:["This guide covers tracing LLM calls through ",(0,r.jsx)(t.strong,{children:"Pydantic AI Gateway"}),". If you're building agents using the Pydantic AI framework directly, see the ",(0,r.jsx)("ins",{children:(0,r.jsx)(t.a,{href:"/genai/tracing/integrations/listing/pydantic_ai",children:"PydanticAI Integration"})})," guide instead."]})}),"\n",(0,r.jsx)(t.h2,{id:"prerequisite",children:"Prerequisite"}),"\n",(0,r.jsx)(t.h3,{id:"start-mlflow-server",children:"Start MLflow Server"}),"\n",(0,r.jsx)(d.Ay,{}),"\n",(0,r.jsx)(t.h3,{id:"get-pydantic-ai-gateway-api-key",children:"Get Pydantic AI Gateway API Key"}),"\n",(0,r.jsxs)(t.p,{children:["Create an account on ",(0,r.jsx)(t.a,{href:"https://gateway.pydantic.dev/",children:"Pydantic AI Gateway"})," to get your API key, or bring your own API key from a supported LLM provider."]}),"\n",(0,r.jsx)(t.h2,{id:"query-gateway",children:"Query Gateway"}),"\n",(0,r.jsx)(t.p,{children:"You can trace LLM calls through Pydantic AI Gateway using any of the following approaches:"}),"\n",(0,r.jsx)(l.A,{children:(0,r.jsxs)(s.A,{children:[(0,r.jsxs)(o.A,{value:"openai",label:"OpenAI SDK",default:!0,children:[(0,r.jsxs)(t.p,{children:["Since Pydantic AI Gateway exposes an OpenAI-compatible API, you can use MLflow's ",(0,r.jsx)(t.a,{href:"/genai/tracing/integrations/listing/openai",children:"OpenAI automatic tracing"})," integration to trace calls."]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'import mlflow\nfrom openai import OpenAI\n\n# Enable auto-tracing for OpenAI\nmlflow.openai.autolog()\n\n# Set MLflow tracking URI and experiment\nmlflow.set_tracking_uri("http://localhost:5000")\nmlflow.set_experiment("Pydantic AI Gateway")\n\n# Point OpenAI client to Pydantic AI Gateway\nclient = OpenAI(\n    base_url="https://gateway.pydantic.dev/proxy/chat/",\n    api_key="<PYDANTIC_AI_GATEWAY_API_KEY>",\n)\n\n# Make API calls - traces will be captured automatically\nresponse = client.chat.completions.create(\n    model="gpt-5",\n    messages=[{"role": "user", "content": "Hello world"}],\n)\nprint(response.choices[0].message.content)\n'})})]}),(0,r.jsxs)(o.A,{value:"anthropic",label:"Anthropic SDK",children:[(0,r.jsxs)(t.p,{children:["If your Pydantic AI Gateway is configured to expose an Anthropic-compatible API, you can use MLflow's ",(0,r.jsx)(t.a,{href:"/genai/tracing/integrations/listing/anthropic",children:"Anthropic automatic tracing"})," integration to trace calls."]}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'import mlflow\nimport anthropic\n\n# Enable auto-tracing for Anthropic\nmlflow.anthropic.autolog()\n\n# Set tracking URI and experiment\nmlflow.set_tracking_uri("http://localhost:5000")\nmlflow.set_experiment("Pydantic AI Gateway")\n\n# Point Anthropic client to Pydantic AI Gateway\nclient = anthropic.Anthropic(\n    base_url="https://gateway.pydantic.dev/proxy/chat/",\n    api_key="<PYDANTIC_AI_GATEWAY_API_KEY>",\n)\n\n# Make API calls - traces will be captured automatically\nresponse = client.messages.create(\n    max_tokens=1000,\n    model="claude-sonnet-4-5",\n    messages=[{"role": "user", "content": "Hello world"}],\n)\nprint(response.content[0].text)\n'})})]}),(0,r.jsxs)(o.A,{value:"pydantic-ai",label:"Pydantic AI Agents",children:[(0,r.jsx)(t.p,{children:"You can also use the PydanticAI agent framework to interact with models through the gateway, with full tracing support."}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-export",children:"PYDANTIC_AI_GATEWAY_API_KEY=your-pydantic-ai-gateway-api-key\nMLFLOW_TRACKING_URI=http://localhost:5000\nMLFLOW_EXPERIMENT_NAME=Pydantic AI Gateway\n"})}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-python",children:'import mlflow\nfrom pydantic_ai import Agent\n\n# Enable auto-tracing for PydanticAI\nmlflow.pydantic_ai.autolog()\n\n# Create an agent with the gateway model\n# Use the appropriate model identifier for your gateway configuration\nagent = Agent(\n    "gateway/openai:gpt-4o",  # or your gateway model identifier\n    system_prompt="You are a helpful assistant.",\n    instrument=True,\n)\n\n\n# Run the agent - traces will be captured automatically\nasync def main():\n    result = await agent.run("What is the capital of France?")\n    print(result.output)\n\n\n# If running in a notebook\nawait main()\n\n# If running as a script\n# import asyncio\n# asyncio.run(main())\n'})}),(0,r.jsxs)(t.p,{children:["For more advanced PydanticAI features like tool calling, MCP servers, and streaming, see the ",(0,r.jsx)(t.a,{href:"/genai/tracing/integrations/listing/pydantic_ai",children:"PydanticAI Integration"})," guide."]})]})]})}),"\n",(0,r.jsx)(t.h2,{id:"view-traces-in-mlflow-ui",children:"View Traces in MLflow UI"}),"\n",(0,r.jsxs)(t.p,{children:["Open the MLflow UI at ",(0,r.jsx)(t.a,{href:"http://localhost:5000",children:"http://localhost:5000"})," (or your custom MLflow server URL) to see the traces from your Pydantic AI Gateway calls."]}),"\n",(0,r.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,r.jsxs)(u.A,{children:[(0,r.jsx)(p.A,{icon:h.A,iconSize:48,title:"Track User Feedback",description:"Record user feedback on traces for tracking user satisfaction.",href:"/genai/tracing/collect-user-feedback",linkText:"Learn about feedback \u2192",containerHeight:64}),(0,r.jsx)(p.A,{icon:g.A,iconSize:48,title:"Manage Prompts",description:"Learn how to manage prompts with MLflow's prompt registry.",href:"/genai/prompt-registry",linkText:"Manage prompts \u2192",containerHeight:64}),(0,r.jsx)(p.A,{icon:m.A,iconSize:48,title:"Evaluate Traces",description:"Evaluate traces with LLM judges to understand and improve your AI application's behavior.",href:"/genai/eval-monitor/running-evaluation/traces",linkText:"Evaluate traces \u2192",containerHeight:64})]})]})}function x(e={}){let{wrapper:t}={...(0,i.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(v,{...e})}):v(e)}},8060(e,t,a){a.d(t,{Ay:()=>d,RM:()=>l});var n=a(74848),r=a(28453),i=a(78010),s=a(57250),o=a(95986);let l=[];function c(e){let t={a:"a",code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsx)(o.A,{children:(0,n.jsxs)(i.A,{children:[(0,n.jsxs)(s.A,{value:"local",label:"Local (pip)",default:!0,children:[(0,n.jsxs)(t.p,{children:["If you have a local Python environment >= 3.10, you can start the MLflow server locally using the ",(0,n.jsx)(t.code,{children:"mlflow"})," CLI command."]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"mlflow server\n"})})]}),(0,n.jsxs)(s.A,{value:"docker",label:"Local (docker)",children:[(0,n.jsx)(t.p,{children:"MLflow also provides a Docker Compose file to start a local MLflow server with a postgres database and a minio server."}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"git clone --depth 1 --filter=blob:none --sparse https://github.com/mlflow/mlflow.git\ncd mlflow\ngit sparse-checkout set docker-compose\ncd docker-compose\ncp .env.dev.example .env\ndocker compose up -d\n"})}),(0,n.jsxs)(t.p,{children:["Refer to the ",(0,n.jsx)(t.a,{href:"https://github.com/mlflow/mlflow/tree/master/docker-compose/README.md",children:"instruction"})," for more details, e.g., overriding the default environment variables."]})]})]})})}function d(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},75689(e,t,a){a.d(t,{A:()=>l});var n=a(96540);let r=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)},i=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:l,iconNode:c,...d},u)=>(0,n.createElement)("svg",{ref:u,...s,width:t,height:t,stroke:e,strokeWidth:r?24*Number(a)/Number(t):a,className:i("lucide",o),...!l&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(l)?l:[l]])),l=(e,t)=>{let a=(0,n.forwardRef)(({className:a,...s},l)=>(0,n.createElement)(o,{ref:l,iconNode:t,className:i(`lucide-${r(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...s}));return a.displayName=r(e),a}},60665(e,t,a){a.d(t,{A:()=>n});let n=(0,a(75689).A)("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]])},43975(e,t,a){a.d(t,{A:()=>n});let n=(0,a(75689).A)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]])},93893(e,t,a){a.d(t,{A:()=>n});let n=(0,a(75689).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},57250(e,t,a){a.d(t,{A:()=>i});var n=a(74848);a(96540);var r=a(34164);function i({children:e,hidden:t,className:a}){return(0,n.jsx)("div",{role:"tabpanel",className:(0,r.A)("tabItem_Ymn6",a),hidden:t,children:e})}},78010(e,t,a){a.d(t,{A:()=>A});var n=a(74848),r=a(96540),i=a(34164),s=a(88287),o=a(28584),l=a(56347),c=a(99989),d=a(96629),u=a(80618),p=a(41367);function h(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){let{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function g({value:e,tabValues:t}){return t.some(t=>t.value===e)}var m=a(19863);function y({className:e,block:t,selectedValue:a,selectValue:r,tabValues:s}){let l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{let t=e.currentTarget,n=s[l.indexOf(t)].value;n!==a&&(c(t),r(n))},u=e=>{let t=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{let a=l.indexOf(e.currentTarget)+1;t=l[a]??l[0];break}case"ArrowLeft":{let a=l.indexOf(e.currentTarget)-1;t=l[a]??l[l.length-1]}}t?.focus()};return(0,n.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:s.map(({value:e,label:t,attributes:r})=>(0,n.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{l.push(e)},onKeyDown:u,onClick:d,...r,className:(0,i.A)("tabs__item","tabItem_LNqP",r?.className,{"tabs__item--active":a===e}),children:t??e},e))})}function f({lazy:e,children:t,selectedValue:a}){let s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){let e=s.find(e=>e.props.value===a);return e?(0,r.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,n.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==a}))})}function w(e){let t=function(e){let t,{defaultValue:a,queryString:n=!1,groupId:i}=e,s=function(e){let{values:t,children:a}=e;return(0,r.useMemo)(()=>{let e=t??h(a).map(({props:{value:e,label:t,attributes:a,default:n}})=>({value:e,label:t,attributes:a,default:n})),n=(0,u.XI)(e,(e,t)=>e.value===t.value);if(n.length>0)throw Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`);return e},[t,a])}(e),[o,m]=(0,r.useState)(()=>(function({defaultValue:e,tabValues:t}){if(0===t.length)throw Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!g({value:e,tabValues:t}))throw Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}let a=t.find(e=>e.default)??t[0];if(!a)throw Error("Unexpected error: 0 tabValues");return a.value})({defaultValue:a,tabValues:s})),[y,f]=function({queryString:e=!1,groupId:t}){let a=(0,l.W6)(),n=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,d.aZ)(n),(0,r.useCallback)(e=>{if(!n)return;let t=new URLSearchParams(a.location.search);t.set(n,e),a.replace({...a.location,search:t.toString()})},[n,a])]}({queryString:n,groupId:i}),[w,A]=function({groupId:e}){let t=e?`docusaurus.tab.${e}`:null,[a,n]=(0,p.Dv)(t);return[a,(0,r.useCallback)(e=>{t&&n.set(e)},[t,n])]}({groupId:i}),v=g({value:t=y??w,tabValues:s})?t:null;return(0,c.A)(()=>{v&&m(v)},[v]),{selectedValue:o,selectValue:(0,r.useCallback)(e=>{if(!g({value:e,tabValues:s}))throw Error(`Can't select invalid tab value=${e}`);m(e),f(e),A(e)},[f,A,s]),tabValues:s}}(e);return(0,n.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container","tabList__CuJ"),children:[(0,n.jsx)(y,{...t,...e}),(0,n.jsx)(f,{...t,...e})]})}function A(e){let t=(0,m.A)();return(0,n.jsx)(w,{...e,children:h(e.children)},String(t))}},46077(e,t,a){a.d(t,{A:()=>i});var n=a(74848);a(96540);var r=a(66497);function i({src:e,alt:t,width:a,caption:i,className:s}){return(0,n.jsxs)("div",{className:`container_JwLF ${s||""}`,children:[(0,n.jsx)("div",{className:"imageWrapper_RfGN",style:a?{width:a}:{},children:(0,n.jsx)("img",{src:(0,r.default)(e),alt:t,className:"image_bwOA"})}),i&&(0,n.jsx)("p",{className:"caption_jo2G",children:i})]})}},95986(e,t,a){a.d(t,{A:()=>r});var n=a(74848);a(96540);function r({children:e}){return(0,n.jsx)("div",{className:"wrapper_sf5q",children:e})}},77541(e,t,a){a.d(t,{A:()=>c});var n=a(74848);a(96540);var r=a(95310),i=a(34164);let s="tileImage_O4So";var o=a(66497),l=a(92802);function c({icon:e,image:t,imageDark:a,imageWidth:c,imageHeight:d,iconSize:u=32,containerHeight:p,title:h,description:g,href:m,linkText:y="Learn more \u2192",className:f}){if(!e&&!t)throw Error("TileCard requires either an icon or image prop");let w=p?{height:`${p}px`}:{},A={};return c&&(A.width=`${c}px`),d&&(A.height=`${d}px`),(0,n.jsxs)(r.A,{href:m,className:(0,i.A)("tileCard_NHsj",f),children:[(0,n.jsx)("div",{className:"tileIcon_pyoR",style:w,children:e?(0,n.jsx)(e,{size:u}):a?(0,n.jsx)(l.A,{sources:{light:(0,o.default)(t),dark:(0,o.default)(a)},alt:h,className:s,style:A}):(0,n.jsx)("img",{src:(0,o.default)(t),alt:h,className:s,style:A})}),(0,n.jsx)("h3",{children:h}),(0,n.jsx)("p",{children:g}),(0,n.jsx)("div",{className:"tileLink_iUbu",children:y})]})}},10440(e,t,a){a.d(t,{A:()=>i});var n=a(74848);a(96540);var r=a(34164);function i({children:e,className:t}){return(0,n.jsx)("div",{className:(0,r.A)("tilesGrid_hB9N",t),children:e})}},28453(e,t,a){a.d(t,{R:()=>s,x:()=>o});var n=a(96540);let r={},i=n.createContext(r);function s(e){let t=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),n.createElement(i.Provider,{value:t},e.children)}}}]);