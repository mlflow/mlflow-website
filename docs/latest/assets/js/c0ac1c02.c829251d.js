"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["8449"],{32897(e,t,n){n.r(t),n.d(t,{metadata:()=>r,default:()=>D,frontMatter:()=>v,contentTitle:()=>b,toc:()=>k,assets:()=>A});var r=JSON.parse('{"id":"datasets/sdk-guide","title":"Evaluation Datasets SDK Reference","description":"Complete API reference for creating, managing, and querying evaluation datasets programmatically.","source":"@site/docs/genai/datasets/sdk-guide.mdx","sourceDirName":"datasets","slug":"/datasets/sdk-guide","permalink":"/mlflow-website/docs/latest/genai/datasets/sdk-guide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Building MLflow evaluation datasets","permalink":"/mlflow-website/docs/latest/genai/datasets/"},"next":{"title":"End-to-End Workflow","permalink":"/mlflow-website/docs/latest/genai/datasets/end-to-end-workflow"}}'),s=n(74848),a=n(28453),i=n(78010),l=n(57250),d=n(54725),c=n(95986),o=n(34742),h=n(10440),p=n(77541),m=n(33508),x=n(96844),f=n(93893),u=n(93164),j=n(80827),_=n(93610),g=n(99653),w=n(22864),y=n(47792);let v={},b="Evaluation Datasets SDK Reference",A={},k=[{value:"Creating a Dataset",id:"creating-a-dataset",level:2},{value:"Adding Records to a Dataset",id:"adding-records-to-a-dataset",level:2},{value:"Evaluation dataset schema",id:"evaluation-dataset-schema",level:2},{value:"Core fields",id:"core-fields",level:3},{value:"<code>expectations</code> reserved keys",id:"expectations-reserved-keys",level:4},{value:"Additional fields",id:"additional-fields",level:3},{value:"Source field",id:"source-field",level:4},{value:"Updating Existing Records",id:"updating-existing-records",level:2},{value:"Retrieving Datasets",id:"retrieving-datasets",level:2},{value:"Managing Tags",id:"managing-tags",level:2},{value:"Deleting a Dataset",id:"deleting-a-dataset",level:2},{value:"Working with Dataset Records",id:"working-with-dataset-records",level:2},{value:"Advanced Topics",id:"advanced-topics",level:2},{value:"Understanding Input Uniqueness",id:"understanding-input-uniqueness",level:3},{value:"Source Type Inference",id:"source-type-inference",level:3},{value:"Inference Rules",id:"inference-rules",level:4},{value:"Manual Source Override",id:"manual-source-override",level:4},{value:"Available Source Types",id:"available-source-types",level:4},{value:"Search Filter Reference",id:"search-filter-reference",level:3},{value:"Searchable Fields",id:"searchable-fields",level:4},{value:"Filter Operators",id:"filter-operators",level:4},{value:"Common Filter Examples",id:"common-filter-examples",level:4},{value:"Next Steps",id:"next-steps",level:2}];function N(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"evaluation-datasets-sdk-reference",children:"Evaluation Datasets SDK Reference"})}),"\n",(0,s.jsx)(t.p,{children:"Complete API reference for creating, managing, and querying evaluation datasets programmatically."}),"\n",(0,s.jsxs)(t.p,{children:["For general information and examples of how to use evaluation datasets, see the section on ",(0,s.jsx)(t.a,{href:"/genai/eval-monitor/running-evaluation/agents/",children:"running evaluations"}),"."]}),"\n",(0,s.jsx)(t.admonition,{title:"SQL Backend Required",type:"warning",children:(0,s.jsxs)(t.p,{children:["Evaluation Datasets require an MLflow Tracking Server with a ",(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.a,{href:"/self-hosting/architecture/backend-store/#types-of-backend-stores",children:"SQL backend"})})," (PostgreSQL, MySQL, SQLite, or MSSQL).\nThis feature is ",(0,s.jsx)(t.strong,{children:"not available"})," with FileStore (local file system-based tracking)."]})}),"\n",(0,s.jsx)(t.h2,{id:"creating-a-dataset",children:"Creating a Dataset"}),"\n",(0,s.jsxs)(t.p,{children:["Use ",(0,s.jsx)(d.B,{fn:"mlflow.genai.datasets.create_dataset",text:"create_dataset()"})," to create a new evaluation dataset:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow.genai.datasets import create_dataset\n\n# Create a new dataset\ndataset = create_dataset(\n    name="customer_support_qa",\n    experiment_id=["0"],  # Link to experiments\n    tags={"version": "1.0", "team": "ml-platform", "status": "active"},\n)\n\nprint(f"Created dataset: {dataset.dataset_id}")\n'})}),"\n",(0,s.jsxs)(t.p,{children:["You can also use the ",(0,s.jsx)(d.B,{fn:"mlflow.tracking.MlflowClient",text:"MlflowClient"})," API:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow import MlflowClient\n\nclient = MlflowClient()\ndataset = client.create_dataset(\n    name="customer_support_qa",\n    experiment_id=["0"],\n    tags={"version": "1.0"},\n)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"adding-records-to-a-dataset",children:"Adding Records to a Dataset"}),"\n",(0,s.jsxs)(t.p,{children:["Use the ",(0,s.jsx)(d.B,{fn:"mlflow.entities.EvaluationDataset.merge_records",text:"merge_records()"})," method to add new records to your dataset. Records can be added from dictionaries, DataFrames, or traces:"]}),"\n",(0,s.jsx)(c.A,{children:(0,s.jsxs)(i.A,{children:[(0,s.jsxs)(l.A,{value:"from-dicts",label:"From Dictionaries",default:!0,children:[(0,s.jsx)(t.p,{children:"Add records directly from Python dictionaries:"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Add records with inputs and expectations (ground truth)\nnew_records = [\n    {\n        "inputs": {"question": "What are your business hours?"},\n        "expectations": {\n            "expected_answer": "We\'re open Monday-Friday 9am-5pm EST",\n            "must_mention_hours": True,\n            "must_include_timezone": True,\n        },\n    },\n    {\n        "inputs": {"question": "How do I reset my password?"},\n        "expectations": {\n            "expected_answer": (\n                "Click \'Forgot Password\' and follow the email instructions"\n            ),\n            "must_include_steps": True,\n        },\n    },\n]\n\ndataset.merge_records(new_records)\nprint(f"Dataset now has {len(dataset.records)} records")\n'})})]}),(0,s.jsxs)(l.A,{value:"from-traces",label:"From Traces",children:[(0,s.jsx)(t.p,{children:"Add records from MLflow traces:"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'import mlflow\n\n# Search for traces to add to the dataset\ntraces = mlflow.search_traces(\n    locations=["0"],\n    filter_string="attributes.name = \'chat_completion\'",\n    max_results=50,\n    return_type="list",\n)\n\n# Add traces directly to the dataset\ndataset.merge_records(traces)\n'})})]}),(0,s.jsxs)(l.A,{value:"from-dataframe",label:"From DataFrame",children:[(0,s.jsx)(t.p,{children:"Add records from a pandas DataFrame:"}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'import pandas as pd\n\n# Create DataFrame with structured data (ground truth expectations)\ndf = pd.DataFrame(\n    [\n        {\n            "inputs": {\n                "question": "What is MLflow?",\n                "context": "general",\n            },\n            "expectations": {\n                "expected_answer": "MLflow is an open-source platform for ML lifecycle",\n                "must_mention": ["tracking", "experiments"],\n            },\n            "tags": {"priority": "high"},\n        },\n        {\n            "inputs": {\n                "question": "How to track experiments?",\n                "context": "technical",\n            },\n            "expectations": {\n                "expected_answer": "Use mlflow.start_run() and mlflow.log_params()",\n                "must_mention": ["log_params", "start_run"],\n            },\n            "tags": {"priority": "medium"},\n        },\n    ]\n)\n\ndataset.merge_records(df)\n'})})]})]})}),"\n",(0,s.jsx)(t.h2,{id:"evaluation-dataset-schema",children:"Evaluation dataset schema"}),"\n",(0,s.jsx)(t.p,{children:"Evaluation datasets must use the schema described in this section."}),"\n",(0,s.jsx)(t.h3,{id:"core-fields",children:"Core fields"}),"\n",(0,s.jsx)(t.p,{children:"The following fields are used in both the evaluation dataset abstraction or if you pass data directly."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Data Type"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Required"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"inputs"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"dict[Any, Any]"})}),(0,s.jsxs)(t.td,{children:["Inputs for your app (e.g., user question, context), stored as a JSON-seralizable ",(0,s.jsx)(t.code,{children:"dict"}),"."]}),(0,s.jsx)(t.td,{children:"Yes"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"expectations"})}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"dict[Str, Any]"})}),(0,s.jsxs)(t.td,{children:["Ground truth labels, stored as a JSON-seralizable ",(0,s.jsx)(t.code,{children:"dict"}),"."]}),(0,s.jsx)(t.td,{children:"Optional"})]})]})]}),"\n",(0,s.jsxs)(t.h4,{id:"expectations-reserved-keys",children:[(0,s.jsx)(t.code,{children:"expectations"})," reserved keys"]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.code,{children:"expectations"})," has several reserved keys that are used by built-in LLM judges: ",(0,s.jsx)(t.code,{children:"guidelines"}),", ",(0,s.jsx)(t.code,{children:"expected_facts"}),", and ",(0,s.jsx)(t.code,{children:"expected_response"}),"."]}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Used by"}),(0,s.jsx)(t.th,{children:"Description"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"expected_facts"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"Correctness"})," judge"]}),(0,s.jsx)(t.td,{children:"List of facts that should appear"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"expected_response"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"Correctness"})," judge"]}),(0,s.jsx)(t.td,{children:"Exact or similar expected output"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"guidelines"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"Guidelines"})," judge"]}),(0,s.jsx)(t.td,{children:"Natural language rules to follow"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"expected_retrieved_context"})}),(0,s.jsxs)(t.td,{children:[(0,s.jsx)(t.code,{children:"document_recall"})," scorer"]}),(0,s.jsx)(t.td,{children:"Documents that should be retrieved"})]})]})]}),"\n",(0,s.jsx)(t.h3,{id:"additional-fields",children:"Additional fields"}),"\n",(0,s.jsx)(t.p,{children:"The following fields are used by the evaluation dataset abstraction to track lineage and version history."}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Column"}),(0,s.jsx)(t.th,{children:"Data Type"}),(0,s.jsx)(t.th,{children:"Description"}),(0,s.jsx)(t.th,{children:"Required"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"dataset_record_id"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:"The unique identifier for the record."}),(0,s.jsx)(t.td,{children:"Automatically set if not provided."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"create_time"})}),(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:"The time when the record was created."}),(0,s.jsx)(t.td,{children:"Automatically set when inserting or updating."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"created_by"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:"The user who created the record."}),(0,s.jsx)(t.td,{children:"Automatically set when inserting or updating."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_update_time"})}),(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:"The time when the record was last updated."}),(0,s.jsx)(t.td,{children:"Automatically set when inserting or updating."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_updated_by"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:"The user who last updated the record."}),(0,s.jsx)(t.td,{children:"Automatically set when inserting or updating."})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"source"})}),(0,s.jsx)(t.td,{children:"struct"}),(0,s.jsxs)(t.td,{children:["The source of the dataset record. See ",(0,s.jsx)(t.a,{href:"#source-field",children:"Source field"}),"."]}),(0,s.jsx)(t.td,{children:"Optional"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tags"})}),(0,s.jsx)(t.td,{children:"dict[str, Any]"}),(0,s.jsx)(t.td,{children:"Key-value tags for the dataset record."}),(0,s.jsx)(t.td,{children:"Optional"})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"source-field",children:"Source field"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"source"})," field tracks where a dataset record came from. Each record can have ",(0,s.jsx)(t.strong,{children:"only one"})," source type."]}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Human source"}),": Record created manually by a person"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'{\n    "source": {\n        "human": {"user_name": "jane.doe@company.com"}  # user who created the record\n    }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Document source"}),": Record synthesized from a document"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'{\n    "source": {\n        "document": {\n            "doc_uri": "s3://bucket/docs/product-manual.pdf",  # URI or path to the source document\n            "content": "The first 500 chars of the document...",  # Optional, excerpt or full content from the document\n        }\n    }\n}\n'})}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.strong,{children:"Trace source"}),": Record created from a production trace"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'{\n    "source": {\n        "trace": {\n            "trace_id": "tr-abc123def456",  # unique identifier of the source trace\n        }\n    }\n}\n'})}),"\n",(0,s.jsx)(t.h2,{id:"updating-existing-records",children:"Updating Existing Records"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(d.B,{fn:"mlflow.entities.EvaluationDataset.merge_records",text:"merge_records()"})," method intelligently handles updates. ",(0,s.jsx)(t.strong,{children:"Records are matched based on a hash of their inputs"})," - if a record with identical inputs already exists, its expectations and tags are merged rather than creating a duplicate:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Initial record\ndataset.merge_records(\n    [\n        {\n            "inputs": {"question": "What is MLflow?"},\n            "expectations": {\n                "expected_answer": "MLflow is a platform for ML",\n                "must_mention_tracking": True,\n            },\n        }\n    ]\n)\n\n# Update with same inputs but enhanced expectations\ndataset.merge_records(\n    [\n        {\n            "inputs": {"question": "What is MLflow?"},  # Same inputs = update\n            "expectations": {\n                # Updates existing value\n                "expected_answer": (\n                    "MLflow is an open-source platform for managing the ML lifecycle"\n                ),\n                "must_mention_models": True,  # Adds new expectation\n                # Note: "must_mention_tracking": True is preserved\n            },\n        }\n    ]\n)\n\n# Result: One record with merged expectations\n'})}),"\n",(0,s.jsx)(t.h2,{id:"retrieving-datasets",children:"Retrieving Datasets"}),"\n",(0,s.jsx)(t.p,{children:"Retrieve existing datasets by ID or search for them:"}),"\n",(0,s.jsx)(c.A,{children:(0,s.jsxs)(i.A,{children:[(0,s.jsx)(l.A,{value:"get-by-id",label:"Get by ID",default:!0,children:(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow.genai.datasets import get_dataset\n\n# Get a specific dataset by ID\ndataset = get_dataset(dataset_id="d-7f2e3a9b8c1d4e5f")\n\n# Access dataset properties\nprint(f"Name: {dataset.name}")\nprint(f"Records: {len(dataset.records)}")\nprint(f"Schema: {dataset.schema}")\nprint(f"Tags: {dataset.tags}")\n'})})}),(0,s.jsxs)(l.A,{value:"search",label:"Search Datasets",children:[(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow.genai.datasets import search_datasets\n\n# Search for datasets with filters\ndatasets = search_datasets(\n    experiment_ids=["0"],\n    filter_string="tags.status = \'active\' AND name LIKE \'%support%\'",\n    order_by=["last_update_time DESC"],\n    max_results=10,\n)\n\nfor ds in datasets:\n    print(f"{ds.name} ({ds.dataset_id}): {len(ds.records)} records")\n'})}),(0,s.jsxs)(t.p,{children:["See ",(0,s.jsx)(t.a,{href:"#search-filter-reference",children:"Search Filter Reference"})," for filter syntax details."]})]})]})}),"\n",(0,s.jsx)(t.h2,{id:"managing-tags",children:"Managing Tags"}),"\n",(0,s.jsx)(t.p,{children:"Add, update, or remove tags from datasets:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow.genai.datasets import set_dataset_tags, delete_dataset_tag\n\n# Set or update tags\nset_dataset_tags(\n    dataset_id=dataset.dataset_id,\n    tags={"status": "production", "validated": "true", "version": "2.0"},\n)\n\n# Delete a specific tag\ndelete_dataset_tag(dataset_id=dataset.dataset_id, key="deprecated")\n'})}),"\n",(0,s.jsx)(t.h2,{id:"deleting-a-dataset",children:"Deleting a Dataset"}),"\n",(0,s.jsx)(t.p,{children:"Permanently delete a dataset and all its records:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'from mlflow.genai.datasets import delete_dataset\n\n# Delete the entire dataset\ndelete_dataset(dataset_id="d-1a2b3c4d5e6f7890")\n'})}),"\n",(0,s.jsx)(t.admonition,{type:"warning",children:(0,s.jsx)(t.p,{children:"Dataset deletion is permanent and cannot be undone. All records will be deleted."})}),"\n",(0,s.jsx)(t.h2,{id:"working-with-dataset-records",children:"Working with Dataset Records"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(d.B,{fn:"mlflow.entities.EvaluationDataset",text:"EvaluationDataset"})," object provides several ways to access and analyze records:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Access all records\nall_records = dataset.records\n\n# Convert to DataFrame for analysis\ndf = dataset.to_df()\nprint(df.head())\n\n# Serialize to a dictionary (e.g., for JSON export)\ndataset_dict = dataset.to_dict()\n\n# View dataset schema (inferred from the records)\nprint(dataset.schema)\n\n# View dataset profile (statistics)\nprint(dataset.profile)\n\n# Get record count\nprint(f"Total number of records: {len(dataset.records)}")\n'})}),"\n",(0,s.jsx)(t.p,{children:"To recreate a dataset from a serialized dictionary:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:"from mlflow.genai.datasets import EvaluationDataset\n\ndataset = EvaluationDataset.from_dict(dataset_dict)\n"})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"advanced-topics",children:"Advanced Topics"}),"\n",(0,s.jsx)(t.h3,{id:"understanding-input-uniqueness",children:"Understanding Input Uniqueness"}),"\n",(0,s.jsxs)(t.p,{children:["Records are considered unique based on their ",(0,s.jsx)(t.strong,{children:"entire inputs dictionary"}),". Even small differences create separate records:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# These are treated as different records due to different inputs\nrecord_a = {\n    "inputs": {"question": "What is MLflow?", "temperature": 0.7},\n    "expectations": {"expected_answer": "MLflow is an ML platform"},\n}\n\nrecord_b = {\n    "inputs": {\n        "question": "What is MLflow?",\n        "temperature": 0.8,\n    },  # Different temperature\n    "expectations": {"expected_answer": "MLflow is an ML platform"},\n}\n\ndataset.merge_records([record_a, record_b])\n# Results in 2 separate records due to different temperature values\n'})}),"\n",(0,s.jsx)(t.h3,{id:"source-type-inference",children:"Source Type Inference"}),"\n",(0,s.jsx)(t.p,{children:"MLflow automatically assigns source types before sending records to the backend using these rules:"}),"\n",(0,s.jsx)(o.A,{concepts:[{title:"Automatic Inference",description:"MLflow automatically infers source types based on record characteristics when no explicit source is provided."},{title:"Client-Side Processing",description:"Source type inference happens in merge_records() before records are sent to the tracking backend."},{title:"Manual Override",description:"You can always specify explicit source information to override automatic inference."}]}),"\n",(0,s.jsx)(t.h4,{id:"inference-rules",children:"Inference Rules"}),"\n",(0,s.jsx)(c.A,{children:(0,s.jsxs)(i.A,{children:[(0,s.jsxs)(l.A,{value:"trace",label:"TRACE Source",default:!0,children:[(0,s.jsxs)(t.p,{children:["Records from MLflow traces are automatically assigned the ",(0,s.jsx)(t.code,{children:"TRACE"})," source type:"]}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# When adding traces directly (automatic TRACE source)\ntraces = mlflow.search_traces(locations=["0"], return_type="list")\ndataset.merge_records(traces)\n\n# Or when using DataFrame from search_traces\ntraces_df = mlflow.search_traces(locations=["0"])  # Returns DataFrame\n# Automatically detects traces and assigns TRACE source\ndataset.merge_records(traces_df)\n'})})]}),(0,s.jsxs)(l.A,{value:"human",label:"HUMAN Source",children:[(0,s.jsxs)(t.p,{children:["Records with expectations are inferred as ",(0,s.jsx)(t.code,{children:"HUMAN"})," source:"]}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Records with expectations indicate human review/annotation\nhuman_curated = [\n    {\n        "inputs": {"question": "What is MLflow?"},\n        "expectations": {\n            "expected_answer": "MLflow is an open-source ML platform",\n            "must_mention": ["tracking", "models", "deployment"],\n        }\n        # Automatically inferred as HUMAN source\n    }\n]\ndataset.merge_records(human_curated)\n'})})]}),(0,s.jsxs)(l.A,{value:"code",label:"CODE Source",children:[(0,s.jsxs)(t.p,{children:["Records with only inputs (no expectations) are inferred as ",(0,s.jsx)(t.code,{children:"CODE"})," source:"]}),(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Records without expectations are inferred as CODE source\ngenerated_tests = [{"inputs": {"question": f"Test question {i}"}} for i in range(100)]\ndataset.merge_records(generated_tests)\n'})})]})]})}),"\n",(0,s.jsx)(t.h4,{id:"manual-source-override",children:"Manual Source Override"}),"\n",(0,s.jsx)(t.p,{children:"You can explicitly specify the source type and metadata for any record:"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Specify HUMAN source with metadata\nhuman_curated = {\n    "inputs": {"question": "What are your business hours?"},\n    "expectations": {\n        "expected_answer": "We\'re open Monday-Friday 9am-5pm EST",\n        "must_include_timezone": True,\n    },\n    "source": {\n        "source_type": "HUMAN",\n        "source_data": {"curator": "support_team", "date": "2024-11-01"},\n    },\n}\n\n# Specify DOCUMENT source\nfrom_docs = {\n    "inputs": {"question": "How to install MLflow?"},\n    "expectations": {\n        "expected_answer": "pip install mlflow",\n        "must_mention_pip": True,\n    },\n    "source": {\n        "source_type": "DOCUMENT",\n        "source_data": {"document_id": "install_guide", "page": 1},\n    },\n}\n\ndataset.merge_records([human_curated, from_docs])\n'})}),"\n",(0,s.jsx)(t.h4,{id:"available-source-types",children:"Available Source Types"}),"\n",(0,s.jsx)(m.A,{features:[{icon:x.A,title:"TRACE",description:"Production data captured via MLflow tracing - automatically assigned when adding traces"},{icon:f.A,title:"HUMAN",description:"Subject matter expert annotations - inferred for records with expectations"},{icon:u.A,title:"CODE",description:"Programmatically generated tests - inferred for records without expectations"},{icon:j.A,title:"DOCUMENT",description:"Test cases from documentation or specs - must be explicitly specified"},{icon:_.A,title:"UNSPECIFIED",description:"Source unknown or not provided - for legacy or imported data"}]}),"\n",(0,s.jsx)(t.h3,{id:"search-filter-reference",children:"Search Filter Reference"}),"\n",(0,s.jsx)(t.h4,{id:"searchable-fields",children:"Searchable Fields"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Field"}),(0,s.jsx)(t.th,{children:"Type"}),(0,s.jsx)(t.th,{children:"Example"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"name"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"name = 'production_tests'"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tags.<key>"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"tags.status = 'validated'"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"created_by"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"created_by = 'alice@company.com'"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_updated_by"})}),(0,s.jsx)(t.td,{children:"string"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_updated_by = 'bob@company.com'"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"created_time"})}),(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"created_time > 1698800000000"})})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_update_time"})}),(0,s.jsx)(t.td,{children:"timestamp"}),(0,s.jsx)(t.td,{children:(0,s.jsx)(t.code,{children:"last_update_time > 1698800000000"})})]})]})]}),"\n",(0,s.jsx)(t.h4,{id:"filter-operators",children:"Filter Operators"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"="}),", ",(0,s.jsx)(t.code,{children:"!="}),": Exact match"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"LIKE"}),", ",(0,s.jsx)(t.code,{children:"ILIKE"}),": Pattern matching with ",(0,s.jsx)(t.code,{children:"%"})," wildcard (ILIKE is case-insensitive)"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:">"}),", ",(0,s.jsx)(t.code,{children:"<"}),", ",(0,s.jsx)(t.code,{children:">="}),", ",(0,s.jsx)(t.code,{children:"<="}),": Numeric/timestamp comparison"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.code,{children:"AND"}),": Combine conditions (OR is not currently supported)"]}),"\n"]}),"\n",(0,s.jsx)(t.h4,{id:"common-filter-examples",children:"Common Filter Examples"}),"\n",(0,s.jsxs)("table",{style:{width:"100%"},children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{style:{width:"40%"},children:"Filter Expression"}),(0,s.jsx)("th",{style:{width:"30%"},children:"Description"}),(0,s.jsx)("th",{style:{width:"30%"},children:"Use Case"})]})}),(0,s.jsxs)("tbody",{children:[(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"name = 'production_qa'"})})}),(0,s.jsx)("td",{children:"Exact name match"}),(0,s.jsx)("td",{children:"Find a specific dataset"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"name LIKE '%test%'"})})}),(0,s.jsx)("td",{children:"Pattern matching"}),(0,s.jsx)("td",{children:"Find all test datasets"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"tags.status = 'validated'"})})}),(0,s.jsx)("td",{children:"Tag equality"}),(0,s.jsx)("td",{children:"Find production-ready datasets"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"tags.version = '2.0' AND tags.team = 'ml'"})})}),(0,s.jsx)("td",{children:"Multiple tag conditions"}),(0,s.jsx)("td",{children:"Find team-specific versions"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"created_by = 'alice@company.com'"})})}),(0,s.jsx)("td",{children:"Creator filter"}),(0,s.jsx)("td",{children:"Find datasets by author"})]}),(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsx)("strong",{children:(0,s.jsx)(t.code,{children:"created_time > 1698800000000"})})}),(0,s.jsx)("td",{children:"Time-based filter"}),(0,s.jsx)("td",{children:"Find recent datasets"})]})]})]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-python",children:'# Complex filter example\ndatasets = search_datasets(\n    filter_string="""\n        tags.status = \'production\'\n        AND name LIKE \'%customer%\'\n        AND created_time > 1698800000000\n    """,\n    order_by=["last_update_time DESC"],\n)\n'})}),"\n",(0,s.jsx)(t.hr,{}),"\n",(0,s.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsxs)(h.A,{children:[(0,s.jsx)(p.A,{icon:g.A,iconSize:48,title:"End-to-End Workflow",description:"Learn the complete evaluation-driven development workflow from app building to production",href:"/genai/datasets/end-to-end-workflow",linkText:"View complete workflow \u2192",containerHeight:64}),(0,s.jsx)(p.A,{icon:w.A,iconSize:48,title:"Run Evaluations",description:"Use your datasets to systematically evaluate and improve your GenAI applications",href:"/genai/eval-monitor",linkText:"Start evaluating \u2192",containerHeight:64}),(0,s.jsx)(p.A,{icon:y.A,iconSize:48,title:"Define Expectations",description:"Learn how to add ground truth expectations to your test data for quality validation",href:"/genai/assessments/expectations",linkText:"Set expectations \u2192",containerHeight:64})]})]})}function D(e={}){let{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(N,{...e})}):N(e)}},54725(e,t,n){n.d(t,{B:()=>i});var r=n(74848);n(96540);var s=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),a=n(66497);function i({fn:e,children:t,hash:n}){let i=(e=>{let t=e.split(".");for(let e=t.length;e>0;e--){let n=t.slice(0,e).join(".");if(s[n])return n}return null})(e);if(!i)return(0,r.jsx)(r.Fragment,{children:t});let l=(0,a.default)(`/${s[i]}#${n??e}`);return(0,r.jsx)("a",{href:l,target:"_blank",children:t??(0,r.jsxs)("code",{children:[e,"()"]})})}},34742(e,t,n){n.d(t,{A:()=>s});var r=n(74848);n(96540);function s({concepts:e,title:t}){return(0,r.jsxs)("div",{className:"conceptOverview_x8T_",children:[t&&(0,r.jsx)("h3",{className:"overviewTitle_HyAI",children:t}),(0,r.jsx)("div",{className:"conceptGrid_uJNV",children:e.map((e,t)=>(0,r.jsxs)("div",{className:"conceptCard_oday",children:[(0,r.jsxs)("div",{className:"conceptHeader_HCk5",children:[e.icon&&(0,r.jsx)("div",{className:"conceptIcon_gejw",children:(0,r.jsx)(e.icon,{size:20})}),(0,r.jsx)("h4",{className:"conceptTitle_TGMM",children:e.title})]}),(0,r.jsx)("p",{className:"conceptDescription_ZyDn",children:e.description})]},t))})]})}},33508(e,t,n){n.d(t,{A:()=>s});var r=n(74848);n(96540);function s({features:e,col:t=2}){return(0,r.jsx)("div",{className:"featureHighlights_Ardf",style:{gridTemplateColumns:`repeat(${t}, 1fr)`},children:e.map((e,t)=>(0,r.jsxs)("div",{className:"highlightItem_XPnN",children:[e.icon&&(0,r.jsx)("div",{className:"highlightIcon_SUR8",children:(0,r.jsx)(e.icon,{size:24})}),(0,r.jsxs)("div",{className:"highlightContent_d0XP",children:[(0,r.jsx)("h4",{children:e.title}),(0,r.jsx)("p",{children:e.description})]})]},t))})}},95986(e,t,n){n.d(t,{A:()=>s});var r=n(74848);n(96540);function s({children:e}){return(0,r.jsx)("div",{className:"wrapper_sf5q",children:e})}},77541(e,t,n){n.d(t,{A:()=>c});var r=n(74848);n(96540);var s=n(95310),a=n(34164);let i="tileImage_O4So";var l=n(66497),d=n(92802);function c({icon:e,image:t,imageDark:n,imageWidth:c,imageHeight:o,iconSize:h=32,containerHeight:p,title:m,description:x,href:f,linkText:u="Learn more \u2192",className:j}){if(!e&&!t)throw Error("TileCard requires either an icon or image prop");let _=p?{height:`${p}px`}:{},g={};return c&&(g.width=`${c}px`),o&&(g.height=`${o}px`),(0,r.jsxs)(s.A,{href:f,className:(0,a.A)("tileCard_NHsj",j),children:[(0,r.jsx)("div",{className:"tileIcon_pyoR",style:_,children:e?(0,r.jsx)(e,{size:h}):n?(0,r.jsx)(d.A,{sources:{light:(0,l.default)(t),dark:(0,l.default)(n)},alt:m,className:i,style:g}):(0,r.jsx)("img",{src:(0,l.default)(t),alt:m,className:i,style:g})}),(0,r.jsx)("h3",{children:m}),(0,r.jsx)("p",{children:x}),(0,r.jsx)("div",{className:"tileLink_iUbu",children:u})]})}},10440(e,t,n){n.d(t,{A:()=>a});var r=n(74848);n(96540);var s=n(34164);function a({children:e,className:t}){return(0,r.jsx)("div",{className:(0,s.A)("tilesGrid_hB9N",t),children:e})}}}]);