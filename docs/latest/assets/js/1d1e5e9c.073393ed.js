/*! For license information please see 1d1e5e9c.073393ed.js.LICENSE.txt */
"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[7792],{6789:(e,n,t)=>{t.d(n,{A:()=>c});t(96540);var a=t(28774),i=t(34164);const o={tileCard:"tileCard_NHsj",tileIcon:"tileIcon_pyoR",tileLink:"tileLink_iUbu",tileImage:"tileImage_O4So"};var s=t(86025),r=t(21122),l=t(74848);function c({icon:e,image:n,imageDark:t,imageWidth:c,imageHeight:d,iconSize:h=32,containerHeight:u,title:g,description:p,href:m,linkText:v="Learn more \u2192",className:f}){if(!e&&!n)throw new Error("TileCard requires either an icon or image prop");const x=u?{height:`${u}px`}:{},j={};return c&&(j.width=`${c}px`),d&&(j.height=`${d}px`),(0,l.jsxs)(a.A,{href:m,className:(0,i.A)(o.tileCard,f),children:[(0,l.jsx)("div",{className:o.tileIcon,style:x,children:e?(0,l.jsx)(e,{size:h}):t?(0,l.jsx)(r.A,{sources:{light:(0,s.Ay)(n),dark:(0,s.Ay)(t)},alt:g,className:o.tileImage,style:j}):(0,l.jsx)("img",{src:(0,s.Ay)(n),alt:g,className:o.tileImage,style:j})}),(0,l.jsx)("h3",{children:g}),(0,l.jsx)("p",{children:p}),(0,l.jsx)("div",{className:o.tileLink,children:v})]})}},15977:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>r});var a=t(96540);const i={},o=a.createContext(i);function s(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(o.Provider,{value:n},e.children)}},53806:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>f,contentTitle:()=>v,default:()=>y,frontMatter:()=>m,metadata:()=>a,toc:()=>x});const a=JSON.parse('{"id":"eval-monitor/scorers/llm-judge/agent-behavior-patterns","title":"Evaluating Agent Behavior","description":"Use Agent-as-a-Judge to evaluate complex agent behaviors and multi-step workflows","source":"@site/docs/genai/eval-monitor/scorers/llm-judge/agent-behavior-patterns.mdx","sourceDirName":"eval-monitor/scorers/llm-judge","slug":"/eval-monitor/scorers/llm-judge/agent-behavior-patterns","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/agent-behavior-patterns","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Evaluating Agent Behavior","sidebar_label":"Evaluating Agent Behavior","description":"Use Agent-as-a-Judge to evaluate complex agent behaviors and multi-step workflows"},"sidebar":"genAISidebar","previous":{"title":"Trace Analysis with Tools","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/trace-analysis"},"next":{"title":"Guidelines-based","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/guidelines"}}');var i=t(74848),o=t(28453),s=t(82238),r=t(65592),l=t(6789),c=t(87073),d=t(61878),h=t(15977),u=t(96844),g=t(80827),p=t(93893);const m={title:"Evaluating Agent Behavior",sidebar_label:"Evaluating Agent Behavior",description:"Use Agent-as-a-Judge to evaluate complex agent behaviors and multi-step workflows"},v="Evaluating Agent Behavior Patterns",f={},x=[{value:"Key Agent Behaviors to Evaluate",id:"key-agent-behaviors-to-evaluate",level:2},{value:"Common Agent Evaluation Patterns",id:"common-agent-evaluation-patterns",level:2},{value:"Reasoning Chain Validation",id:"reasoning-chain-validation",level:3},{value:"Tool Usage Optimization",id:"tool-usage-optimization",level:3},{value:"Loop and Recursion Detection",id:"loop-and-recursion-detection",level:3},{value:"Practical Examples",id:"practical-examples",level:2},{value:"RAG Agent Evaluation",id:"rag-agent-evaluation",level:3},{value:"Using with mlflow.genai.evaluate()",id:"using-with-mlflowgenaievaluate",level:2},{value:"Best Practices for Agent Evaluation",id:"best-practices-for-agent-evaluation",level:2},{value:"Next Steps",id:"next-steps",level:2}];function j(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"evaluating-agent-behavior-patterns",children:"Evaluating Agent Behavior Patterns"})}),"\n",(0,i.jsx)(n.p,{children:"Agent-as-a-Judge excels at evaluating complex agent behaviors that are impossible to assess from inputs and outputs alone. They can understand reasoning chains, tool selection strategies, and decision-making processes."}),"\n",(0,i.jsx)(n.h2,{id:"key-agent-behaviors-to-evaluate",children:"Key Agent Behaviors to Evaluate"}),"\n",(0,i.jsx)(s.A,{features:[{icon:c.A,title:"Reasoning Quality",description:"Assess logical progression, assumption validity, and conclusion soundness in multi-step reasoning."},{icon:d.A,title:"Tool Selection",description:"Evaluate if agents choose appropriate tools for tasks and use them in optimal sequences."},{icon:h.A,title:"Error Recovery",description:"Check how agents handle failures, implement retry logic, and fall back to alternatives."},{icon:u.A,title:"Efficiency Patterns",description:"Identify redundant operations, unnecessary loops, and opportunities for optimization."}]}),"\n",(0,i.jsx)(n.h2,{id:"common-agent-evaluation-patterns",children:"Common Agent Evaluation Patterns"}),"\n",(0,i.jsx)(n.h3,{id:"reasoning-chain-validation",children:"Reasoning Chain Validation"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'from mlflow.genai.judges import make_judge\n\nreasoning_judge = make_judge(\n    name="reasoning_validator",\n    instructions=(\n        "Evaluate the reasoning chain in {{ trace }}.\\n\\n"\n        "Analysis criteria:\\n"\n        "1. Logical Progression: Does each step follow logically from the previous?\\n"\n        "2. Assumption Validity: Are assumptions reasonable and stated?\\n"\n        "3. Evidence Usage: Is evidence properly cited and used?\\n"\n        "4. Conclusion Soundness: Does the conclusion follow from the premises?\\n\\n"\n        "Identify specific reasoning flaws with span IDs.\\n"\n        "Score 1-100 for reasoning quality."\n    ),\n    model="anthropic:/claude-opus-4-1-20250805",\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"tool-usage-optimization",children:"Tool Usage Optimization"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'tool_optimization_judge = make_judge(\n    name="tool_optimizer",\n    instructions=(\n        "Analyze tool usage patterns in {{ trace }}.\\n\\n"\n        "Check for:\\n"\n        "1. Unnecessary tool calls (could be answered without tools)\\n"\n        "2. Wrong tool selection (better tool available)\\n"\n        "3. Inefficient sequencing (could parallelize or reorder)\\n"\n        "4. Missing tool usage (should have used a tool)\\n\\n"\n        "Provide specific optimization suggestions.\\n"\n        "Rate efficiency as: \'optimal\', \'good\', \'suboptimal\', or \'poor\'"\n    ),\n    model="anthropic:/claude-opus-4-1-20250805",\n)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"loop-and-recursion-detection",children:"Loop and Recursion Detection"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'loop_detector_judge = make_judge(\n    name="loop_detector",\n    instructions=(\n        "Detect problematic loops in {{ trace }}.\\n\\n"\n        "Identify:\\n"\n        "1. Infinite loop risks\\n"\n        "2. Unnecessary iterations\\n"\n        "3. Circular reasoning patterns\\n"\n        "4. Recursive calls without proper termination\\n\\n"\n        "Report specific span patterns that indicate issues.\\n"\n        "Classify as: \'clean\', \'warning\', or \'critical\'"\n    ),\n    model="anthropic:/claude-opus-4-1-20250805",\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"practical-examples",children:"Practical Examples"}),"\n",(0,i.jsx)(n.h3,{id:"rag-agent-evaluation",children:"RAG Agent Evaluation"}),"\n",(0,i.jsx)(n.p,{children:"Evaluate retrieval-augmented generation agents:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'rag_judge = make_judge(\n    name="rag_evaluator",\n    instructions=(\n        "Evaluate the RAG agent\'s behavior in {{ trace }}.\\n\\n"\n        "Check for:\\n"\n        "1. Were the right documents retrieved?\\n"\n        "2. Is the response grounded in the retrieved context?\\n"\n        "3. Are sources properly cited?\\n\\n"\n        "Rate as: \'good\', \'acceptable\', or \'poor\'"\n    ),\n    model="anthropic:/claude-opus-4-1-20250805",\n)\n\n\n# Use with your RAG pipeline\n@mlflow.trace\ndef rag_pipeline(query):\n    docs = retrieve_documents(query)\n    response = generate_with_context(query, docs)\n    return response\n\n\nresult = rag_pipeline("What is MLflow?")\ntrace = mlflow.get_last_active_trace()\nevaluation = rag_judge(trace=trace)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"using-with-mlflowgenaievaluate",children:"Using with mlflow.genai.evaluate()"}),"\n",(0,i.jsx)(n.p,{children:"Integrate Agent-as-a-Judge into your evaluation workflow:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import pandas as pd\nimport mlflow\n\n# Simple evaluation dataset\ntest_data = pd.DataFrame(\n    [{"question": "What is MLflow?"}, {"question": "How do I track experiments?"}]\n)\n\n\n# Your application function\n@mlflow.trace\ndef my_app(question):\n    # Your application logic here\n    return generate_response(question)\n\n\n# Run evaluation with Agent-as-a-Judge\nresults = mlflow.genai.evaluate(\n    data=test_data,\n    predict_fn=my_app,\n    scorers=[reasoning_judge, tool_optimization_judge],\n)\n'})}),"\n",(0,i.jsx)(n.h2,{id:"best-practices-for-agent-evaluation",children:"Best Practices for Agent Evaluation"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Define Clear Behavioral Criteria"}),": Specify exactly what constitutes good vs. bad agent behavior"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Use Multiple Judges"}),": Different judges can focus on different aspects (reasoning, efficiency, safety)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Request Actionable Feedback"}),": Ask judges to provide specific improvement suggestions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Track Over Time"}),": Monitor how agent behavior changes with updates"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Combine with Field-Based Evaluation"}),": Use both Agent-as-a-Judge and field-based judges for complete coverage"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(r.A,{children:[(0,i.jsx)(l.A,{icon:g.A,iconSize:48,title:"make_judge API",description:"Learn the complete API for creating custom judges",href:"/genai/eval-monitor/scorers/llm-judge/make-judge",linkText:"View API \u2192",containerHeight:64}),(0,i.jsx)(l.A,{icon:u.A,iconSize:48,title:"Trace Analysis",description:"Understand how judges use tools to analyze traces",href:"/genai/eval-monitor/scorers/llm-judge/trace-analysis",linkText:"Learn more \u2192",containerHeight:64}),(0,i.jsx)(l.A,{icon:p.A,iconSize:48,title:"Judge Alignment",description:"Align judges with human feedback for better accuracy",href:"/genai/eval-monitor/scorers/llm-judge/alignment",linkText:"Explore \u2192",containerHeight:64})]})]})}function y(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(j,{...e})}):j(e)}},61878:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]])},65592:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var a=t(34164);const i={tilesGrid:"tilesGrid_hB9N"};var o=t(74848);function s({children:e,className:n}){return(0,o.jsx)("div",{className:(0,a.A)(i.tilesGrid,n),children:e})}},80827:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},82238:(e,n,t)=>{t.d(n,{A:()=>o});t(96540);const a={featureHighlights:"featureHighlights_Ardf",highlightItem:"highlightItem_XPnN",highlightIcon:"highlightIcon_SUR8",highlightContent:"highlightContent_d0XP"};var i=t(74848);function o({features:e}){return(0,i.jsx)("div",{className:a.featureHighlights,children:e.map((e,n)=>(0,i.jsxs)("div",{className:a.highlightItem,children:[e.icon&&(0,i.jsx)("div",{className:a.highlightIcon,children:(0,i.jsx)(e.icon,{size:24})}),(0,i.jsxs)("div",{className:a.highlightContent,children:[(0,i.jsx)("h4",{children:e.title}),(0,i.jsx)("p",{children:e.description})]})]},n))})}},84722:(e,n,t)=>{t.d(n,{A:()=>c});var a=t(96540);const i=e=>{const n=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,t)=>t?t.toUpperCase():n.toLowerCase()))(e);return n.charAt(0).toUpperCase()+n.slice(1)},o=(...e)=>e.filter((e,n,t)=>Boolean(e)&&""!==e.trim()&&t.indexOf(e)===n).join(" ").trim(),s=e=>{for(const n in e)if(n.startsWith("aria-")||"role"===n||"title"===n)return!0};var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l=(0,a.forwardRef)(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:l="",children:c,iconNode:d,...h},u)=>(0,a.createElement)("svg",{ref:u,...r,width:n,height:n,stroke:e,strokeWidth:i?24*Number(t)/Number(n):t,className:o("lucide",l),...!c&&!s(h)&&{"aria-hidden":"true"},...h},[...d.map(([e,n])=>(0,a.createElement)(e,n)),...Array.isArray(c)?c:[c]])),c=(e,n)=>{const t=(0,a.forwardRef)(({className:t,...s},r)=>{return(0,a.createElement)(l,{ref:r,iconNode:n,className:o(`lucide-${c=i(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,t),...s});var c});return t.displayName=i(e),t}},87073:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]])},93893:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]])},96844:(e,n,t)=>{t.d(n,{A:()=>a});const a=(0,t(84722).A)("activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])}}]);