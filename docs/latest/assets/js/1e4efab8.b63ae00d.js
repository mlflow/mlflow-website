"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[4073],{6789:(e,n,t)=>{t.d(n,{A:()=>c});t(96540);var a=t(28774),i=t(34164);const r={tileCard:"tileCard_NHsj",tileIcon:"tileIcon_pyoR",tileLink:"tileLink_iUbu",tileImage:"tileImage_O4So"};var s=t(86025),l=t(21122),o=t(74848);function c({icon:e,image:n,imageDark:t,imageWidth:c,imageHeight:d,iconSize:u=32,containerHeight:p,title:h,description:m,href:g,linkText:f="Learn more \u2192",className:x}){if(!e&&!n)throw new Error("TileCard requires either an icon or image prop");const w=p?{height:`${p}px`}:{},y={};return c&&(y.width=`${c}px`),d&&(y.height=`${d}px`),(0,o.jsxs)(a.A,{href:g,className:(0,i.A)(r.tileCard,x),children:[(0,o.jsx)("div",{className:r.tileIcon,style:w,children:e?(0,o.jsx)(e,{size:u}):t?(0,o.jsx)(l.A,{sources:{light:(0,s.Ay)(n),dark:(0,s.Ay)(t)},alt:h,className:r.tileImage,style:y}):(0,o.jsx)("img",{src:(0,s.Ay)(n),alt:h,className:r.tileImage,style:y})}),(0,o.jsx)("h3",{children:h}),(0,o.jsx)("p",{children:m}),(0,o.jsx)("div",{className:r.tileLink,children:f})]})}},10493:(e,n,t)=>{t.d(n,{Zp:()=>o,AC:()=>l,WO:()=>d,_C:()=>c,$3:()=>u,jK:()=>p});var a=t(34164);const i={CardGroup:"CardGroup_P84T",NoGap:"NoGap_O9Dj",MaxThreeColumns:"MaxThreeColumns_FO1r",AutofillColumns:"AutofillColumns_fKhQ",Card:"Card_aSCR",CardBordered:"CardBordered_glGF",CardBody:"CardBody_BhRs",TextColor:"TextColor_a8Tp",BoxRoot:"BoxRoot_Etgr",FlexWrapNowrap:"FlexWrapNowrap_f60k",FlexJustifyContentFlexStart:"FlexJustifyContentFlexStart_ZYv5",FlexDirectionRow:"FlexDirectionRow_T2qL",FlexAlignItemsCenter:"FlexAlignItemsCenter_EHVM",FlexFlex:"FlexFlex__JTE",Link:"Link_fVkl",MarginLeft4:"MarginLeft4_YQSJ",MarginTop4:"MarginTop4_jXKN",PaddingBottom4:"PaddingBottom4_O9gt",LogoCardContent:"LogoCardContent_kCQm",LogoCardImage:"LogoCardImage_JdcX",SmallLogoCardContent:"SmallLogoCardContent_LxhV",SmallLogoCardRounded:"SmallLogoCardRounded_X50_",SmallLogoCardImage:"SmallLogoCardImage_tPZl",NewFeatureCardContent:"NewFeatureCardContent_Rq3d",NewFeatureCardHeading:"NewFeatureCardHeading_f6q3",NewFeatureCardHeadingSeparator:"NewFeatureCardHeadingSeparator_pSx8",NewFeatureCardTags:"NewFeatureCardTags_IFHO",NewFeatureCardWrapper:"NewFeatureCardWrapper_NQ0k",TitleCardContent:"TitleCardContent_l9MQ",TitleCardHeader:"TitleCardHeader_fUQy",TitleCardHeaderRight:"TitleCardHeaderRight_iBLX",TitleCardTitle:"TitleCardTitle__K8J",TitleCardSeparator:"TitleCardSeparator_IN2E",Cols1:"Cols1_Gr2U",Cols2:"Cols2_sRvc",Cols3:"Cols3_KjUS",Cols4:"Cols4_dKOj",Cols5:"Cols5_jDmj",Cols6:"Cols6_Q0OR"};var r=t(28774),s=t(74848);const l=({children:e,isSmall:n,cols:t,noGap:r})=>(0,s.jsx)("div",{className:(0,a.A)(i.CardGroup,n?i.AutofillColumns:t?i[`Cols${t}`]:i.MaxThreeColumns,r&&i.NoGap),children:e}),o=({children:e,link:n=""})=>n?(0,s.jsx)(r.A,{className:(0,a.A)(i.Link,i.Card,i.CardBordered),to:n,children:e}):(0,s.jsx)("div",{className:(0,a.A)(i.Card,i.CardBordered),children:e}),c=({headerText:e,link:n,text:t})=>(0,s.jsx)(o,{link:n,children:(0,s.jsxs)("span",{children:[(0,s.jsx)("div",{className:(0,a.A)(i.CardTitle,i.BoxRoot,i.PaddingBottom4),style:{pointerEvents:"none"},children:(0,s.jsx)("div",{className:(0,a.A)(i.BoxRoot,i.FlexFlex,i.FlexAlignItemsCenter,i.FlexDirectionRow,i.FlexJustifyContentFlexStart,i.FlexWrapNowrap),style:{marginLeft:"-4px",marginTop:"-4px"},children:(0,s.jsx)("div",{className:(0,a.A)(i.BoxRoot,i.BoxHideIfEmpty,i.MarginTop4,i.MarginLeft4),style:{pointerEvents:"auto"},children:(0,s.jsx)("span",{className:"",children:e})})})}),(0,s.jsx)("span",{className:(0,a.A)(i.TextColor,i.CardBody),children:(0,s.jsx)("p",{children:t})})]})}),d=({description:e,children:n,link:t})=>(0,s.jsx)(o,{link:t,children:(0,s.jsxs)("div",{className:i.LogoCardContent,children:[(0,s.jsx)("div",{className:i.LogoCardImage,children:n}),(0,s.jsx)("p",{className:i.TextColor,children:e})]})}),u=({children:e,link:n})=>(0,s.jsx)("div",{className:(0,a.A)(i.Card,i.CardBordered,i.SmallLogoCardRounded),children:n?(0,s.jsx)(r.A,{className:(0,a.A)(i.Link),to:n,children:(0,s.jsx)("div",{className:i.SmallLogoCardContent,children:(0,s.jsx)("div",{className:(0,a.A)("max-height-img-container",i.SmallLogoCardImage),children:e})})}):(0,s.jsx)("div",{className:i.SmallLogoCardContent,children:(0,s.jsx)("div",{className:(0,a.A)("max-height-img-container",i.SmallLogoCardImage),children:e})})}),p=({title:e,description:n,link:t="",headerRight:r,children:l})=>(0,s.jsx)(o,{link:t,children:(0,s.jsxs)("div",{className:i.TitleCardContent,children:[(0,s.jsxs)("div",{className:(0,a.A)(i.TitleCardHeader),children:[(0,s.jsx)("div",{className:(0,a.A)(i.TitleCardTitle),style:{textAlign:"left",fontWeight:"bold"},children:e}),(0,s.jsx)("div",{className:i.TitleCardHeaderRight,children:r})]}),(0,s.jsx)("hr",{className:(0,a.A)(i.TitleCardSeparator),style:{margin:"12px 0"}}),l?(0,s.jsx)("div",{className:(0,a.A)(i.TextColor),children:l}):(0,s.jsx)("p",{className:(0,a.A)(i.TextColor),dangerouslySetInnerHTML:{__html:n}})]})})},11470:(e,n,t)=>{t.d(n,{A:()=>C});var a=t(96540),i=t(34164),r=t(17559),s=t(23104),l=t(56347),o=t(205),c=t(57485),d=t(31682),u=t(70679);function p(e){return a.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,a.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,a.useMemo)(()=>{const e=n??function(e){return p(e).map(({props:{value:e,label:n,attributes:t,default:a}})=>({value:e,label:n,attributes:t,default:a}))}(t);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function m({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const t=(0,l.W6)(),i=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,c.aZ)(i),(0,a.useCallback)(e=>{if(!i)return;const n=new URLSearchParams(t.location.search);n.set(i,e),t.replace({...t.location,search:n.toString()})},[i,t])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,r=h(e),[s,l]=(0,a.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!m({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:r})),[c,d]=g({queryString:t,groupId:i}),[p,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,i]=(0,u.Dv)(n);return[t,(0,a.useCallback)(e=>{n&&i.set(e)},[n,i])]}({groupId:i}),x=(()=>{const e=c??p;return m({value:e,tabValues:r})?e:null})();(0,o.A)(()=>{x&&l(x)},[x]);return{selectedValue:s,selectValue:(0,a.useCallback)(e=>{if(!m({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)},[d,f,r]),tabValues:r}}var x=t(92303);const w={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var y=t(74848);function j({className:e,block:n,selectedValue:t,selectValue:a,tabValues:r}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,s.a_)(),c=e=>{const n=e.currentTarget,i=l.indexOf(n),s=r[i].value;s!==t&&(o(n),a(s))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,y.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":n},e),children:r.map(({value:e,label:n,attributes:a})=>(0,y.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...a,className:(0,i.A)("tabs__item",w.tabItem,a?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:t}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find(e=>e.props.value===t);return e?(0,a.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,y.jsx)("div",{className:"margin-top--md",children:r.map((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function b(e){const n=f(e);return(0,y.jsxs)("div",{className:(0,i.A)(r.G.tabs.container,"tabs-container",w.tabList),children:[(0,y.jsx)(j,{...n,...e}),(0,y.jsx)(v,{...n,...e})]})}function C(e){const n=(0,x.A)();return(0,y.jsx)(b,{...e,children:p(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var a=t(34164);const i={tabItem:"tabItem_Ymn6"};var r=t(74848);function s({children:e,hidden:n,className:t}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,a.A)(i.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>l});var a=t(96540);const i={},r=a.createContext(i);function s(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),a.createElement(r.Provider,{value:n},e.children)}},47020:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);const a={wrapper:"wrapper_sf5q"};var i=t(74848);function r({children:e}){return(0,i.jsx)("div",{className:a.wrapper,children:e})}},57431:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>h,default:()=>x,frontMatter:()=>p,metadata:()=>a,toc:()=>g});const a=JSON.parse('{"id":"tracing/app-instrumentation/typescript-sdk","title":"Typescript SDK","description":"Lean how to use MLflow Typescript SDK to debug, evaluate, and monitor your applications with MLflow\'s powerful observability capabilities.","source":"@site/docs/genai/tracing/app-instrumentation/typescript-sdk.mdx","sourceDirName":"tracing/app-instrumentation","slug":"/tracing/app-instrumentation/typescript-sdk","permalink":"/mlflow-website/docs/latest/genai/tracing/app-instrumentation/typescript-sdk","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Typescript SDK","description":"Lean how to use MLflow Typescript SDK to debug, evaluate, and monitor your applications with MLflow\'s powerful observability capabilities."},"sidebar":"genAISidebar","previous":{"title":"Manual Tracing","permalink":"/mlflow-website/docs/latest/genai/tracing/app-instrumentation/manual-tracing"},"next":{"title":"Auto Tracing Integrations","permalink":"/mlflow-website/docs/latest/genai/tracing/integrations/"}}');var i=t(74848),r=t(28453),s=t(11470),l=t(19365),o=t(65592),c=t(6789),d=t(10493),u=t(47020);t(82238);const p={title:"Typescript SDK",description:"Lean how to use MLflow Typescript SDK to debug, evaluate, and monitor your applications with MLflow's powerful observability capabilities."},h="MLflow Typescript SDK for Tracing",m={},g=[{value:"Quick Start",id:"quick-start",level:2},{value:"Installation",id:"installation",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Automatic Tracing",id:"automatic-tracing",level:2},{value:"Manual Tracing",id:"manual-tracing",level:2},{value:"Tracing a function with the <code>trace</code> API",id:"tracing-a-function-with-the-trace-api",level:3},{value:"Capturing Nested Function Calls",id:"capturing-nested-function-calls",level:3},{value:"Tracing a class method with the <code>@trace</code> API",id:"tracing-a-class-method-with-the-trace-api",level:3},{value:"Tracing a block of code with the <code>withSpan</code> API",id:"tracing-a-block-of-code-with-the-withspan-api",level:3},{value:"Create and End a Span Explicitly",id:"create-and-end-a-span-explicitly",level:3},{value:"Grouping Traces by Users and Sessions",id:"grouping-traces-by-users-and-sessions",level:2},{value:"Developing the TypeScript SDK",id:"developing-the-typescript-sdk",level:2},{value:"FAQ",id:"faq",level:2},{value:"Q. I found a feature in the Python SDK that is not available in the Typescript SDK.",id:"q-i-found-a-feature-in-the-python-sdk-that-is-not-available-in-the-typescript-sdk",level:4},{value:"Q. Can I use TypeScript for general MLflow experiment tracking, not only tracing?",id:"q-can-i-use-typescript-for-general-mlflow-experiment-tracking-not-only-tracing",level:4},{value:"Q. Do I need to install Python to use MLflow Typescript SDK?",id:"q-do-i-need-to-install-python-to-use-mlflow-typescript-sdk",level:4}];function f(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"mlflow-typescript-sdk-for-tracing",children:"MLflow Typescript SDK for Tracing"})}),"\n",(0,i.jsx)(n.admonition,{title:"Waiting for your feedback",type:"info",children:(0,i.jsxs)(n.p,{children:["MLflow Typescript SDK is an experimental package. We are actively working on it and would love to hear your feedback. Please raise a feature request or bug reports in ",(0,i.jsx)("ins",{children:(0,i.jsx)(n.a,{href:"https://github.com/mlflow/mlflow/issues/new/choose",children:"GitHub"})}),"."]})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/mlflow-tracing",children:"MLflow's TypeScript SDK"})," empowers AI application developers by bringing ",(0,i.jsx)(n.a,{href:"/genai/tracing",children:"MLflow's Tracing"})," capabilities to TypeScript and JavaScript. With minimum code changes, you can ",(0,i.jsx)(n.strong,{children:"debug"}),", ",(0,i.jsx)(n.strong,{children:"evaluate"}),", and ",(0,i.jsx)(n.strong,{children:"monitor"})," your applications with MLflow's powerful observability features and take advantage of the trusted end-to-end MLOps platform."]}),"\n",(0,i.jsx)(n.h2,{id:"quick-start",children:"Quick Start"}),"\n",(0,i.jsx)(n.p,{children:"If you are new to MLflow Tracing, please start with the following quickstart guide:"}),"\n",(0,i.jsx)(o.A,{children:(0,i.jsx)(c.A,{image:"/images/logos/javascript-typescript-logo.png",title:"Quickstart (JS/TS)",description:"Get started with MLflow in JavaScript or TypeScript",href:"/genai/tracing/quickstart/typescript-openai",linkText:"Start building \u2192",containerHeight:64})}),"\n",(0,i.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,i.jsxs)(n.p,{children:["Install the package from the ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/mlflow-tracing",children:"npm registry"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install mlflow-tracing\n"})}),"\n",(0,i.jsxs)(n.p,{children:["After installation, connect your application to an MLflow server by following the ",(0,i.jsx)(n.a,{href:"/genai/tracing/app-instrumentation#2-connect-your-application-with-mlflow",children:"Connecting to an MLflow Server"})," guide."]}),"\n",(0,i.jsx)(n.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,i.jsx)(u.A,{children:(0,i.jsxs)(s.A,{children:[(0,i.jsx)(l.A,{value:"Simple Function",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"// Wrap a function with mlflow.trace to generate a span when the function is called.\nconst getWeather = mlflow.trace(\n  (city: string) => {\n    return `The weather in ${city} is sunny`;\n  },\n  // Pass options to set span name.\n  { name: 'get-weather' }\n);\n\n// Invoke the function as usual, MLflow will automatically create a span and capture\n// inputs, outputs, latency, and exception information.\ngetWeather('San Francisco');\n\n// Alternatively, start and end spans manually.\nconst span = mlflow.startSpan({ name: 'my-span', inputs: { message: 'Hi, MLflow!' } });\nspan.end({ outputs: { message: 'Hi, what can I do for you?' } });\n"})})}),(0,i.jsxs)(l.A,{value:"OpenAI",children:[(0,i.jsx)(n.p,{children:"Install the OpenAI integration package:"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install mlflow-openai\n"})}),(0,i.jsxs)(n.p,{children:["Then, wrap the OpenAI client with the ",(0,i.jsx)(n.code,{children:"tracedOpenAI"})," function:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import * as mlflow from "mlflow-tracing";\n\n// Initialize the tracing SDK\nmlflow.init({\n    trackingUri: "<your-tracking-server-uri>",\n    experimentId: "<your-experiment-id>",\n});\n\n'})}),(0,i.jsxs)(n.admonition,{title:"Configure with environment variables",type:"tip",children:[(0,i.jsxs)(n.p,{children:["Set ",(0,i.jsx)(n.code,{children:"MLFLOW_TRACKING_URI"})," and ",(0,i.jsx)(n.code,{children:"MLFLOW_EXPERIMENT_ID"})," before starting your\napplication to let ",(0,i.jsx)(n.code,{children:"mlflow.init()"})," pick them up automatically:"]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"export MLFLOW_TRACKING_URI=http://localhost:5000\nexport MLFLOW_EXPERIMENT_ID=123456789\n"})}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"mlflow.init();\n"})})]}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import { OpenAI } from "openai";\nimport { tracedOpenAI } from "mlflow-openai";\n\n// Wrap the OpenAI client with the tracedOpenAI function\nconst client = tracedOpenAI(new OpenAI());\n\n// Invoke the client as usual\nconst response = await client.chat.completions.create({\n    model: "o4-mini",\n    messages: [\n        {"role": "system", "content": "You are a helpful weather assistant."},\n        {"role": "user", "content": "What\'s the weather like in Seattle?"},\n    ],\n})\n'})})]})]})}),"\n",(0,i.jsx)(n.h2,{id:"automatic-tracing",children:"Automatic Tracing"}),"\n",(0,i.jsx)(n.p,{children:"MLflow Tracing Typescript SDK currently supports automatic tracing for the following libraries:"}),"\n",(0,i.jsx)(d.AC,{isSmall:!0,children:(0,i.jsx)(d.$3,{link:"/genai/tracing/integrations/listing/openai",children:(0,i.jsx)("span",{children:(0,i.jsx)(n.img,{alt:"OpenAI Logo",src:t(69224).A+"",width:"2200",height:"598"})})})}),"\n",(0,i.jsx)(n.h2,{id:"manual-tracing",children:"Manual Tracing"}),"\n",(0,i.jsxs)(n.h3,{id:"tracing-a-function-with-the-trace-api",children:["Tracing a function with the ",(0,i.jsx)(n.code,{children:"trace"})," API"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"trace"})," API is useful when you want to trace a function."]}),"\n",(0,i.jsxs)(s.A,{children:[(0,i.jsx)(l.A,{value:"function",label:"Named Function",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import * as mlflow from \"mlflow-tracing\";\n\nconst getWeather = async (city: string) => {\n    return `The weather in ${city} is sunny`;\n};\n\n// Wrap the function with mlflow.trace to create a traced function.\nconst tracedGetWeather = mlflow.trace(\n    getWeather,\n    { name: 'get-weather' }\n);\n\n// Invoke the traced function as usual.\nawait tracedGetWeather('San Francisco');\n"})})}),(0,i.jsx)(l.A,{value:"anonymous-function",label:"Anonymous Function",children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"import * as mlflow from \"mlflow-tracing\";\n\nconst getWeather = mlflow.trace(\n    (city: string) => {\n        return `The weather in ${city} is sunny`;\n    },\n    // When wrapping an anonymous function, you need to specify the span name.\n    { name: 'get-weather' }\n);\n\n// Invoke the traced function as usual.\ngetWeather('San Francisco');\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"On the invocation of the traced function, MLflow will automatically create a span that captures:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Input arguments"}),"\n",(0,i.jsx)(n.li,{children:"Return value"}),"\n",(0,i.jsx)(n.li,{children:"Exception information if thrown"}),"\n",(0,i.jsx)(n.li,{children:"Latency"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"capturing-nested-function-calls",children:"Capturing Nested Function Calls"}),"\n",(0,i.jsx)(n.p,{children:"If you trace nested functions, MLflow will generate a trace with multiple spans, where the span structure captures the nested function calls."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:"const sum = mlflow.trace(\n    (a: number, b: number) => {\n        return a + b;\n    },\n    { name: 'sum' }\n);\n\nconst multiply = mlflow.trace(\n    (a: number, b: number) => {\n        return a * b;\n    },\n    { name: 'multiply' }\n);\n\nconst computeArea = mlflow.trace(\n    (a: number, b: number, h: number) => {\n        const sumOfBase = sum(a, b);\n        const area = multiply(sumOfBase, h);\n        return multiply(area, 0.5);\n    },\n    { name: 'compute-area' }\n);\n\ncomputeArea(1, 2, 3);\n"})}),"\n",(0,i.jsx)(n.p,{children:"The trace will look like this:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"- compute-area\n  - sum (a=1, b=2)\n  - multiply (a=3, b=3)\n  - multiply (a=9, b=0.5)\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"tracing-a-class-method-with-the-trace-api",children:["Tracing a class method with the ",(0,i.jsx)(n.code,{children:"@trace"})," API"]}),"\n",(0,i.jsx)(n.p,{children:"TypeScript version 5.0+ supports decorators. MLflow Tracing supports this syntax to trace class methods easily. MLflow will automatically create a span that captures:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Input arguments"}),"\n",(0,i.jsx)(n.li,{children:"Return value"}),"\n",(0,i.jsx)(n.li,{children:"Exception information if thrown"}),"\n",(0,i.jsx)(n.li,{children:"Latency"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import * as mlflow from "mlflow-tracing";\n\nclass MyClass {\n    @mlflow.trace({ spanType: mlflow.SpanType.LLM })\n    generateText(prompt: string) {\n        return "It\'s sunny in Seattle!";\n    }\n}\n\nconst myClass = new MyClass();\nmyClass.generateText("What\'s the weather like in Seattle?");\n'})}),"\n",(0,i.jsxs)(n.h3,{id:"tracing-a-block-of-code-with-the-withspan-api",children:["Tracing a block of code with the ",(0,i.jsx)(n.code,{children:"withSpan"})," API"]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"withSpan"})," API is useful when you want to trace a block of code, not a function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import * as mlflow from "mlflow-tracing";\n\nconst question = "What\'s the weather like in Seattle?";\n\nconst result = await mlflow.withSpan(\n    async (span: mlflow.Span) => {\n        return "It\'s sunny in Seattle!";\n    },\n    // Pass name, span type, and inputs as options.\n    {\n        name: "generateText",\n        spanType: mlflow.SpanType.TOOL,\n        inputs: { prompt: question },\n    }\n);\n'})}),"\n",(0,i.jsx)(n.h3,{id:"create-and-end-a-span-explicitly",children:"Create and End a Span Explicitly"}),"\n",(0,i.jsx)(n.p,{children:"To get more control over the span lifecycle, you can create and end a span explicitly."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typescript",children:'import * as mlflow from "mlflow-tracing";\n\nconst span = mlflow.startSpan({\n    name: "generateText",\n    spanType: mlflow.SpanType.LLM,\n    inputs: { prompt: question },\n});\n\nspan.end({\n    outputs: { answer: "It\'s sunny in Seattle!" },\n    status: \'OK\',\n});\n'})}),"\n",(0,i.jsx)(n.h2,{id:"grouping-traces-by-users-and-sessions",children:"Grouping Traces by Users and Sessions"}),"\n",(0,i.jsxs)(n.p,{children:["Many real-world applications use sessions to maintain multi-turn user interactions. On the other hand, traces are often generated per-request. MLflow supports grouping traces by user sessions to help you understand an end-user's journey and identify issues. Refer to the ",(0,i.jsx)(n.a,{href:"/genai/tracing/track-users-sessions",children:"Track Users & Sessions"})," guide for more details."]}),"\n",(0,i.jsx)(n.h2,{id:"developing-the-typescript-sdk",children:"Developing the TypeScript SDK"}),"\n",(0,i.jsxs)(n.p,{children:["Looking to contribute new integrations or iterate on the workspace? Follow ",(0,i.jsx)(n.a,{href:"/genai/tracing/integrations/contribute#step-5-begin-implementation",children:"Step 5 of the tracing integration guide"})," for detailed instructions on scaffolding packages, running builds, and preparing pull requests."]}),"\n",(0,i.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,i.jsx)(n.h4,{id:"q-i-found-a-feature-in-the-python-sdk-that-is-not-available-in-the-typescript-sdk",children:"Q. I found a feature in the Python SDK that is not available in the Typescript SDK."}),"\n",(0,i.jsxs)(n.p,{children:["The Typescript SDK started later than the Python SDK, so some features are not available yet. Please raise a feature request in ",(0,i.jsx)(n.a,{href:"https://github.com/mlflow/mlflow/issues/new/choose",children:"GitHub"})," to get the attention of the maintainers."]}),"\n",(0,i.jsx)(n.h4,{id:"q-can-i-use-typescript-for-general-mlflow-experiment-tracking-not-only-tracing",children:"Q. Can I use TypeScript for general MLflow experiment tracking, not only tracing?"}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.a,{href:"https://www.npmjs.com/package/mlflow-tracing",children:"mlflow-tracing"})," package only contains tracing functionality and does not include the full experiment tracking experience. However, you can use ",(0,i.jsx)(n.a,{href:"https://github.com/open-source-labs/mlflow-js",children:"mlflow.js"}),", a ",(0,i.jsx)(n.strong,{children:"community-maintained"})," package that provides experiment tracking APIs compatible with Python SDK, built on top of MLflow's REST APIs."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm install mlflow-js\n"})}),"\n",(0,i.jsx)(n.h4,{id:"q-do-i-need-to-install-python-to-use-mlflow-typescript-sdk",children:"Q. Do I need to install Python to use MLflow Typescript SDK?"}),"\n",(0,i.jsx)(n.p,{children:"Your application doesn't need to have Python installed. However, if you want to send traces to the self-hosted MLflow server, your server environment needs to have Python."}),"\n",(0,i.jsxs)(n.p,{children:["Alternatively, you can sign-up for ",(0,i.jsx)(n.a,{href:"https://mlflow.org/#get-started",children:"Managed MLflow"})," for free and send traces to the cloud-hosted MLflow server."]})]})}function x(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(f,{...e})}):f(e)}},65592:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var a=t(34164);const i={tilesGrid:"tilesGrid_hB9N"};var r=t(74848);function s({children:e,className:n}){return(0,r.jsx)("div",{className:(0,a.A)(i.tilesGrid,n),children:e})}},69224:(e,n,t)=>{t.d(n,{A:()=>a});const a=t.p+"assets/images/openai-logo-84ce36fa9f59f4df880cee88c0335586.png"},82238:(e,n,t)=>{t.d(n,{A:()=>r});t(96540);const a={featureHighlights:"featureHighlights_Ardf",highlightItem:"highlightItem_XPnN",highlightIcon:"highlightIcon_SUR8",highlightContent:"highlightContent_d0XP"};var i=t(74848);function r({features:e}){return(0,i.jsx)("div",{className:a.featureHighlights,children:e.map((e,n)=>(0,i.jsxs)("div",{className:a.highlightItem,children:[e.icon&&(0,i.jsx)("div",{className:a.highlightIcon,children:(0,i.jsx)(e.icon,{size:24})}),(0,i.jsxs)("div",{className:a.highlightContent,children:[(0,i.jsx)("h4",{children:e.title}),(0,i.jsx)("p",{children:e.description})]})]},n))})}}}]);