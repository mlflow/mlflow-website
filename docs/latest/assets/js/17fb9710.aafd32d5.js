"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["929"],{62704(e,t,l){l.r(t),l.d(t,{metadata:()=>a,default:()=>h,frontMatter:()=>p,contentTitle:()=>s,toc:()=>c,assets:()=>m});var a=JSON.parse('{"id":"tracing/attach-tags/index","title":"Setting Trace Tags","description":"Tags are mutable key-value pairs that you can attach to traces to add valuable labels and context for grouping and filtering traces. For example, you can tag traces based on the topic of the user\'s input or the type of request being processed and group them together for analysis and quality evaluation.","source":"@site/docs/genai/tracing/attach-tags/index.mdx","sourceDirName":"tracing/attach-tags","slug":"/tracing/attach-tags/","permalink":"/mlflow-website/docs/latest/genai/tracing/attach-tags/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Track Users and Sessions","permalink":"/mlflow-website/docs/latest/genai/tracing/track-users-sessions/"},"next":{"title":"Collect User Feedback","permalink":"/mlflow-website/docs/latest/genai/tracing/collect-user-feedback/"}}'),n=l(74848),r=l(28453),o=l(54725),i=l(66497);let p={},s="Setting Trace Tags",m={},c=[{value:"Setting Tags via the MLflow UI",id:"setting-tags-via-the-mlflow-ui",level:2},{value:"Setting Tags on Ongoing Traces",id:"setting-tags-on-ongoing-traces",level:2},{value:"Setting Tags on Completed Traces",id:"setting-tags-on-completed-traces",level:2},{value:"Retrieving Tags",id:"retrieving-tags",level:2},{value:"Searching and Filtering with Tags",id:"searching-and-filtering-with-tags",level:2}];function f(e){let t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.header,{children:(0,n.jsx)(t.h1,{id:"setting-trace-tags",children:"Setting Trace Tags"})}),"\n",(0,n.jsx)(t.p,{children:"Tags are mutable key-value pairs that you can attach to traces to add valuable labels and context for grouping and filtering traces. For example, you can tag traces based on the topic of the user's input or the type of request being processed and group them together for analysis and quality evaluation."}),"\n",(0,n.jsx)(t.h2,{id:"setting-tags-via-the-mlflow-ui",children:"Setting Tags via the MLflow UI"}),"\n",(0,n.jsx)("video",{src:(0,i.default)("/images/llms/tracing/trace-set-tag.mp4"),controls:!0,loop:!0,autoPlay:!0,muted:!0,"aria-label":"Traces tag update"}),"\n",(0,n.jsx)(t.h2,{id:"setting-tags-on-ongoing-traces",children:"Setting Tags on Ongoing Traces"}),"\n",(0,n.jsxs)(t.p,{children:["Use ",(0,n.jsx)(o.B,{fn:"mlflow.update_current_trace"})," to add tags during trace execution."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'import mlflow\n\n\n@mlflow.trace\ndef my_func(x):\n    mlflow.update_current_trace(tags={"fruit": "apple"})\n    return x + 1\n\n\nresult = my_func(5)\n'})}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["If the key is already present, the ",(0,n.jsx)(o.B,{fn:"mlflow.update_current_trace"})," function will update the key with the new value."]})}),"\n",(0,n.jsx)(t.h2,{id:"setting-tags-on-completed-traces",children:"Setting Tags on Completed Traces"}),"\n",(0,n.jsx)(t.p,{children:"Add or modify tags on traces that have already been completed and logged."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:'import mlflow\n\nmlflow.set_trace_tag(trace_id="your-trace-id", key="tag_key", value="tag_value")\n'})}),"\n",(0,n.jsx)(t.h2,{id:"retrieving-tags",children:"Retrieving Tags"}),"\n",(0,n.jsxs)(t.p,{children:["Tags are stored on the ",(0,n.jsx)(t.code,{children:"info.tags"})," attribute of the trace object."]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"import mlflow\n\ntrace = mlflow.get_trace(trace_id=\"your-trace-id\")\nprint(trace.info.tags)\n# Output: {'tag_key': 'tag_value'}\n"})}),"\n",(0,n.jsx)(t.h2,{id:"searching-and-filtering-with-tags",children:"Searching and Filtering with Tags"}),"\n",(0,n.jsx)(t.p,{children:"Use tags to find specific traces quickly and efficiently."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"# Search for traces with tag 'environment' set to 'production'\ntraces = mlflow.search_traces(filter_string=\"tags.environment = 'production'\")\n"})}),"\n",(0,n.jsx)(t.p,{children:"You can also use pattern matching to find traces by tag value."}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-python",children:"# Search for traces with tag that contains the word 'mlflow'\ntraces = mlflow.search_traces(filter_string=\"tags.topic LIKE '%mlflow%'\")\n"})}),"\n",(0,n.jsxs)(t.p,{children:["View the full list of supported filter syntax in the ",(0,n.jsx)(t.a,{href:"/genai/tracing/search-traces",children:"Search Traces"})," guide."]})]})}function h(e={}){let{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(f,{...e})}):f(e)}},54725(e,t,l){l.d(t,{B:()=>o});var a=l(74848);l(96540);var n=JSON.parse('{"mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.agno":"api_reference/python_api/mlflow.agno.html","mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.genai":"api_reference/python_api/mlflow.genai.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pydantic_ai":"api_reference/python_api/mlflow.pydantic_ai.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.smolagents":"api_reference/python_api/mlflow.smolagents.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.webhooks":"api_reference/python_api/mlflow.webhooks.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html","mlflow.server.cli":"api_reference/cli.html","mlflow.r":"api_reference/R-api.html","mlflow.java":"api_reference/java_api/index.html","mlflow.python":"api_reference/python_api/index.html","mlflow.rest":"api_reference/rest-api.html","mlflow.typescript":"api_reference/typescript_api/index.html","mlflow.llms.deployments.api":"api_reference/llms/deployments/api.html"}'),r=l(66497);function o({fn:e,children:t,hash:l}){let o=(e=>{let t=e.split(".");for(let e=t.length;e>0;e--){let l=t.slice(0,e).join(".");if(n[l])return l}return null})(e);if(!o)return(0,a.jsx)(a.Fragment,{children:t});let i=(0,r.default)(`/${n[o]}#${l??e}`);return(0,a.jsx)("a",{href:i,target:"_blank",children:t??(0,a.jsxs)("code",{children:[e,"()"]})})}},28453(e,t,l){l.d(t,{R:()=>o,x:()=>i});var a=l(96540);let n={},r=a.createContext(n);function o(e){let t=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:o(e.components),a.createElement(r.Provider,{value:t},e.children)}}}]);