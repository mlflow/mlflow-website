"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["1198"],{87152(e,i,a){a.r(i),a.d(i,{metadata:()=>t,default:()=>f,frontMatter:()=>l,contentTitle:()=>o,toc:()=>c,assets:()=>s});var t=JSON.parse('{"id":"governance/ai-gateway/traffic-routing-fallbacks","title":"Traffic Routing & Fallbacks","description":"Beyond basic endpoint configuration, MLflow AI Gateway supports advanced routing features that enable traffic splitting for A/B testing and automatic fallbacks for high availability.","source":"@site/docs/genai/governance/ai-gateway/traffic-routing-fallbacks.mdx","sourceDirName":"governance/ai-gateway","slug":"/governance/ai-gateway/traffic-routing-fallbacks","permalink":"/mlflow-website/docs/latest/genai/governance/ai-gateway/traffic-routing-fallbacks","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Traffic Routing & Fallbacks"},"sidebar":"genAISidebar","previous":{"title":"Model Providers","permalink":"/mlflow-website/docs/latest/genai/governance/ai-gateway/endpoints/model-providers"},"next":{"title":"Gateway Server (Legacy)","permalink":"/mlflow-website/docs/latest/genai/governance/ai-gateway/legacy/"}}'),n=a(74848),r=a(28453);let l={title:"Traffic Routing & Fallbacks"},o="Traffic Routing & Fallbacks",s={},c=[{value:"Traffic Splitting (Load Balancing)",id:"traffic-splitting-load-balancing",level:2},{value:"Fallback Configuration",id:"fallback-configuration",level:2}];function d(e){let i={h1:"h1",h2:"h2",header:"header",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.header,{children:(0,n.jsx)(i.h1,{id:"traffic-routing--fallbacks",children:"Traffic Routing & Fallbacks"})}),"\n",(0,n.jsx)(i.p,{children:"Beyond basic endpoint configuration, MLflow AI Gateway supports advanced routing features that enable traffic splitting for A/B testing and automatic fallbacks for high availability."}),"\n",(0,n.jsx)(i.h2,{id:"traffic-splitting-load-balancing",children:"Traffic Splitting (Load Balancing)"}),"\n",(0,n.jsx)(i.p,{children:"Traffic splitting lets you distribute requests across multiple models based on percentage weights. This capability supports several important use cases:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"A/B testing"}),": Compare performance between different models"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Gradual migration"}),": Shift traffic incrementally without disrupting service"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Load distribution"}),": Balance requests across multiple providers for reliability"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Traffic Split Configuration",src:a(79690).A+"",width:"2862",height:"1668"})}),"\n",(0,n.jsx)(i.p,{children:"To configure traffic splitting, open your endpoint's details page and locate the Priority 1 (Traffic Split) section. Click Add Model to include additional models in your traffic split configuration. For each model, select the provider and specific model you want to use, then configure the API key by either creating a new one or selecting from existing keys."}),"\n",(0,n.jsx)(i.p,{children:"The critical part of traffic splitting is setting the weight percentage for each model. Weights range from 1% to 100%, and the system requires that all weights sum to exactly 100%. The interface displays the current total in green when valid, turning red if the weights don't sum correctly. This validation ensures your configuration will work as expected before you save it."}),"\n",(0,n.jsx)(i.p,{children:"For example, you might configure 50% of traffic to route to OpenAI GPT-5 and 50% to Anthropic Claude 4.5 Sonnet. This split lets you gradually evaluate Claude's performance on a subset of real traffic before committing to a larger migration."}),"\n",(0,n.jsx)(i.h2,{id:"fallback-configuration",children:"Fallback Configuration"}),"\n",(0,n.jsx)(i.p,{children:"Fallback models provide automatic recovery when primary models encounter errors or rate limits. The gateway tries fallback models sequentially until one succeeds, ensuring your application remains operational even when individual providers experience issues."}),"\n",(0,n.jsx)(i.p,{children:"Fallback configuration supports several scenarios:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"High availability"}),": Failover to alternative providers during outages"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Cost optimization"}),": Use cheaper models as fallbacks when expensive models hit rate limits"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.strong,{children:"Regional failover"}),": Route to providers in different geographic regions"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"Fallback Configuration",src:a(86860).A+"",width:"2862",height:"1668"})}),"\n",(0,n.jsx)(i.p,{children:"To configure fallbacks, navigate to the Priority 2 (Fallback) section in your endpoint details page. Click Add Fallback Model to begin adding fallback options. For each fallback, select your provider and model, then configure the appropriate API key."}),"\n",(0,n.jsx)(i.p,{children:"The order of fallback models matters, as the gateway tries them sequentially from top to bottom. Use the drag handle icon to reorder your fallbacks, placing your preferred alternatives first and less desirable options toward the end of the list."}),"\n",(0,n.jsx)(i.p,{children:"Consider a production configuration where you have GPT-5 mini as the first fallback and Anthropic Claude 4.5 Haiku as the second fallback. If the primary model fails, the gateway falls back first to OpenAI GPT-5 mini, which is cheaper and faster but less capable. If that also fails, a second fallback to Anthropic Claude 4.5 Haiku provides another alternative before the request fails entirely."})]})}function f(e={}){let{wrapper:i}={...(0,r.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},86860(e,i,a){a.d(i,{A:()=>t});let t=a.p+"assets/images/fallback-configuration-f2d5311914e47c38a91741bb77fe844e.png"},79690(e,i,a){a.d(i,{A:()=>t});let t=a.p+"assets/images/traffic-split-configuration-588d97ccb4ee1a6b2916897cade34f0f.png"},28453(e,i,a){a.d(i,{R:()=>l,x:()=>o});var t=a(96540);let n={},r=t.createContext(n);function l(e){let i=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:l(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);