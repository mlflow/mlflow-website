/*! For license information please see 8f8de985.4712bb34.js.LICENSE.txt */
"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5618],{6789:(e,t,a)=>{a.d(t,{A:()=>c});a(96540);var n=a(28774),i=a(34164);const s={tileCard:"tileCard_NHsj",tileIcon:"tileIcon_pyoR",tileLink:"tileLink_iUbu",tileImage:"tileImage_O4So"};var r=a(86025),l=a(15626),o=a(74848);function c({icon:e,image:t,imageDark:a,imageWidth:c,imageHeight:d,iconSize:u=32,containerHeight:h,title:m,description:p,href:x,linkText:g="Learn more \u2192",className:f}){if(!e&&!t)throw new Error("TileCard requires either an icon or image prop");const v=h?{height:`${h}px`}:{},j={};return c&&(j.width=`${c}px`),d&&(j.height=`${d}px`),(0,o.jsxs)(n.A,{href:x,className:(0,i.A)(s.tileCard,f),children:[(0,o.jsx)("div",{className:s.tileIcon,style:v,children:e?(0,o.jsx)(e,{size:u}):a?(0,o.jsx)(l.A,{sources:{light:(0,r.default)(t),dark:(0,r.default)(a)},alt:m,className:s.tileImage,style:j}):(0,o.jsx)("img",{src:(0,r.default)(t),alt:m,className:s.tileImage,style:j})}),(0,o.jsx)("h3",{children:m}),(0,o.jsx)("p",{children:p}),(0,o.jsx)("div",{className:s.tileLink,children:g})]})}},10493:(e,t,a)=>{a.d(t,{Zp:()=>o,AC:()=>l,WO:()=>d,_C:()=>c,$3:()=>u,jK:()=>h});var n=a(34164);const i={CardGroup:"CardGroup_P84T",NoGap:"NoGap_O9Dj",MaxThreeColumns:"MaxThreeColumns_FO1r",AutofillColumns:"AutofillColumns_fKhQ",Card:"Card_aSCR",CardBordered:"CardBordered_glGF",CardBody:"CardBody_BhRs",TextColor:"TextColor_a8Tp",BoxRoot:"BoxRoot_Etgr",FlexWrapNowrap:"FlexWrapNowrap_f60k",FlexJustifyContentFlexStart:"FlexJustifyContentFlexStart_ZYv5",FlexDirectionRow:"FlexDirectionRow_T2qL",FlexAlignItemsCenter:"FlexAlignItemsCenter_EHVM",FlexFlex:"FlexFlex__JTE",Link:"Link_fVkl",MarginLeft4:"MarginLeft4_YQSJ",MarginTop4:"MarginTop4_jXKN",PaddingBottom4:"PaddingBottom4_O9gt",LogoCardContent:"LogoCardContent_kCQm",LogoCardImage:"LogoCardImage_JdcX",SmallLogoCardContent:"SmallLogoCardContent_LxhV",SmallLogoCardRounded:"SmallLogoCardRounded_X50_",SmallLogoCardImage:"SmallLogoCardImage_tPZl",NewFeatureCardContent:"NewFeatureCardContent_Rq3d",NewFeatureCardHeading:"NewFeatureCardHeading_f6q3",NewFeatureCardHeadingSeparator:"NewFeatureCardHeadingSeparator_pSx8",NewFeatureCardTags:"NewFeatureCardTags_IFHO",NewFeatureCardWrapper:"NewFeatureCardWrapper_NQ0k",TitleCardContent:"TitleCardContent_l9MQ",TitleCardHeader:"TitleCardHeader_fUQy",TitleCardHeaderRight:"TitleCardHeaderRight_iBLX",TitleCardTitle:"TitleCardTitle__K8J",TitleCardSeparator:"TitleCardSeparator_IN2E",Cols1:"Cols1_Gr2U",Cols2:"Cols2_sRvc",Cols3:"Cols3_KjUS",Cols4:"Cols4_dKOj",Cols5:"Cols5_jDmj",Cols6:"Cols6_Q0OR"};var s=a(28774),r=a(74848);const l=({children:e,isSmall:t,cols:a,noGap:s})=>(0,r.jsx)("div",{className:(0,n.A)(i.CardGroup,t?i.AutofillColumns:a?i[`Cols${a}`]:i.MaxThreeColumns,s&&i.NoGap),children:e}),o=({children:e,link:t="",style:a})=>t?(0,r.jsx)(s.A,{className:(0,n.A)(i.Link,i.Card,i.CardBordered),style:a,to:t,children:e}):(0,r.jsx)("div",{className:(0,n.A)(i.Card,i.CardBordered),style:a,children:e}),c=({headerText:e,link:t,text:a})=>(0,r.jsx)(o,{link:t,children:(0,r.jsxs)("span",{children:[(0,r.jsx)("div",{className:(0,n.A)(i.CardTitle,i.BoxRoot,i.PaddingBottom4),style:{pointerEvents:"none"},children:(0,r.jsx)("div",{className:(0,n.A)(i.BoxRoot,i.FlexFlex,i.FlexAlignItemsCenter,i.FlexDirectionRow,i.FlexJustifyContentFlexStart,i.FlexWrapNowrap),style:{marginLeft:"-4px",marginTop:"-4px"},children:(0,r.jsx)("div",{className:(0,n.A)(i.BoxRoot,i.BoxHideIfEmpty,i.MarginTop4,i.MarginLeft4),style:{pointerEvents:"auto"},children:(0,r.jsx)("span",{className:"",children:e})})})}),(0,r.jsx)("span",{className:(0,n.A)(i.TextColor,i.CardBody),children:(0,r.jsx)("p",{children:a})})]})}),d=({description:e,children:t,link:a})=>(0,r.jsx)(o,{link:a,children:(0,r.jsxs)("div",{className:i.LogoCardContent,children:[(0,r.jsx)("div",{className:i.LogoCardImage,children:t}),(0,r.jsx)("p",{className:i.TextColor,children:e})]})}),u=({children:e,link:t})=>(0,r.jsx)(s.A,{className:(0,n.A)(i.Card,i.CardBordered,i.SmallLogoCardRounded),to:t,children:(0,r.jsx)("div",{className:i.SmallLogoCardContent,children:(0,r.jsx)("div",{className:(0,n.A)("max-height-img-container",i.SmallLogoCardImage),children:e})})}),h=({title:e,description:t,link:a="",headerRight:s,children:l})=>(0,r.jsx)(o,{link:a,children:(0,r.jsxs)("div",{className:i.TitleCardContent,children:[(0,r.jsxs)("div",{className:(0,n.A)(i.TitleCardHeader),children:[(0,r.jsx)("div",{className:(0,n.A)(i.TitleCardTitle),style:{textAlign:"left",fontWeight:"bold"},children:e}),(0,r.jsx)("div",{className:i.TitleCardHeaderRight,children:s})]}),(0,r.jsx)("hr",{className:(0,n.A)(i.TitleCardSeparator),style:{margin:"12px 0"}}),l?(0,r.jsx)("div",{className:(0,n.A)(i.TextColor),children:l}):(0,r.jsx)("p",{className:(0,n.A)(i.TextColor),dangerouslySetInnerHTML:{__html:t}})]})})},11470:(e,t,a)=>{a.d(t,{A:()=>y});var n=a(96540),i=a(34164),s=a(17559),r=a(23104),l=a(56347),o=a(205),c=a(57485),d=a(31682),u=a(70679);function h(e){return n.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,n.isValidElement)(e)&&function(e){const{props:t}=e;return!!t&&"object"==typeof t&&"value"in t}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function m(e){const{values:t,children:a}=e;return(0,n.useMemo)(()=>{const e=t??function(e){return h(e).map(({props:{value:e,label:t,attributes:a,default:n}})=>({value:e,label:t,attributes:a,default:n}))}(a);return function(e){const t=(0,d.XI)(e,(e,t)=>e.value===t.value);if(t.length>0)throw new Error(`Docusaurus error: Duplicate values "${t.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[t,a])}function p({value:e,tabValues:t}){return t.some(t=>t.value===e)}function x({queryString:e=!1,groupId:t}){const a=(0,l.W6)(),i=function({queryString:e=!1,groupId:t}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:e,groupId:t});return[(0,c.aZ)(i),(0,n.useCallback)(e=>{if(!i)return;const t=new URLSearchParams(a.location.search);t.set(i,e),a.replace({...a.location,search:t.toString()})},[i,a])]}function g(e){const{defaultValue:t,queryString:a=!1,groupId:i}=e,s=m(e),[r,l]=(0,n.useState)(()=>function({defaultValue:e,tabValues:t}){if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${t.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=t.find(e=>e.default)??t[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:t,tabValues:s})),[c,d]=x({queryString:a,groupId:i}),[h,g]=function({groupId:e}){const t=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,i]=(0,u.Dv)(t);return[a,(0,n.useCallback)(e=>{t&&i.set(e)},[t,i])]}({groupId:i}),f=(()=>{const e=c??h;return p({value:e,tabValues:s})?e:null})();(0,o.A)(()=>{f&&l(f)},[f]);return{selectedValue:r,selectValue:(0,n.useCallback)(e=>{if(!p({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),g(e)},[d,g,s]),tabValues:s}}var f=a(92303);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=a(74848);function w({className:e,block:t,selectedValue:a,selectValue:n,tabValues:s}){const l=[],{blockElementScrollPositionUntilNextRender:o}=(0,r.a_)(),c=e=>{const t=e.currentTarget,i=l.indexOf(t),r=s[i].value;r!==a&&(o(t),n(r))},d=e=>{let t=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=l.indexOf(e.currentTarget)+1;t=l[a]??l[0];break}case"ArrowLeft":{const a=l.indexOf(e.currentTarget)-1;t=l[a]??l[l.length-1];break}}t?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},e),children:s.map(({value:e,label:t,attributes:n})=>(0,j.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{l.push(e)},onKeyDown:d,onClick:c,...n,className:(0,i.A)("tabs__item",v.tabItem,n?.className,{"tabs__item--active":a===e}),children:t??e},e))})}function b({lazy:e,children:t,selectedValue:a}){const s=(Array.isArray(t)?t:[t]).filter(Boolean);if(e){const e=s.find(e=>e.props.value===a);return e?(0,n.cloneElement)(e,{className:(0,i.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:s.map((e,t)=>(0,n.cloneElement)(e,{key:t,hidden:e.props.value!==a}))})}function C(e){const t=g(e);return(0,j.jsxs)("div",{className:(0,i.A)(s.G.tabs.container,"tabs-container",v.tabList),children:[(0,j.jsx)(w,{...t,...e}),(0,j.jsx)(b,{...t,...e})]})}function y(e){const t=(0,f.A)();return(0,j.jsx)(C,{...e,children:h(e.children)},String(t))}},19365:(e,t,a)=>{a.d(t,{A:()=>r});a(96540);var n=a(34164);const i={tabItem:"tabItem_Ymn6"};var s=a(74848);function r({children:e,hidden:t,className:a}){return(0,s.jsx)("div",{role:"tabpanel",className:(0,n.A)(i.tabItem,a),hidden:t,children:e})}},20602:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/genai-trace-evaluation-5b5e6ba86f0f0f06ee27db356e4e59e4.png"},28453:(e,t,a)=>{a.d(t,{R:()=>r,x:()=>l});var n=a(96540);const i={},s=n.createContext(i);function r(e){const t=n.useContext(s);return n.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function l(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),n.createElement(s.Provider,{value:t},e.children)}},43975:(e,t,a)=>{a.d(t,{A:()=>n});const n=(0,a(84722).A)("scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]])},47020:(e,t,a)=>{a.d(t,{A:()=>s});a(96540);const n={wrapper:"wrapper_sf5q"};var i=a(74848);function s({children:e}){return(0,i.jsx)("div",{className:n.wrapper,children:e})}},61100:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/genai-evaluation-compare-e16ede1d0aa60604dd3eb43ecda3d631.png"},65592:(e,t,a)=>{a.d(t,{A:()=>r});a(96540);var n=a(34164);const i={tilesGrid:"tilesGrid_hB9N"};var s=a(74848);function r({children:e,className:t}){return(0,s.jsx)("div",{className:(0,n.A)(i.tilesGrid,t),children:e})}},66927:(e,t,a)=>{a.d(t,{A:()=>r});a(96540);const n={container:"container_JwLF",imageWrapper:"imageWrapper_RfGN",image:"image_bwOA",caption:"caption_jo2G"};var i=a(86025),s=a(74848);function r({src:e,alt:t,width:a,caption:r,className:l}){return(0,s.jsxs)("div",{className:`${n.container} ${l||""}`,children:[(0,s.jsx)("div",{className:n.imageWrapper,style:a?{width:a}:{},children:(0,s.jsx)("img",{src:(0,i.default)(e),alt:t,className:n.image})}),r&&(0,s.jsx)("p",{className:n.caption,children:r})]})}},79826:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>g,contentTitle:()=>x,default:()=>j,frontMatter:()=>p,metadata:()=>n,toc:()=>f});const n=JSON.parse('{"id":"eval-monitor/index","title":"Evaluating LLMs/Agents with MLflow","description":"This documentation covers MLflow\'s GenAI evaluation system which uses:","source":"@site/docs/genai/eval-monitor/index.mdx","sourceDirName":"eval-monitor","slug":"/eval-monitor/","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Tracing FAQ","permalink":"/mlflow-website/docs/latest/genai/tracing/faq"},"next":{"title":"Quickstart","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/quickstart"}}');var i=a(74848),s=a(28453),r=a(11470),l=a(19365),o=(a(10493),a(82238),a(66927)),c=a(47020),d=a(65592),u=a(6789),h=a(99653),m=a(43975);const p={},x="Evaluating LLMs/Agents with MLflow",g={},f=[{value:"Key Capabilities",id:"key-capabilities",level:2},{value:"Create and maintain a High-Quality Dataset",id:"create-and-maintain-a-high-quality-dataset",level:4},{value:"Track Annotation and Human Feedbacks",id:"track-annotation-and-human-feedbacks",level:4},{value:"Scale Quality Assessment with Automation",id:"scale-quality-assessment-with-automation",level:4},{value:"Evaluate and Enhance quality",id:"evaluate-and-enhance-quality",level:4},{value:"Monitor Applications in Production",id:"monitor-applications-in-production",level:4},{value:"Running an Evaluation",id:"running-an-evaluation",level:2},{value:"Review the results",id:"review-the-results",level:2},{value:"Next Steps",id:"next-steps",level:2}];function v(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h4:"h4",header:"header",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"evaluating-llmsagents-with-mlflow",children:"Evaluating LLMs/Agents with MLflow"})}),"\n",(0,i.jsxs)(t.admonition,{title:"Modern GenAI Evaluation",type:"info",children:[(0,i.jsxs)(t.p,{children:["This documentation covers MLflow's ",(0,i.jsx)(t.strong,{children:"GenAI evaluation system"})," which uses:"]}),(0,i.jsxs)(t.ul,{children:["\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"mlflow.genai.evaluate()"})," for evaluation"]}),"\n",(0,i.jsxs)(t.li,{children:[(0,i.jsx)(t.code,{children:"Scorer"})," objects for metrics"]}),"\n",(0,i.jsx)(t.li,{children:"Built-in and custom LLM judges"}),"\n"]}),(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"Note"}),": This system is separate from the ",(0,i.jsx)(t.a,{href:"/ml/evaluation",children:"classic ML evaluation"})," system that uses ",(0,i.jsx)(t.code,{children:"mlflow.evaluate()"})," and ",(0,i.jsx)(t.code,{children:"EvaluationMetric"}),". The two systems serve different purposes and are not interoperable."]})]}),"\n",(0,i.jsx)(t.p,{children:"MLflow's evaluation and monitoring capabilities help you systematically measure, improve, and maintain the quality of your GenAI applications throughout their lifecycle from development through production."}),"\n",(0,i.jsx)(o.A,{src:"/images/mlflow-3/eval-monitor/evaluation-result-video.gif",alt:"Prompt Evaluation"}),"\n",(0,i.jsxs)(t.p,{children:["A core tenet of MLflow's evaluation capabilities is ",(0,i.jsx)(t.strong,{children:"Evaluation-Driven Development"}),". This is an emerging practice to tackle the challenge of building high-quality LLM/Agentic applications. MLflow is an ",(0,i.jsx)(t.strong,{children:"end-to-end"})," platform that is designed to support this practice and help you deploy AI applications with confidence."]}),"\n",(0,i.jsx)(o.A,{src:"/images/mlflow-3/eval-monitor/evaluation-driven-development.png",alt:"Evaluation Driven Development",width:"90%"}),"\n",(0,i.jsx)(t.h2,{id:"key-capabilities",children:"Key Capabilities"}),"\n",(0,i.jsx)(c.A,{children:(0,i.jsxs)(r.A,{children:[(0,i.jsx)(l.A,{value:"dataset",label:"Dataset Management",children:(0,i.jsx)("div",{class:"flex-column",children:(0,i.jsxs)("div",{class:"flex-row",children:[(0,i.jsxs)("div",{class:"flex-item",children:[(0,i.jsx)(t.h4,{id:"create-and-maintain-a-high-quality-dataset",children:"Create and maintain a High-Quality Dataset"}),(0,i.jsxs)(t.p,{children:["Before you can evaluate your GenAI application, you need test data. ",(0,i.jsx)(t.strong,{children:"Evaluation Datasets"})," provide a centralized repository for managing test cases, ground truth expectations, and evaluation data at scale."]}),(0,i.jsx)(t.p,{children:'Think of Evaluation Datasets as your "test database" - a single source of truth for all the data needed to evaluate your AI systems. They transform ad-hoc testing into systematic quality assurance.'}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/genai/datasets",children:"Learn more \u2192"})})]}),(0,i.jsx)("div",{class:"flex-item padding-md",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Dataset",src:a(99166).A+"",width:"1200",height:"800"})})})]})})}),(0,i.jsx)(l.A,{value:"feedback",label:"Human Feedback",children:(0,i.jsx)("div",{class:"flex-column",children:(0,i.jsxs)("div",{class:"flex-row",children:[(0,i.jsxs)("div",{class:"flex-item",children:[(0,i.jsx)(t.h4,{id:"track-annotation-and-human-feedbacks",children:"Track Annotation and Human Feedbacks"}),(0,i.jsx)(t.p,{children:"Human feedback is essential for building high-quality GenAI applications that meet user expectations. MLflow supports collecting, managing, and utilizing feedback from end-users and domain experts."}),(0,i.jsx)(t.p,{children:"Feedbacks are attached to traces and recorded with metadata, including user, timestamp, revisions, etc."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/genai/tracing/collect-user-feedback",children:"Learn more \u2192"})})]}),(0,i.jsx)("div",{class:"flex-item padding-md",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Feedback",src:a(91221).A+"",width:"1200",height:"800"})})})]})})}),(0,i.jsx)(l.A,{value:"llm-judge",label:"LLM-as-a-Judge",children:(0,i.jsx)("div",{class:"flex-column",children:(0,i.jsxs)("div",{class:"flex-row",children:[(0,i.jsxs)("div",{class:"flex-item",children:[(0,i.jsx)(t.h4,{id:"scale-quality-assessment-with-automation",children:"Scale Quality Assessment with Automation"}),(0,i.jsx)(t.p,{children:"Quality assessment is a critical part of building high-quality GenAI applications, however, it is often time-consuming and requires human expertise. LLMs are powerful tools to automate quality assessment."}),(0,i.jsx)(t.p,{children:"MLflow offers various built-in LLM-as-a-Judge scorers to help automate the process, as well as a flexible toolset to build your own LLM judges with ease."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/genai/eval-monitor",children:"Learn more \u2192"})})]}),(0,i.jsx)("div",{class:"flex-item padding-md",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Evaluation",src:a(20602).A+"",width:"2012",height:"1344"})})})]})})}),(0,i.jsx)(l.A,{value:"evaluation",label:"Systematic Evaluation",children:(0,i.jsx)("div",{class:"flex-column",children:(0,i.jsxs)("div",{class:"flex-row",children:[(0,i.jsxs)("div",{class:"flex-item",children:[(0,i.jsx)(t.h4,{id:"evaluate-and-enhance-quality",children:"Evaluate and Enhance quality"}),(0,i.jsx)(t.p,{children:"Systematically assessing and improving the quality of GenAI applications is a challenge. MLflow provides a comprehensive set of tools to help you evaluate and enhance the quality of your applications."}),(0,i.jsx)(t.p,{children:"Being the industry's most-trusted experiment tracking platform, MLflow provides a strong foundation for tracking your evaluation results and effectively collaborating with your team."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/genai/eval-monitor/quickstart",children:"Learn more \u2192"})})]}),(0,i.jsx)("div",{class:"flex-item padding-md",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Trace Evaluation",src:a(61100).A+"",width:"1200",height:"800"})})})]})})}),(0,i.jsx)(l.A,{value:"production-monitoring",label:"Production Monitoring",children:(0,i.jsx)("div",{class:"flex-column",children:(0,i.jsxs)("div",{class:"flex-row",children:[(0,i.jsxs)("div",{class:"flex-item",children:[(0,i.jsx)(t.h4,{id:"monitor-applications-in-production",children:"Monitor Applications in Production"}),(0,i.jsx)(t.p,{children:"Understanding and optimizing GenAI application performance is crucial for efficient operations. MLflow Tracing captures key metrics like latency and token usage at each step, as well as various quality metrics, helping you identify bottlenecks, monitor efficiency, and find optimization opportunities."}),(0,i.jsx)(t.p,{children:(0,i.jsx)(t.a,{href:"/genai/tracing/prod-tracing",children:"Learn more \u2192"})})]}),(0,i.jsx)("div",{class:"flex-item padding-md",children:(0,i.jsx)(t.p,{children:(0,i.jsx)(t.img,{alt:"Monitoring",src:a(81550).A+"",width:"1200",height:"800"})})})]})})})]})}),"\n",(0,i.jsx)(t.h2,{id:"running-an-evaluation",children:"Running an Evaluation"}),"\n",(0,i.jsx)(t.p,{children:"Each evaluation is defined by three components:"}),"\n",(0,i.jsxs)("table",{style:{width:"100%"},children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{style:{width:"30%"},children:"Component"}),(0,i.jsx)("th",{style:{width:"70%"},children:"Example"})]})}),(0,i.jsxs)("tbody",{children:[(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("strong",{children:"Dataset"}),(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"Inputs & expectations (and optionally pre-generated outputs and traces)"})]}),(0,i.jsx)("td",{children:(0,i.jsx)("pre",{children:(0,i.jsxs)("code",{children:["[",(0,i.jsx)("br",{}),'  {"inputs": {"question": "2+2"}, "expectations": {"answer": "4"}},',(0,i.jsx)("br",{}),'  {"inputs": {"question": "2+3"}, "expectations": {"answer": "5"}}',(0,i.jsx)("br",{}),"]"]})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("strong",{children:"Scorer"}),(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"Evaluation criteria"})]}),(0,i.jsx)("td",{children:(0,i.jsx)("pre",{children:(0,i.jsxs)("code",{children:["@scorer",(0,i.jsx)("br",{}),"def exact_match(expectations, outputs):",(0,i.jsx)("br",{}),"    return expectations == outputs"]})})})]}),(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[(0,i.jsx)("strong",{children:"Predict Function"}),(0,i.jsx)("br",{}),(0,i.jsx)("small",{children:"Generates outputs for the dataset"})]}),(0,i.jsx)("td",{children:(0,i.jsx)("pre",{children:(0,i.jsxs)("code",{children:["def predict_fn(question: str) -> str:",(0,i.jsx)("br",{}),"    response = client.chat.completions.create(",(0,i.jsx)("br",{}),'        model="gpt-4o-mini",',(0,i.jsx)("br",{}),'        messages=[{"role": "user", "content": question}]',(0,i.jsx)("br",{}),"    )",(0,i.jsx)("br",{}),"    return response.choices[0].message.content"]})})})]})]})]}),"\n",(0,i.jsx)(t.p,{children:"The following example shows a simple evaluation of a dataset of questions and expected answers."}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-python",children:'import os\nimport openai\nimport mlflow\nfrom mlflow.genai.scorers import Correctness, Guidelines\n\nclient = openai.OpenAI(api_key=os.getenv("OPENAI_API_KEY"))\n\n# 1. Define a simple QA dataset\ndataset = [\n    {\n        "inputs": {"question": "Can MLflow manage prompts?"},\n        "expectations": {"expected_response": "Yes!"},\n    },\n    {\n        "inputs": {"question": "Can MLflow create a taco for my lunch?"},\n        "expectations": {\n            "expected_response": "No, unfortunately, MLflow is not a taco maker."\n        },\n    },\n]\n\n\n# 2. Define a prediction function to generate responses\ndef predict_fn(question: str) -> str:\n    response = client.chat.completions.create(\n        model="gpt-4o-mini", messages=[{"role": "user", "content": question}]\n    )\n    return response.choices[0].message.content\n\n\n# 3.Run the evaluation\nresults = mlflow.genai.evaluate(\n    data=dataset,\n    predict_fn=predict_fn,\n    scorers=[\n        # Built-in LLM judge\n        Correctness(),\n        # Custom criteria using LLM judge\n        Guidelines(name="is_english", guidelines="The answer must be in English"),\n    ],\n)\n'})}),"\n",(0,i.jsx)(t.h2,{id:"review-the-results",children:"Review the results"}),"\n",(0,i.jsx)(t.p,{children:"Open the MLflow UI to review the evaluation results. If you are using OSS MLflow, you can use the following command to start the UI:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-bash",children:"mlflow ui --port 5000\n"})}),"\n",(0,i.jsx)(t.p,{children:'If you are using cloud-based MLflow, open the experiment page in the platform. You should see a new evaluation run is created under the "Runs" tab. Click on the run name to view the evaluation results.'}),"\n",(0,i.jsx)(o.A,{src:"/images/mlflow-3/eval-monitor/quickstart-eval-hero.png",alt:"Evaluation Results"}),"\n",(0,i.jsx)(t.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,i.jsxs)(d.A,{children:[(0,i.jsx)(u.A,{icon:h.A,iconSize:48,title:"Quickstart",description:"Learn MLflow's evaluation workflow in action.",href:"/genai/eval-monitor/quickstart",linkText:"Start evaluating \u2192",containerHeight:64}),(0,i.jsx)(u.A,{icon:m.A,iconSize:48,title:"Evaluate Agents",description:"Evaluate AI agents with specialized techniques and custom scorers.",href:"/genai/eval-monitor/running-evaluation/agents",linkText:"Evaluate agents \u2192",containerHeight:64}),(0,i.jsx)(u.A,{icon:m.A,iconSize:48,title:"Building Scorers",description:"Get started with MLflow's powerful scorers for evaluating qualities.",href:"/genai/eval-monitor/scorers",linkText:"Learn about scorers \u2192",containerHeight:64})]})]})}function j(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(v,{...e})}):v(e)}},81550:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/genai-monitoring-8ebda32e5cc07cb9cc97cb0297e583c3.png"},82238:(e,t,a)=>{a.d(t,{A:()=>s});a(96540);const n={featureHighlights:"featureHighlights_Ardf",highlightItem:"highlightItem_XPnN",highlightIcon:"highlightIcon_SUR8",highlightContent:"highlightContent_d0XP"};var i=a(74848);function s({features:e,col:t=2}){return(0,i.jsx)("div",{className:n.featureHighlights,style:{gridTemplateColumns:`repeat(${t}, 1fr)`},children:e.map((e,t)=>(0,i.jsxs)("div",{className:n.highlightItem,children:[e.icon&&(0,i.jsx)("div",{className:n.highlightIcon,children:(0,i.jsx)(e.icon,{size:24})}),(0,i.jsxs)("div",{className:n.highlightContent,children:[(0,i.jsx)("h4",{children:e.title}),(0,i.jsx)("p",{children:e.description})]})]},t))})}},84722:(e,t,a)=>{a.d(t,{A:()=>c});var n=a(96540);const i=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},s=(...e)=>e.filter((e,t,a)=>Boolean(e)&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim(),r=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const o=(0,n.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:a=2,absoluteStrokeWidth:i,className:o="",children:c,iconNode:d,...u},h)=>(0,n.createElement)("svg",{ref:h,...l,width:t,height:t,stroke:e,strokeWidth:i?24*Number(a)/Number(t):a,className:s("lucide",o),...!c&&!r(u)&&{"aria-hidden":"true"},...u},[...d.map(([e,t])=>(0,n.createElement)(e,t)),...Array.isArray(c)?c:[c]])),c=(e,t)=>{const a=(0,n.forwardRef)(({className:a,...r},l)=>{return(0,n.createElement)(o,{ref:l,iconNode:t,className:s(`lucide-${c=i(e),c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,a),...r});var c});return a.displayName=i(e),a}},91221:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/genai-human-feedback-9a8ea2ba10a5f7c7bb192aea22345b19.png"},99166:(e,t,a)=>{a.d(t,{A:()=>n});const n=a.p+"assets/images/genai-trace-dataset-0db517dfd5b8e13ae6732b0a1b0b098f.png"},99653:(e,t,a)=>{a.d(t,{A:()=>n});const n=(0,a(84722).A)("rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]])}}]);