"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2099],{11470:(e,n,t)=>{t.d(n,{A:()=>b});var r=t(96540),a=t(34164),i=t(23104),l=t(56347),s=t(205),o=t(57485),c=t(31682),d=t(70679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r})))}(t);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function g({queryString:e=!1,groupId:n}){const t=(0,l.W6)(),a=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,o.aZ)(a),(0,r.useCallback)((e=>{if(!a)return;const n=new URLSearchParams(t.location.search);n.set(a,e),t.replace({...t.location,search:n.toString()})}),[a,t])]}function m(e){const{defaultValue:n,queryString:t=!1,groupId:a}=e,i=h(e),[l,o]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find((e=>e.default))??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i}))),[c,u]=g({queryString:t,groupId:a}),[m,x]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,a]=(0,d.Dv)(n);return[t,(0,r.useCallback)((e=>{n&&a.set(e)}),[n,a])]}({groupId:a}),f=(()=>{const e=c??m;return p({value:e,tabValues:i})?e:null})();(0,s.A)((()=>{f&&o(f)}),[f]);return{selectedValue:l,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);o(e),u(e),x(e)}),[u,x,i]),tabValues:i}}var x=t(92303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(74848);function v({className:e,block:n,selectedValue:t,selectValue:r,tabValues:l}){const s=[],{blockElementScrollPositionUntilNextRender:o}=(0,i.a_)(),c=e=>{const n=e.currentTarget,a=s.indexOf(n),i=l[a].value;i!==t&&(o(n),r(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=s.indexOf(e.currentTarget)+1;n=s[t]??s[0];break}case"ArrowLeft":{const t=s.indexOf(e.currentTarget)-1;n=s[t]??s[s.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,a.A)("tabs",{"tabs--block":n},e),children:l.map((({value:e,label:n,attributes:r})=>(0,j.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{s.push(e)},onKeyDown:d,onClick:c,...r,className:(0,a.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e)))})}function y({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find((e=>e.props.value===t));return e?(0,r.cloneElement)(e,{className:(0,a.A)("margin-top--md",e.props.className)}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:i.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t})))})}function w(e){const n=m(e);return(0,j.jsxs)("div",{className:(0,a.A)("tabs-container",f.tabList),children:[(0,j.jsx)(v,{...n,...e}),(0,j.jsx)(y,{...n,...e})]})}function b(e){const n=(0,x.A)();return(0,j.jsx)(w,{...e,children:u(e.children)},String(n))}},19365:(e,n,t)=>{t.d(n,{A:()=>l});t(96540);var r=t(34164);const a={tabItem:"tabItem_Ymn6"};var i=t(74848);function l({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(a.tabItem,t),hidden:n,children:e})}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>s});var r=t(96540);const a={},i=r.createContext(a);function l(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),r.createElement(i.Provider,{value:n},e.children)}},66950:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"getting-started/tracing/tracing-ide","title":"Tracing a GenAI App (IDE)","description":"Learn how to build your first GenAI application using MLflow OSS and Tracing in your IDE.","source":"@site/docs/genai/getting-started/tracing/tracing-ide.mdx","sourceDirName":"getting-started/tracing","slug":"/getting-started/tracing/tracing-ide","permalink":"/docs/latest/genai/getting-started/tracing/tracing-ide","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"description":"Learn how to build your first GenAI application using MLflow OSS and Tracing in your IDE.","last_update":{"date":"2025-05-18T00:00:00.000Z"}},"sidebar":"genAISidebar","previous":{"title":"Overview","permalink":"/docs/latest/genai/getting-started/tracing/"},"next":{"title":"Tracing a GenAI App (Notebook)","permalink":"/docs/latest/genai/getting-started/tracing/tracing-notebook"}}');var a=t(74848),i=t(28453),l=t(11470),s=t(19365);const o={description:"Learn how to build your first GenAI application using MLflow OSS and Tracing in your IDE.",last_update:{date:new Date("2025-05-18T00:00:00.000Z")}},c="Tracing a GenAI App (IDE)",d={},u=[{value:"What you&#39;ll achieve",id:"what-youll-achieve",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Step 1: Install MLflow",id:"step-1-install-mlflow",level:2},{value:"Step 2: Start MLflow Tracking Server",id:"step-2-start-mlflow-tracking-server",level:2},{value:"Step 3: Set up your environment",id:"step-3-set-up-your-environment",level:2},{value:"Step 4: Instrument your application",id:"step-4-instrument-your-application",level:2},{value:"Step 5: View the Trace in MLflow",id:"step-5-view-the-trace-in-mlflow",level:2},{value:"Understanding the Trace",id:"understanding-the-trace",level:3},{value:"Next Steps",id:"next-steps",level:2}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"tracing-a-genai-app-ide",children:"Tracing a GenAI App (IDE)"})}),"\n",(0,a.jsxs)(n.p,{children:["This quickstart helps you integrate your GenAI app with ",(0,a.jsx)(n.a,{href:"/genai/tracing",children:"MLflow Tracing"})," using MLflow OSS in your local IDE development environment."]}),"\n",(0,a.jsx)(n.h2,{id:"what-youll-achieve",children:"What you'll achieve"}),"\n",(0,a.jsx)(n.p,{children:"By the end of this tutorial, you will have:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"A local MLflow Experiment for your GenAI app"}),"\n",(0,a.jsx)(n.li,{children:"Set up your local development environment with MLflow OSS"}),"\n",(0,a.jsx)(n.li,{children:"Used MLflow Tracing to instrument your app."}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Python 3.9+"}),": Local Python environment"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"OpenAI API Key"}),": For accessing OpenAI models (or other LLM provider)"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"step-1-install-mlflow",children:"Step 1: Install MLflow"}),"\n",(0,a.jsx)(n.p,{children:"When working in your local IDE, you need to install MLflow OSS."}),"\n",(0,a.jsxs)(l.A,{children:[(0,a.jsx)(s.A,{value:"mlflow3",label:"MLflow 3",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'pip install --upgrade "mlflow>=3.1"\n'})})}),(0,a.jsx)(s.A,{value:"mlflow2",label:"MLflow 2.x",children:(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'pip install --upgrade "mlflow>=2.15.0,<3.0.0"\n'})})})]}),"\n",(0,a.jsx)(n.admonition,{title:"MLflow Version Recommendation",type:"note",children:(0,a.jsxs)(n.p,{children:["While tracing features are available in MLflow 2.15.0+, ",(0,a.jsx)(n.strong,{children:"it is strongly recommended to install MLflow 3 (specifically 3.1 or newer)"})," for the latest GenAI capabilities, including expanded tracing features and robust support."]})}),"\n",(0,a.jsx)(n.h2,{id:"step-2-start-mlflow-tracking-server",children:"Step 2: Start MLflow Tracking Server"}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"An MLflow Experiment is the container for your GenAI application. With MLflow OSS, you can run a local tracking server to store your experiments and traces."})}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Start the MLflow tracking server in your terminal:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"mlflow server --host 127.0.0.1 --port 8080\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Open your browser and navigate to ",(0,a.jsx)(n.code,{children:"http://127.0.0.1:8080"})," to access the MLflow UI"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"You'll see the MLflow tracking interface where experiments and traces will be displayed"}),"\n"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"step-3-set-up-your-environment",children:"Step 3: Set up your environment"}),"\n",(0,a.jsx)(n.admonition,{type:"note",children:(0,a.jsx)(n.p,{children:"For MLflow OSS, you'll need to configure your environment to connect to your local tracking server and set up API keys for your LLM provider."})}),"\n",(0,a.jsxs)(l.A,{children:[(0,a.jsxs)(s.A,{value:"env-vars",label:"Use environment variables",children:[(0,a.jsx)(n.p,{children:"Set the following environment variables in your terminal:"}),(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export MLFLOW_TRACKING_URI=http://127.0.0.1:8080\nexport OPENAI_API_KEY=<your-openai-api-key>\n"})})]}),(0,a.jsx)(s.A,{value:"env-file",label:"Use a .env file",children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Create a ",(0,a.jsx)(n.code,{children:".env"})," file in your project root:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"MLFLOW_TRACKING_URI=http://127.0.0.1:8080\nOPENAI_API_KEY=<your-openai-api-key>\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Install the ",(0,a.jsx)(n.code,{children:"python-dotenv"})," package:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install python-dotenv\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Load environment variables in your code:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:"# At the beginning of your Python script\nfrom dotenv import load_dotenv\n\n# Load environment variables from .env file\nload_dotenv()\n"})}),"\n"]}),"\n"]})})]}),"\n",(0,a.jsx)(n.h2,{id:"step-4-instrument-your-application",children:"Step 4: Instrument your application"}),"\n",(0,a.jsx)(n.p,{children:"Select the appropriate integration for your application:"}),"\n",(0,a.jsxs)(l.A,{children:[(0,a.jsx)(s.A,{value:"openai",label:"OpenAI",children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Install the required Python packages:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install -U mlflow openai\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Create a Python file named ",(0,a.jsx)(n.code,{children:"app.py"})," in your project directory:"]}),"\n",(0,a.jsxs)(n.p,{children:["Here, we use the ",(0,a.jsxs)(n.a,{href:"/genai/tracing/app-instrumentation/manual-tracing",children:[(0,a.jsx)(n.code,{children:"@mlflow.trace"})," decorator"]})," that makes it easy to trace any Python application combined with the ",(0,a.jsx)(n.a,{href:"/genai/tracing/integrations/listing/openai",children:"OpenAI automatic instrumentation"})," to capture the details of the call to the OpenAI SDK."]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import mlflow\nimport openai\nimport os\n\n# Set the MLflow tracking URI\nmlflow.set_tracking_uri("http://127.0.0.1:8080")\n\n# Enable MLflow\'s autologging to instrument your application with Tracing\nmlflow.openai.autolog()\n\n# Create an OpenAI client\nclient = openai.OpenAI()\n\n\n# Use the trace decorator to capture the application\'s entry point\n@mlflow.trace\ndef my_app(input: str):\n    # This call is automatically instrumented by `mlflow.openai.autolog()`\n    response = client.chat.completions.create(\n        model="gpt-4o-mini",\n        messages=[\n            {\n                "role": "system",\n                "content": "You are a helpful assistant.",\n            },\n            {\n                "role": "user",\n                "content": input,\n            },\n        ],\n    )\n    return response.choices[0].message.content\n\n\nmy_app(input="What is MLflow?")\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Run the application:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"python app.py\n"})}),"\n"]}),"\n"]})}),(0,a.jsx)(s.A,{value:"anthropic",label:"Anthropic Claude",children:(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Install the required Python packages:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"pip install -U mlflow anthropic\n"})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsxs)(n.p,{children:["Create a Python file named ",(0,a.jsx)(n.code,{children:"app.py"})," in your project directory:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-python",children:'import anthropic\nimport mlflow\n\n# Enable auto-tracing for Anthropic\nmlflow.anthropic.autolog()\n\n# Set the MLflow tracking URI\nmlflow.set_tracking_uri("http://127.0.0.1:8080")\nmlflow.set_experiment("Anthropic")\n\n# Configure your API key.\nclient = anthropic.Anthropic(api_key=os.environ["ANTHROPIC_API_KEY"])\n\n# Use the create method to create new message.\nmessage = client.messages.create(\n    model="claude-3-5-sonnet-20241022",\n    max_tokens=1024,\n    messages=[\n        {"role": "user", "content": "Hello, Claude"},\n    ],\n)\n'})}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:["\n",(0,a.jsx)(n.p,{children:"Set your Anthropic API key and run:"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"export ANTHROPIC_API_KEY=<your-anthropic-api-key>\npython app.py\n"})}),"\n"]}),"\n"]})})]}),"\n",(0,a.jsx)(n.h2,{id:"step-5-view-the-trace-in-mlflow",children:"Step 5: View the Trace in MLflow"}),"\n",(0,a.jsxs)(n.ol,{children:["\n",(0,a.jsxs)(n.li,{children:["Navigate to your MLflow UI at ",(0,a.jsx)(n.code,{children:"http://127.0.0.1:8080"})]}),"\n",(0,a.jsxs)(n.li,{children:["You will now see the generated trace in the ",(0,a.jsx)(n.strong,{children:"Traces"})," tab"]}),"\n",(0,a.jsx)(n.li,{children:"Click on the trace to view its details"}),"\n"]}),"\n",(0,a.jsx)(n.h3,{id:"understanding-the-trace",children:"Understanding the Trace"}),"\n",(0,a.jsx)(n.p,{children:"The trace you've just created shows:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Root Span"}),": Represents the inputs to the ",(0,a.jsx)(n.code,{children:"my_app(...)"})," function","\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Child Span"}),": Represents the LLM completion request"]}),"\n"]}),"\n"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Attributes"}),": Contains metadata like model name, token counts, and timing information"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Inputs"}),": The messages sent to the model"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Outputs"}),": The response received from the model"]}),"\n"]}),"\n",(0,a.jsx)(n.p,{children:"This simple trace already provides valuable insights into your application's behavior, such as:"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"What was asked"}),"\n",(0,a.jsx)(n.li,{children:"What response was generated"}),"\n",(0,a.jsx)(n.li,{children:"How long the request took"}),"\n",(0,a.jsx)(n.li,{children:"How many tokens were used (affecting cost)"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,a.jsx)(n.p,{children:"Congratulations! You've successfully built your first GenAI application with MLflow OSS Tracing!"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Learn more about Tracing"}),": Learn about ",(0,a.jsx)(n.a,{href:"/genai/tracing",children:"tracing concepts"}),", ",(0,a.jsx)(n.a,{href:"/genai/tracing/app-instrumentation/manual-tracing",children:"manual tracing"})," for more control, ",(0,a.jsx)(n.a,{href:"/genai/tracing/track-users-sessions",children:"tracking users & sessions"}),", and ",(0,a.jsx)(n.a,{href:"/genai/tracing/track-environments-context",children:"tracking environments & context"})," to your traces."]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Evaluate your application"}),": Use MLflow's ",(0,a.jsx)(n.a,{href:"/genai/eval-monitor",children:"evaluation capabilities"})," to measure the quality of your GenAI app."]}),"\n"]}),"\n",(0,a.jsx)(n.admonition,{type:"tip",children:(0,a.jsx)(n.p,{children:"For more complex applications like RAG systems or multi-step agents, MLflow Tracing provides even more value by revealing the inner workings of each component and step. You can also experiment with different LLM providers and compare their performance using MLflow's tracking capabilities."})})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}}}]);