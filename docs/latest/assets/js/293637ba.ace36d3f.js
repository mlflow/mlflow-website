"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2730],{10493:(e,n,a)=>{a.d(n,{Zp:()=>i,AC:()=>o,WO:()=>d,_C:()=>c,$3:()=>m,jK:()=>u});var t=a(34164);const l={CardGroup:"CardGroup_P84T",MaxThreeColumns:"MaxThreeColumns_FO1r",AutofillColumns:"AutofillColumns_fKhQ",Card:"Card_aSCR",CardBordered:"CardBordered_glGF",CardBody:"CardBody_BhRs",TextColor:"TextColor_a8Tp",BoxRoot:"BoxRoot_Etgr",FlexWrapNowrap:"FlexWrapNowrap_f60k",FlexJustifyContentFlexStart:"FlexJustifyContentFlexStart_ZYv5",FlexDirectionRow:"FlexDirectionRow_T2qL",FlexAlignItemsCenter:"FlexAlignItemsCenter_EHVM",FlexFlex:"FlexFlex__JTE",Link:"Link_fVkl",MarginLeft4:"MarginLeft4_YQSJ",MarginTop4:"MarginTop4_jXKN",PaddingBottom4:"PaddingBottom4_O9gt",LogoCardContent:"LogoCardContent_kCQm",LogoCardImage:"LogoCardImage_JdcX",SmallLogoCardContent:"SmallLogoCardContent_LxhV",SmallLogoCardImage:"SmallLogoCardImage_tPZl",NewFeatureCardContent:"NewFeatureCardContent_Rq3d",NewFeatureCardHeading:"NewFeatureCardHeading_f6q3",NewFeatureCardHeadingSeparator:"NewFeatureCardHeadingSeparator_pSx8",NewFeatureCardTags:"NewFeatureCardTags_IFHO",NewFeatureCardWrapper:"NewFeatureCardWrapper_NQ0k",TitleCardContent:"TitleCardContent_l9MQ",TitleCardTitle:"TitleCardTitle__K8J",TitleCardSeparator:"TitleCardSeparator_IN2E",Cols1:"Cols1_Gr2U",Cols2:"Cols2_sRvc",Cols3:"Cols3_KjUS",Cols4:"Cols4_dKOj",Cols5:"Cols5_jDmj",Cols6:"Cols6_Q0OR"};var r=a(28774),s=a(74848);const o=({children:e,isSmall:n,cols:a})=>(0,s.jsx)("div",{className:(0,t.A)(l.CardGroup,n?l.AutofillColumns:a?l[`Cols${a}`]:l.MaxThreeColumns),children:e}),i=({children:e,link:n=""})=>n?(0,s.jsx)(r.A,{className:(0,t.A)(l.Link,l.Card,l.CardBordered),to:n,children:e}):(0,s.jsx)("div",{className:(0,t.A)(l.Card,l.CardBordered),children:e}),c=({headerText:e,link:n,text:a})=>(0,s.jsx)(i,{link:n,children:(0,s.jsxs)("span",{children:[(0,s.jsx)("div",{className:(0,t.A)(l.CardTitle,l.BoxRoot,l.PaddingBottom4),style:{pointerEvents:"none"},children:(0,s.jsx)("div",{className:(0,t.A)(l.BoxRoot,l.FlexFlex,l.FlexAlignItemsCenter,l.FlexDirectionRow,l.FlexJustifyContentFlexStart,l.FlexWrapNowrap),style:{marginLeft:"-4px",marginTop:"-4px"},children:(0,s.jsx)("div",{className:(0,t.A)(l.BoxRoot,l.BoxHideIfEmpty,l.MarginTop4,l.MarginLeft4),style:{pointerEvents:"auto"},children:(0,s.jsx)("span",{className:"",children:e})})})}),(0,s.jsx)("span",{className:(0,t.A)(l.TextColor,l.CardBody),children:(0,s.jsx)("p",{children:a})})]})}),d=({description:e,children:n,link:a})=>(0,s.jsx)(i,{link:a,children:(0,s.jsxs)("div",{className:l.LogoCardContent,children:[(0,s.jsx)("div",{className:l.LogoCardImage,children:n}),(0,s.jsx)("p",{className:l.TextColor,children:e})]})}),m=({children:e,link:n})=>(0,s.jsx)(i,{link:n,children:(0,s.jsx)("div",{className:l.SmallLogoCardContent,children:(0,s.jsx)("div",{className:(0,t.A)("max-height-img-container",l.SmallLogoCardImage),children:e})})}),u=({title:e,description:n,link:a=""})=>(0,s.jsx)(i,{link:a,children:(0,s.jsxs)("div",{className:l.TitleCardContent,children:[(0,s.jsx)("div",{className:(0,t.A)(l.TitleCardTitle),style:{textAlign:"left",fontWeight:"bold"},children:e}),(0,s.jsx)("hr",{className:(0,t.A)(l.TitleCardSeparator),style:{margin:"12px 0"}}),(0,s.jsx)("p",{className:(0,t.A)(l.TextColor),children:n})]})})},11470:(e,n,a)=>{a.d(n,{A:()=>b});var t=a(96540),l=a(34164),r=a(23104),s=a(56347),o=a(205),i=a(57485),c=a(31682),d=a(70679);function m(e){return t.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function u(e){const{values:n,children:a}=e;return(0,t.useMemo)((()=>{const e=n??function(e){return m(e).map((({props:{value:e,label:n,attributes:a,default:t}})=>({value:e,label:n,attributes:a,default:t})))}(a);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,a])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function f({queryString:e=!1,groupId:n}){const a=(0,s.W6)(),l=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,i.aZ)(l),(0,t.useCallback)((e=>{if(!l)return;const n=new URLSearchParams(a.location.search);n.set(l,e),a.replace({...a.location,search:n.toString()})}),[l,a])]}function _(e){const{defaultValue:n,queryString:a=!1,groupId:l}=e,r=u(e),[s,i]=(0,t.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const a=n.find((e=>e.default))??n[0];if(!a)throw new Error("Unexpected error: 0 tabValues");return a.value}({defaultValue:n,tabValues:r}))),[c,m]=f({queryString:a,groupId:l}),[_,h]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[a,l]=(0,d.Dv)(n);return[a,(0,t.useCallback)((e=>{n&&l.set(e)}),[n,l])]}({groupId:l}),g=(()=>{const e=c??_;return p({value:e,tabValues:r})?e:null})();(0,o.A)((()=>{g&&i(g)}),[g]);return{selectedValue:s,selectValue:(0,t.useCallback)((e=>{if(!p({value:e,tabValues:r}))throw new Error(`Can't select invalid tab value=${e}`);i(e),m(e),h(e)}),[m,h,r]),tabValues:r}}var h=a(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=a(74848);function w({className:e,block:n,selectedValue:a,selectValue:t,tabValues:s}){const o=[],{blockElementScrollPositionUntilNextRender:i}=(0,r.a_)(),c=e=>{const n=e.currentTarget,l=o.indexOf(n),r=s[l].value;r!==a&&(i(n),t(r))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const a=o.indexOf(e.currentTarget)+1;n=o[a]??o[0];break}case"ArrowLeft":{const a=o.indexOf(e.currentTarget)-1;n=o[a]??o[o.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.A)("tabs",{"tabs--block":n},e),children:s.map((({value:e,label:n,attributes:t})=>(0,v.jsx)("li",{role:"tab",tabIndex:a===e?0:-1,"aria-selected":a===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...t,className:(0,l.A)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":a===e}),children:n??e},e)))})}function x({lazy:e,children:n,selectedValue:a}){const r=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=r.find((e=>e.props.value===a));return e?(0,t.cloneElement)(e,{className:(0,l.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:r.map(((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==a})))})}function y(e){const n=_(e);return(0,v.jsxs)("div",{className:(0,l.A)("tabs-container",g.tabList),children:[(0,v.jsx)(w,{...n,...e}),(0,v.jsx)(x,{...n,...e})]})}function b(e){const n=(0,h.A)();return(0,v.jsx)(y,{...e,children:m(e.children)},String(n))}},19365:(e,n,a)=>{a.d(n,{A:()=>s});a(96540);var t=a(34164);const l={tabItem:"tabItem_Ymn6"};var r=a(74848);function s({children:e,hidden:n,className:a}){return(0,r.jsx)("div",{role:"tabpanel",className:(0,t.A)(l.tabItem,a),hidden:n,children:e})}},28453:(e,n,a)=>{a.d(n,{R:()=>s,x:()=>o});var t=a(96540);const l={},r=t.createContext(l);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},49374:(e,n,a)=>{a.d(n,{B:()=>i});a(96540);const t=JSON.parse('{"mlflow.anthropic":"api_reference/python_api/mlflow.anthropic.html","mlflow.artifacts":"api_reference/python_api/mlflow.artifacts.html","mlflow.ag2":"api_reference/python_api/mlflow.ag2.html","mlflow.autogen":"api_reference/python_api/mlflow.autogen.html","mlflow.bedrock":"api_reference/python_api/mlflow.bedrock.html","mlflow.catboost":"api_reference/python_api/mlflow.catboost.html","mlflow.client":"api_reference/python_api/mlflow.client.html","mlflow.config":"api_reference/python_api/mlflow.config.html","mlflow.crewai":"api_reference/python_api/mlflow.crewai.html","mlflow.data":"api_reference/python_api/mlflow.data.html","mlflow.deployments":"api_reference/python_api/mlflow.deployments.html","mlflow.diviner":"api_reference/python_api/mlflow.diviner.html","mlflow.dspy":"api_reference/python_api/mlflow.dspy.html","mlflow.entities":"api_reference/python_api/mlflow.entities.html","mlflow.environment_variables":"api_reference/python_api/mlflow.environment_variables.html","mlflow.gateway":"api_reference/python_api/mlflow.gateway.html","mlflow.gemini":"api_reference/python_api/mlflow.gemini.html","mlflow.groq":"api_reference/python_api/mlflow.groq.html","mlflow.h2o":"api_reference/python_api/mlflow.h2o.html","mlflow.johnsnowlabs":"api_reference/python_api/mlflow.johnsnowlabs.html","mlflow.keras":"api_reference/python_api/mlflow.keras.html","mlflow.langchain":"api_reference/python_api/mlflow.langchain.html","mlflow.lightgbm":"api_reference/python_api/mlflow.lightgbm.html","mlflow.litellm":"api_reference/python_api/mlflow.litellm.html","mlflow.llama_index":"api_reference/python_api/mlflow.llama_index.html","mlflow.metrics":"api_reference/python_api/mlflow.metrics.html","mlflow.mistral":"api_reference/python_api/mlflow.mistral.html","mlflow.models":"api_reference/python_api/mlflow.models.html","mlflow.onnx":"api_reference/python_api/mlflow.onnx.html","mlflow.openai":"api_reference/python_api/mlflow.openai.html","mlflow.paddle":"api_reference/python_api/mlflow.paddle.html","mlflow.pmdarima":"api_reference/python_api/mlflow.pmdarima.html","mlflow.projects":"api_reference/python_api/mlflow.projects.html","mlflow.promptflow":"api_reference/python_api/mlflow.promptflow.html","mlflow.prophet":"api_reference/python_api/mlflow.prophet.html","mlflow.pyfunc":"api_reference/python_api/mlflow.pyfunc.html","mlflow.pyspark.ml":"api_reference/python_api/mlflow.pyspark.ml.html","mlflow.pytorch":"api_reference/python_api/mlflow.pytorch.html","mlflow":"api_reference/python_api/mlflow.html","mlflow.sagemaker":"api_reference/python_api/mlflow.sagemaker.html","mlflow.sentence_transformers":"api_reference/python_api/mlflow.sentence_transformers.html","mlflow.server":"api_reference/python_api/mlflow.server.html","mlflow.shap":"api_reference/python_api/mlflow.shap.html","mlflow.sklearn":"api_reference/python_api/mlflow.sklearn.html","mlflow.spacy":"api_reference/python_api/mlflow.spacy.html","mlflow.spark":"api_reference/python_api/mlflow.spark.html","mlflow.statsmodels":"api_reference/python_api/mlflow.statsmodels.html","mlflow.system_metrics":"api_reference/python_api/mlflow.system_metrics.html","mlflow.tensorflow":"api_reference/python_api/mlflow.tensorflow.html","mlflow.tracing":"api_reference/python_api/mlflow.tracing.html","mlflow.transformers":"api_reference/python_api/mlflow.transformers.html","mlflow.types":"api_reference/python_api/mlflow.types.html","mlflow.utils":"api_reference/python_api/mlflow.utils.html","mlflow.xgboost":"api_reference/python_api/mlflow.xgboost.html","mlflow.server.auth":"api_reference/auth/python-api.html"}');var l=a(86025),r=a(28774),s=a(74848);const o=e=>{const n=e.split(".");for(let a=n.length;a>0;a--){const e=n.slice(0,a).join(".");if(t[e])return e}return null};function i({fn:e,children:n}){const a=o(e);if(!a)return(0,s.jsx)(s.Fragment,{children:n});const i=(0,l.Ay)(`/${t[a]}#${e}`);return(0,s.jsx)(r.A,{to:i,target:"_blank",children:n??(0,s.jsxs)("code",{children:[e,"()"]})})}},86120:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>m,contentTitle:()=>d,default:()=>f,frontMatter:()=>c,metadata:()=>t,toc:()=>u});const t=JSON.parse('{"id":"evaluation/model-eval","title":"Model Evaluation","description":"This guide covers MLflow\'s core model evaluation capabilities for classification and regression tasks, showing how to comprehensively assess model performance with automated metrics, visualizations, and diagnostic tools.","source":"@site/docs/classic-ml/evaluation/model-eval.mdx","sourceDirName":"evaluation","slug":"/evaluation/model-eval","permalink":"/docs/latest/ml/evaluation/model-eval","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"title":"Model Evaluation","sidebar_position":1},"sidebar":"classicMLSidebar","previous":{"title":"Dataset Evaluation","permalink":"/docs/latest/ml/evaluation/dataset-eval"},"next":{"title":"Custom Metrics & Visualizations","permalink":"/docs/latest/ml/evaluation/metrics-visualizations"}}');var l=a(74848),r=a(28453),s=(a(28774),a(10493),a(49374)),o=a(11470),i=a(19365);const c={title:"Model Evaluation",sidebar_position:1},d="Model Evaluation",m={},u=[{value:"Quick Start: Evaluating a Classification Model",id:"quick-start-evaluating-a-classification-model",level:2},{value:"Supported Model Types",id:"supported-model-types",level:2},{value:"Advanced Evaluation Configurations",id:"advanced-evaluation-configurations",level:2},{value:"Specifying Evaluators",id:"specifying-evaluators",level:3},{value:"SHAP Configuration",id:"shap-configuration",level:4},{value:"Performance Options",id:"performance-options",level:4},{value:"Custom Metrics and Artifacts",id:"custom-metrics-and-artifacts",level:2},{value:"Working with Evaluation Results",id:"working-with-evaluation-results",level:2},{value:"Model Comparison and Advanced Workflows",id:"model-comparison-and-advanced-workflows",level:2},{value:"Model Validation and Quality Gates",id:"model-validation-and-quality-gates",level:2},{value:"Error Analysis and Debugging",id:"error-analysis-and-debugging",level:2},{value:"Best Practices and Optimization",id:"best-practices-and-optimization",level:2},{value:"Conclusion",id:"conclusion",level:2}];function p(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",p:"p",pre:"pre",strong:"strong",...(0,r.R)(),...e.components},{Details:a}=n;return a||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"model-evaluation",children:"Model Evaluation"})}),"\n",(0,l.jsx)(n.p,{children:"This guide covers MLflow's core model evaluation capabilities for classification and regression tasks, showing how to comprehensively assess model performance with automated metrics, visualizations, and diagnostic tools."}),"\n",(0,l.jsx)(n.h2,{id:"quick-start-evaluating-a-classification-model",children:"Quick Start: Evaluating a Classification Model"}),"\n",(0,l.jsx)(n.p,{children:"The simplest way to evaluate a model is with MLflow's unified evaluation API:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import mlflow\nimport xgboost as xgb\nimport shap\nfrom sklearn.model_selection import train_test_split\nfrom mlflow.models import infer_signature\n\n# Load the UCI Adult Dataset\nX, y = shap.datasets.adult()\nX_train, X_test, y_train, y_test = train_test_split(\n    X, y, test_size=0.33, random_state=42\n)\n\n# Train model\nmodel = xgb.XGBClassifier().fit(X_train, y_train)\n\n# Create evaluation dataset\neval_data = X_test.copy()\neval_data["label"] = y_test\n\nwith mlflow.start_run():\n    # Log model with signature\n    signature = infer_signature(X_test, model.predict(X_test))\n    mlflow.sklearn.log_model(model, name="model", signature=signature)\n    model_uri = mlflow.get_artifact_uri("model")\n\n    # Comprehensive evaluation\n    result = mlflow.models.evaluate(\n        model_uri,\n        eval_data,\n        targets="label",\n        model_type="classifier",\n        evaluators=["default"],\n    )\n\n    print(f"Accuracy: {result.metrics[\'accuracy_score\']:.3f}")\n    print(f"F1 Score: {result.metrics[\'f1_score\']:.3f}")\n    print(f"ROC AUC: {result.metrics[\'roc_auc\']:.3f}")\n'})}),"\n",(0,l.jsx)(n.p,{children:"This single call automatically generates:"}),"\n",(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Performance Metrics"}),": Accuracy, precision, recall, F1-score, ROC-AUC"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Visualizations"}),": Confusion matrix, ROC curve, precision-recall curve"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Feature Importance"}),": SHAP values and feature contribution analysis"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Model Artifacts"}),": All plots and diagnostic information saved to MLflow"]})]}),"\n",(0,l.jsx)(n.h2,{id:"supported-model-types",children:"Supported Model Types"}),"\n",(0,l.jsx)(n.p,{children:"MLflow supports different model types, each with specialized metrics and evaluations:"}),"\n",(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:(0,l.jsx)("code",{children:"classifier"})})," - Binary and multiclass classification models"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:(0,l.jsx)("code",{children:"regressor"})})," - Regression models for continuous target prediction"]})]}),"\n",(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(i.A,{value:"classification",label:"Classification",default:!0,children:[(0,l.jsx)(n.p,{children:"For classification tasks, MLflow automatically computes comprehensive metrics:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Binary Classification\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data,\n    targets="label",\n    model_type="classifier",  # Automatically detects binary vs multiclass\n    evaluators=["default"],\n)\n\n# Access classification-specific metrics\nmetrics = result.metrics\nprint(f"Precision: {metrics[\'precision_score\']:.3f}")\nprint(f"Recall: {metrics[\'recall_score\']:.3f}")\nprint(f"F1 Score: {metrics[\'f1_score\']:.3f}")\nprint(f"ROC AUC: {metrics[\'roc_auc\']:.3f}")\n'})}),(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Automatic Classification Metrics:"})}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Accuracy, Precision, Recall, F1-Score"}),(0,l.jsx)("li",{children:"ROC-AUC and Precision-Recall AUC"}),(0,l.jsx)("li",{children:"Log Loss and Brier Score"}),(0,l.jsx)("li",{children:"Confusion Matrix and Classification Report"})]})]}),(0,l.jsxs)(i.A,{value:"regression",label:"Regression",children:[(0,l.jsx)(n.p,{children:"For regression tasks, MLflow provides comprehensive error analysis:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from sklearn.datasets import fetch_california_housing\nfrom sklearn.linear_model import LinearRegression\n\n# Load regression dataset\nhousing = fetch_california_housing(as_frame=True)\nX_train, X_test, y_train, y_test = train_test_split(\n    housing.data, housing.target, test_size=0.2, random_state=42\n)\n\n# Train regression model\nreg_model = LinearRegression().fit(X_train, y_train)\n\n# Create evaluation dataset\neval_data = X_test.copy()\neval_data["target"] = y_test\n\nwith mlflow.start_run():\n    # Log and evaluate regression model\n    signature = infer_signature(X_train, reg_model.predict(X_train))\n    mlflow.sklearn.log_model(reg_model, name="model", signature=signature)\n    model_uri = mlflow.get_artifact_uri("model")\n\n    result = mlflow.models.evaluate(\n        model_uri,\n        eval_data,\n        targets="target",\n        model_type="regressor",\n        evaluators=["default"],\n    )\n\n    print(f"MAE: {result.metrics[\'mean_absolute_error\']:.3f}")\n    print(f"RMSE: {result.metrics[\'root_mean_squared_error\']:.3f}")\n    print(f"R\xb2 Score: {result.metrics[\'r2_score\']:.3f}")\n'})}),(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Automatic Regression Metrics:"})}),(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:"Mean Absolute Error (MAE)"}),(0,l.jsx)("li",{children:"Mean Squared Error (MSE) and Root MSE"}),(0,l.jsx)("li",{children:"R\xb2 Score and Adjusted R\xb2"}),(0,l.jsx)("li",{children:"Mean Absolute Percentage Error (MAPE)"}),(0,l.jsx)("li",{children:"Residual plots and distribution analysis"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"advanced-evaluation-configurations",children:"Advanced Evaluation Configurations"}),"\n",(0,l.jsx)(n.h3,{id:"specifying-evaluators",children:"Specifying Evaluators"}),"\n",(0,l.jsx)(n.p,{children:"Control which evaluators run during assessment:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Run only default metrics (fastest)\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data,\n    targets="label",\n    model_type="classifier",\n    evaluators=["default"],\n)\n\n# Include SHAP explainer for feature importance\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data,\n    targets="label",\n    model_type="classifier",\n    evaluators=["default"],\n    evaluator_config={"log_explainer": True},\n)\n'})}),"\n",(0,l.jsxs)(a,{children:[(0,l.jsx)("summary",{children:"Configuration Options Reference"}),(0,l.jsx)(n.h4,{id:"shap-configuration",children:"SHAP Configuration"}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"log_explainer"}),": Whether to log the SHAP explainer as a model"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"explainer_type"}),': Type of SHAP explainer ("exact", "permutation", "partition")']}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"max_error_examples"}),": Maximum number of error examples to analyze"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"log_model_explanations"}),": Whether to log individual prediction explanations"]})]}),(0,l.jsx)(n.h4,{id:"performance-options",children:"Performance Options"}),(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"pos_label"}),": Positive class label for binary classification metrics"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"average"}),': Averaging strategy for multiclass metrics ("macro", "micro", "weighted")']}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"sample_weights"}),": Sample weights for weighted metrics"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("code",{children:"normalize"}),': Normalization for confusion matrix ("true", "pred", "all")']})]})]}),"\n",(0,l.jsx)(n.h2,{id:"custom-metrics-and-artifacts",children:"Custom Metrics and Artifacts"}),"\n",(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(i.A,{value:"custom-metrics",label:"Custom Metrics",default:!0,children:[(0,l.jsxs)(n.p,{children:["MLflow provides a powerful framework for defining custom evaluation metrics using the ",(0,l.jsx)(n.code,{children:"make_metric"})," function:"]}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import mlflow\nimport numpy as np\nfrom mlflow.models import make_metric\n\n\ndef weighted_accuracy(predictions, targets, metrics, sample_weights=None):\n    """Custom weighted accuracy metric."""\n    if sample_weights is None:\n        return (predictions == targets).mean()\n    else:\n        correct = predictions == targets\n        return np.average(correct, weights=sample_weights)\n\n\n# Create custom metric\ncustom_accuracy = make_metric(\n    eval_fn=weighted_accuracy, greater_is_better=True, name="weighted_accuracy"\n)\n\n# Use in evaluation\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data,\n    targets="label",\n    model_type="classifier",\n    extra_metrics=[custom_accuracy],\n)\n'})})]}),(0,l.jsxs)(i.A,{value:"custom-artifacts",label:"Custom Artifacts",children:[(0,l.jsx)(n.p,{children:"Create custom visualization and analysis artifacts:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'import matplotlib.pyplot as plt\nimport os\n\n\ndef create_residual_plot(eval_df, builtin_metrics, artifacts_dir):\n    """Create custom residual plot for regression models."""\n\n    residuals = eval_df["target"] - eval_df["prediction"]\n\n    plt.figure(figsize=(10, 6))\n    plt.scatter(eval_df["prediction"], residuals, alpha=0.6)\n    plt.axhline(y=0, color="r", linestyle="--")\n    plt.xlabel("Predicted Values")\n    plt.ylabel("Residuals")\n    plt.title("Residual Plot")\n\n    plot_path = os.path.join(artifacts_dir, "residual_plot.png")\n    plt.savefig(plot_path)\n    plt.close()\n\n    return {"residual_plot": plot_path}\n\n\n# Use custom artifact\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data,\n    targets="target",\n    model_type="regressor",\n    custom_artifacts=[create_residual_plot],\n)\n'})})]})]}),"\n",(0,l.jsx)(n.h2,{id:"working-with-evaluation-results",children:"Working with Evaluation Results"}),"\n",(0,l.jsx)(n.p,{children:"The evaluation result object provides comprehensive access to all generated metrics and artifacts:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Run evaluation\nresult = mlflow.models.evaluate(\n    model_uri, eval_data, targets="label", model_type="classifier"\n)\n\n# Access metrics\nprint("All Metrics:")\nfor metric_name, value in result.metrics.items():\n    print(f"  {metric_name}: {value}")\n\n# Access artifacts (plots, tables, etc.)\nprint("\\nGenerated Artifacts:")\nfor artifact_name, path in result.artifacts.items():\n    print(f"  {artifact_name}: {path}")\n\n# Access evaluation dataset\neval_table = result.tables["eval_results_table"]\nprint(f"\\nEvaluation table shape: {eval_table.shape}")\nprint(f"Columns: {list(eval_table.columns)}")\n'})}),"\n",(0,l.jsx)(n.h2,{id:"model-comparison-and-advanced-workflows",children:"Model Comparison and Advanced Workflows"}),"\n",(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(i.A,{value:"model-comparison",label:"Model Comparison",default:!0,children:[(0,l.jsx)(n.p,{children:"Compare multiple models systematically:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from sklearn.ensemble import RandomForestClassifier\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.svm import SVC\n\n# Define models to compare\nmodels = {\n    "random_forest": RandomForestClassifier(n_estimators=100, random_state=42),\n    "logistic_regression": LogisticRegression(random_state=42),\n    "svm": SVC(probability=True, random_state=42),\n}\n\n# Evaluate each model\nresults = {}\n\nfor model_name, model in models.items():\n    with mlflow.start_run(run_name=f"eval_{model_name}"):\n        # Train model\n        model.fit(X_train, y_train)\n\n        # Log model\n        signature = infer_signature(X_train, model.predict(X_train))\n        mlflow.sklearn.log_model(model, name="model", signature=signature)\n        model_uri = mlflow.get_artifact_uri("model")\n\n        # Evaluate model\n        result = mlflow.models.evaluate(\n            model_uri, eval_data, targets="label", model_type="classifier"\n        )\n\n        results[model_name] = result.metrics\n\n        # Log comparison metrics\n        mlflow.log_metrics(\n            {\n                "accuracy": result.metrics["accuracy_score"],\n                "f1": result.metrics["f1_score"],\n                "roc_auc": result.metrics["roc_auc"],\n            }\n        )\n\n# Compare results\ncomparison_df = pd.DataFrame(results).T\nprint("Model Comparison:")\nprint(comparison_df[["accuracy_score", "f1_score", "roc_auc"]].round(3))\n'})})]}),(0,l.jsxs)(i.A,{value:"cross-validation",label:"Cross-Validation",children:[(0,l.jsx)(n.p,{children:"Combine MLflow evaluation with cross-validation:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from sklearn.model_selection import cross_val_score, StratifiedKFold\n\n\ndef evaluate_with_cv(model, X, y, eval_data, cv_folds=5):\n    """Evaluate model with cross-validation and final test evaluation."""\n\n    with mlflow.start_run():\n        # Cross-validation scores\n        cv = StratifiedKFold(n_splits=cv_folds, shuffle=True, random_state=42)\n        cv_scores = cross_val_score(model, X, y, cv=cv, scoring="f1_weighted")\n\n        # Log CV results\n        mlflow.log_metrics(\n            {"cv_mean_f1": cv_scores.mean(), "cv_std_f1": cv_scores.std()}\n        )\n\n        # Train on full dataset\n        model.fit(X, y)\n\n        # Final evaluation\n        signature = infer_signature(X, model.predict(X))\n        mlflow.sklearn.log_model(model, name="model", signature=signature)\n        model_uri = mlflow.get_artifact_uri("model")\n\n        result = mlflow.models.evaluate(\n            model_uri, eval_data, targets="label", model_type="classifier"\n        )\n\n        # Compare CV and test performance\n        test_f1 = result.metrics["f1_score"]\n        cv_f1 = cv_scores.mean()\n\n        mlflow.log_metrics(\n            {\n                "cv_vs_test_diff": abs(cv_f1 - test_f1),\n                "potential_overfit": cv_f1 - test_f1 > 0.05,\n            }\n        )\n\n        return result\n\n\n# Usage\nresult = evaluate_with_cv(\n    RandomForestClassifier(n_estimators=100, random_state=42),\n    X_train,\n    y_train,\n    eval_data,\n)\n'})})]}),(0,l.jsxs)(i.A,{value:"automated-selection",label:"Automated Selection",children:[(0,l.jsx)(n.p,{children:"Automated model selection based on evaluation metrics:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def evaluate_and_select_best_model(\n    models, X_train, y_train, eval_data, metric="f1_score"\n):\n    """Evaluate multiple models and select the best performer."""\n\n    results = {}\n    best_score = -1\n    best_model_name = None\n\n    for model_name, model in models.items():\n        with mlflow.start_run(run_name=f"candidate_{model_name}"):\n            # Train and evaluate\n            model.fit(X_train, y_train)\n\n            signature = infer_signature(X_train, model.predict(X_train))\n            mlflow.sklearn.log_model(model, name="model", signature=signature)\n            model_uri = mlflow.get_artifact_uri("model")\n\n            result = mlflow.models.evaluate(\n                model_uri, eval_data, targets="label", model_type="classifier"\n            )\n\n            score = result.metrics[metric]\n            results[model_name] = score\n\n            # Track best model\n            if score > best_score:\n                best_score = score\n                best_model_name = model_name\n\n            # Log selection metrics\n            mlflow.log_metrics(\n                {"selection_score": score, "is_best": score == best_score}\n            )\n\n    print(f"Best model: {best_model_name} (Score: {best_score:.3f})")\n    return best_model_name, results\n\n\n# Use automated selection\nbest_model, all_scores = evaluate_and_select_best_model(\n    models, X_train, y_train, eval_data, metric="f1_score"\n)\n'})})]})]}),"\n",(0,l.jsx)(n.h2,{id:"model-validation-and-quality-gates",children:"Model Validation and Quality Gates"}),"\n",(0,l.jsx)(n.admonition,{title:"attention",type:"warning",children:(0,l.jsxs)(n.p,{children:["MLflow 2.18.0 has moved the model validation functionality from the ",(0,l.jsx)(s.B,{fn:"mlflow.models.evaluate"})," API\nto a dedicated ",(0,l.jsx)(s.B,{fn:"mlflow.validate_evaluation_results"})," API. The relevant parameters, such as baseline_model,\nare deprecated and will be removed from the older API in future versions."]})}),"\n",(0,l.jsxs)(n.p,{children:["With the ",(0,l.jsx)(s.B,{fn:"mlflow.validate_evaluation_results"})," API, you can validate metrics generated during model evaluation\nto assess the quality of your model against a baseline."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'from mlflow.models import MetricThreshold\n\n# Evaluate your model first\nresult = mlflow.models.evaluate(\n    model_uri, eval_data, targets="label", model_type="classifier"\n)\n\n# Define static performance thresholds\nstatic_thresholds = {\n    "accuracy_score": MetricThreshold(\n        threshold=0.85, greater_is_better=True  # Must achieve 85% accuracy\n    ),\n    "precision_score": MetricThreshold(\n        threshold=0.80, greater_is_better=True  # Must achieve 80% precision\n    ),\n    "recall_score": MetricThreshold(\n        threshold=0.75, greater_is_better=True  # Must achieve 75% recall\n    ),\n}\n\n# Validate against static thresholds\ntry:\n    mlflow.validate_evaluation_results(\n        candidate_result=result,\n        baseline_result=None,  # No baseline comparison\n        validation_thresholds=static_thresholds,\n    )\n    print("\u2705 Model meets all static performance thresholds.")\nexcept mlflow.exceptions.ModelValidationFailedException as e:\n    print(f"\u274c Model failed static validation: {e}")\n'})}),"\n",(0,l.jsxs)(n.p,{children:["More information on model validation behavior and outputs can be found in the ",(0,l.jsx)(s.B,{fn:"mlflow.validate_evaluation_results"})," API documentation."]}),"\n",(0,l.jsx)(n.h2,{id:"error-analysis-and-debugging",children:"Error Analysis and Debugging"}),"\n",(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(i.A,{value:"error-investigation",label:"Error Investigation",default:!0,children:[(0,l.jsx)(n.p,{children:"Analyze model errors in detail:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def analyze_model_errors(result, eval_data, targets, top_n=20):\n    """Analyze model errors in detail."""\n\n    # Load evaluation results\n    eval_table = result.tables["eval_results_table"]\n\n    # Identify errors\n    errors = eval_table[eval_table["prediction"] != eval_table[targets]]\n\n    if len(errors) > 0:\n        print(f"Total errors: {len(errors)} out of {len(eval_table)} predictions")\n        print(f"Error rate: {len(errors) / len(eval_table) * 100:.2f}%")\n\n        # Most confident wrong predictions\n        if "prediction_score" in errors.columns:\n            confident_errors = errors.nlargest(top_n, "prediction_score")\n            print(f"\\nTop {top_n} most confident errors:")\n            print(confident_errors[["prediction", targets, "prediction_score"]].head())\n\n        # Error patterns by true class\n        error_by_class = errors.groupby(targets).size()\n        print(f"\\nErrors by true class:")\n        print(error_by_class)\n\n    return errors\n\n\n# Usage\nerrors = analyze_model_errors(result, eval_data, "label")\n'})})]}),(0,l.jsxs)(i.A,{value:"feature-analysis",label:"Feature Analysis",children:[(0,l.jsx)(n.p,{children:"Analyze how model errors relate to input features:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def analyze_errors_by_features(model_uri, eval_data, targets, feature_columns):\n    """Analyze how model errors relate to input features."""\n\n    # Get model predictions\n    model = mlflow.pyfunc.load_model(model_uri)\n    predictions = model.predict(eval_data[feature_columns])\n\n    # Create analysis dataframe\n    analysis_df = eval_data.copy()\n    analysis_df["prediction"] = predictions\n    analysis_df["is_error"] = analysis_df["prediction"] != analysis_df[targets]\n\n    # Feature statistics for errors vs correct predictions\n    feature_stats = {}\n\n    for feature in feature_columns:\n        if analysis_df[feature].dtype in ["int64", "float64"]:\n            # Numerical features\n            correct_mean = analysis_df[~analysis_df["is_error"]][feature].mean()\n            error_mean = analysis_df[analysis_df["is_error"]][feature].mean()\n\n            feature_stats[feature] = {\n                "correct_mean": correct_mean,\n                "error_mean": error_mean,\n                "difference": abs(error_mean - correct_mean),\n                "relative_difference": abs(error_mean - correct_mean) / correct_mean\n                if correct_mean != 0\n                else 0,\n            }\n\n    # Sort features by impact on errors\n    numerical_features = [\n        (k, v["relative_difference"])\n        for k, v in feature_stats.items()\n        if "relative_difference" in v\n    ]\n    numerical_features.sort(key=lambda x: x[1], reverse=True)\n\n    print("Features most associated with errors:")\n    for feature, diff in numerical_features[:5]:\n        print(f"  {feature}: {diff:.3f}")\n\n    return feature_stats, analysis_df\n\n\n# Usage\nfeature_stats, analysis = analyze_errors_by_features(\n    model_uri,\n    eval_data,\n    "label",\n    feature_columns=eval_data.drop(columns=["label"]).columns.tolist(),\n)\n'})})]})]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices-and-optimization",children:"Best Practices and Optimization"}),"\n",(0,l.jsxs)(o.A,{children:[(0,l.jsxs)(i.A,{value:"best-practices",label:"Best Practices",default:!0,children:[(0,l.jsx)(n.p,{children:"Complete evaluation workflow with best practices:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def comprehensive_model_evaluation(\n    model, X_train, y_train, eval_data, targets, model_type\n):\n    """Complete evaluation workflow with best practices."""\n\n    with mlflow.start_run():\n        # Train model\n        model.fit(X_train, y_train)\n\n        # Log training info\n        mlflow.log_params(\n            {"model_class": model.__class__.__name__, "training_samples": len(X_train)}\n        )\n\n        # Log model with signature\n        signature = infer_signature(X_train, model.predict(X_train))\n        mlflow.sklearn.log_model(model, name="model", signature=signature)\n        model_uri = mlflow.get_artifact_uri("model")\n\n        # Comprehensive evaluation\n        result = mlflow.models.evaluate(\n            model_uri,\n            eval_data,\n            targets=targets,\n            model_type=model_type,\n            evaluators=["default"],\n            evaluator_config={\n                "log_explainer": True,\n                "explainer_type": "exact",\n                "log_model_explanations": True,\n            },\n        )\n\n        return result\n'})})]}),(0,l.jsxs)(i.A,{value:"performance-optimization",label:"Performance Optimization",children:[(0,l.jsx)(n.p,{children:"Optimize evaluation for large datasets and complex models:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'# Optimize evaluation performance\nresult = mlflow.models.evaluate(\n    model_uri,\n    eval_data.sample(n=10000, random_state=42),  # Sample for faster evaluation\n    targets="label",\n    model_type="classifier",\n    evaluators=["default"],\n    evaluator_config={\n        "log_explainer": False,  # Skip SHAP for speed\n        "max_error_examples": 50,  # Reduce error analysis\n    },\n)\n\n\n# For very large datasets - evaluate in batches\ndef evaluate_in_batches(model_uri, large_eval_data, targets, batch_size=1000):\n    """Evaluate large datasets in batches to manage memory."""\n\n    all_predictions = []\n    all_targets = []\n\n    for i in range(0, len(large_eval_data), batch_size):\n        batch = large_eval_data.iloc[i : i + batch_size]\n\n        # Get predictions for batch\n        model = mlflow.pyfunc.load_model(model_uri)\n        batch_predictions = model.predict(batch.drop(columns=[targets]))\n\n        all_predictions.extend(batch_predictions)\n        all_targets.extend(batch[targets].values)\n\n    # Create final evaluation dataset\n    final_eval_data = pd.DataFrame(\n        {"prediction": all_predictions, "target": all_targets}\n    )\n\n    # Evaluate using static dataset approach\n    result = mlflow.models.evaluate(\n        data=final_eval_data,\n        predictions="prediction",\n        targets="target",\n        model_type="classifier",\n    )\n\n    return result\n'})})]}),(0,l.jsxs)(i.A,{value:"reproducible-evaluation",label:"Reproducible Evaluation",children:[(0,l.jsx)(n.p,{children:"Ensure consistent evaluation results:"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-python",children:'def reproducible_evaluation(model, eval_data, targets, random_seed=42):\n    """Ensure reproducible evaluation results."""\n\n    # Set random seeds\n    np.random.seed(random_seed)\n\n    with mlflow.start_run():\n        # Log evaluation configuration\n        mlflow.log_params(\n            {\n                "eval_random_seed": random_seed,\n                "eval_data_size": len(eval_data),\n                "eval_timestamp": pd.Timestamp.now().isoformat(),\n            }\n        )\n\n        # Consistent data ordering\n        eval_data_sorted = eval_data.sort_values(\n            by=eval_data.columns.tolist()\n        ).reset_index(drop=True)\n\n        # Run evaluation\n        result = mlflow.models.evaluate(\n            model,\n            eval_data_sorted,\n            targets=targets,\n            model_type="classifier",\n            evaluator_config={"random_seed": random_seed},\n        )\n\n        return result\n'})})]})]}),"\n",(0,l.jsx)(n.h2,{id:"conclusion",children:"Conclusion"}),"\n",(0,l.jsx)(n.p,{children:"MLflow's model evaluation capabilities provide a comprehensive framework for assessing model performance across classification and regression tasks. The unified API simplifies complex evaluation workflows while providing deep insights into model behavior through automated metrics, visualizations, and diagnostic tools."}),"\n",(0,l.jsx)(n.p,{children:"Key benefits of MLflow model evaluation include:"}),"\n",(0,l.jsxs)("ul",{children:[(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Comprehensive Assessment"}),": Automated generation of task-specific metrics and visualizations"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Reproducible Workflows"}),": Consistent evaluation processes with complete tracking and versioning"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Advanced Analysis"}),": Error investigation, feature impact analysis, and model comparison capabilities"]}),(0,l.jsxs)("li",{children:[(0,l.jsx)("strong",{children:"Production Integration"}),": Seamless integration with MLflow tracking for experiment organization and reporting"]})]}),"\n",(0,l.jsx)(n.p,{children:"Whether you're evaluating a single model or comparing multiple candidates, MLflow's evaluation framework provides the tools needed to make informed decisions about model performance and production readiness."})]})}function f(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(p,{...e})}):p(e)}}}]);