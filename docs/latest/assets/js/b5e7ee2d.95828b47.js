"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([["321"],{79463(e,i,n){n.r(i),n.d(i,{metadata:()=>t,default:()=>g,frontMatter:()=>a,contentTitle:()=>o,toc:()=>m,assets:()=>r});var t=JSON.parse('{"id":"eval-monitor/scorers/llm-judge/simba","title":"SIMBA Alignment Optimizer","description":"MLflow provides the default alignment optimizer using DSPy\'s implementation of SIMBA (Simplified Multi-Bootstrap Aggregation). When you call align() without specifying an optimizer, the SIMBA optimizer is used automatically.","source":"@site/docs/genai/eval-monitor/scorers/llm-judge/simba.mdx","sourceDirName":"eval-monitor/scorers/llm-judge","slug":"/eval-monitor/scorers/llm-judge/simba","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/simba","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"genAISidebar","previous":{"title":"Judge Alignment: Teaching AI to Match Human Preferences","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/alignment"},"next":{"title":"MemAlign Optimizer","permalink":"/mlflow-website/docs/latest/genai/eval-monitor/scorers/llm-judge/memalign"}}'),s=n(74848),l=n(28453);let a={},o="SIMBA Alignment Optimizer",r={},m=[{value:"Requirements",id:"requirements",level:2},{value:"Basic Usage",id:"basic-usage",level:2},{value:"Debugging",id:"debugging",level:2}];function d(e){let i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.header,{children:(0,s.jsx)(i.h1,{id:"simba-alignment-optimizer",children:"SIMBA Alignment Optimizer"})}),"\n",(0,s.jsxs)(i.p,{children:["MLflow provides the ",(0,s.jsx)(i.strong,{children:"default alignment optimizer"})," using ",(0,s.jsx)(i.a,{href:"https://dspy.ai/api/optimizers/SIMBA/",children:"DSPy's implementation of SIMBA"})," (Simplified Multi-Bootstrap Aggregation). When you call ",(0,s.jsx)(i.code,{children:"align()"})," without specifying an optimizer, the SIMBA optimizer is used automatically."]}),"\n",(0,s.jsx)(i.h2,{id:"requirements",children:"Requirements"}),"\n",(0,s.jsx)(i.p,{children:"For alignment to work:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Traces must contain human assessments (labels) with the same name as the judge"}),"\n",(0,s.jsx)(i.li,{children:"Natural language feedback (rationale) is highly recommended for better alignment"}),"\n",(0,s.jsx)(i.li,{children:"Minimum of 10 traces with human assessments required"}),"\n",(0,s.jsx)(i.li,{children:"A mix of positive and negative labels is recommended"}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"basic-usage",children:"Basic Usage"}),"\n",(0,s.jsxs)(i.p,{children:["See ",(0,s.jsx)(i.a,{href:"/genai/eval-monitor/scorers/llm-judge/custom-judges",children:"make_judge documentation"})," for details on creating judges."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:'from mlflow.genai.judges import make_judge\nfrom mlflow.genai.judges.optimizers import SIMBAAlignmentOptimizer\nimport mlflow\n\n# Create a judge\njudge = make_judge(\n    name="politeness",\n    instructions=(\n        "Given a user question, evaluate if the chatbot\'s response is polite and respectful. "\n        "Consider the tone, language, and context of the response.\\n\\n"\n        "Question: {{ inputs }}\\n"\n        "Response: {{ outputs }}"\n    ),\n    feedback_value_type=bool,\n    model="openai:/gpt-5-mini",\n)\n\n# Retrieve traces with human feedback\ntraces_with_feedback = mlflow.search_traces(return_type="list")\n\n# Default: Uses SIMBA optimizer automatically\naligned_judge = judge.align(traces_with_feedback)\n\n# Explicit: Same as above but with custom model specification\noptimizer = SIMBAAlignmentOptimizer(\n    model="openai:/gpt-5-mini"  # Model used for optimization\n)\naligned_judge = judge.align(traces_with_feedback, optimizer)\n'})}),"\n",(0,s.jsx)(i.admonition,{title:"Default Optimizer Behavior",type:"tip",children:(0,s.jsxs)(i.p,{children:["When using ",(0,s.jsx)(i.code,{children:"align()"})," without an optimizer parameter, MLflow automatically uses the SIMBA optimizer. This simplifies the alignment process while still allowing customization when needed."]})}),"\n",(0,s.jsx)(i.h2,{id:"debugging",children:"Debugging"}),"\n",(0,s.jsx)(i.p,{children:"To debug the optimization process, enable DEBUG logging:"}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-python",children:'import logging\n\nlogging.getLogger("mlflow.genai.judges.optimizers.simba").setLevel(logging.DEBUG)\naligned_judge = initial_judge.align(traces_with_feedback, optimizer)\n'})})]})}function g(e={}){let{wrapper:i}={...(0,l.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453(e,i,n){n.d(i,{R:()=>a,x:()=>o});var t=n(96540);let s={},l=t.createContext(s);function a(e){let i=t.useContext(l);return t.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function o(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),t.createElement(l.Provider,{value:i},e.children)}}}]);